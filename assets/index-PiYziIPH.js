var Tc=Object.defineProperty;var jc=(e,t,n)=>t in e?Tc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ee=(e,t,n)=>jc(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function kr(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Se={},xn=[],At=()=>{},Dc=()=>!1,Xs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Sr=e=>e.startsWith("onUpdate:"),Ye=Object.assign,Ir=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Uc=Object.prototype.hasOwnProperty,be=(e,t)=>Uc.call(e,t),le=Array.isArray,En=e=>gs(e)==="[object Map]",Nn=e=>gs(e)==="[object Set]",uo=e=>gs(e)==="[object Date]",de=e=>typeof e=="function",De=e=>typeof e=="string",Mt=e=>typeof e=="symbol",Ie=e=>e!==null&&typeof e=="object",ja=e=>(Ie(e)||de(e))&&de(e.then)&&de(e.catch),Da=Object.prototype.toString,gs=e=>Da.call(e),Lc=e=>gs(e).slice(8,-1),Ua=e=>gs(e)==="[object Object]",Or=e=>De(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Jn=kr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Nc=/-(\w)/g,rn=Zs(e=>e.replace(Nc,(t,n)=>n?n.toUpperCase():"")),Fc=/\B([A-Z])/g,wn=Zs(e=>e.replace(Fc,"-$1").toLowerCase()),La=Zs(e=>e.charAt(0).toUpperCase()+e.slice(1)),_i=Zs(e=>e?`on${La(e)}`:""),sn=(e,t)=>!Object.is(e,t),As=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ni=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ns=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let fo;const ei=()=>fo||(fo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ti(e){if(le(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=De(s)?Hc(s):ti(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(De(e)||Ie(e))return e}const Wc=/;(?![^(]*\))/g,qc=/:([^]+)/,Vc=/\/\*[^]*?\*\//g;function Hc(e){const t={};return e.replace(Vc,"").split(Wc).forEach(n=>{if(n){const s=n.split(qc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function bt(e){let t="";if(De(e))t=e;else if(le(e))for(let n=0;n<e.length;n++){const s=bt(e[n]);s&&(t+=s+" ")}else if(Ie(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Bc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zc=kr(Bc);function Na(e){return!!e||e===""}function Kc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=yn(e[s],t[s]);return n}function yn(e,t){if(e===t)return!0;let n=uo(e),s=uo(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Mt(e),s=Mt(t),n||s)return e===t;if(n=le(e),s=le(t),n||s)return n&&s?Kc(e,t):!1;if(n=Ie(e),s=Ie(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!yn(e[o],t[o]))return!1}}return String(e)===String(t)}function $r(e,t){return e.findIndex(n=>yn(n,t))}const Fa=e=>!!(e&&e.__v_isRef===!0),q=e=>De(e)?e:e==null?"":le(e)||Ie(e)&&(e.toString===Da||!de(e.toString))?Fa(e)?q(e.value):JSON.stringify(e,Wa,2):String(e),Wa=(e,t)=>Fa(t)?Wa(e,t.value):En(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[bi(s,r)+" =>"]=i,n),{})}:Nn(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>bi(n))}:Mt(t)?bi(t):Ie(t)&&!le(t)&&!Ua(t)?String(t):t,bi=(e,t="")=>{var n;return Mt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ke;class qa{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ke,!t&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ke;try{return Ke=this,t()}finally{Ke=n}}}on(){++this._on===1&&(this.prevScope=Ke,Ke=this)}off(){this._on>0&&--this._on===0&&(Ke=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Va(e){return new qa(e)}function Cr(){return Ke}function Ha(e,t=!1){Ke&&Ke.cleanups.push(e)}let $e;const wi=new WeakSet;class Ba{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ke&&Ke.active&&Ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,wi.has(this)&&(wi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ka(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,po(this),Qa(this);const t=$e,n=wt;$e=this,wt=!0;try{return this.fn()}finally{Ja(this),$e=t,wt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Er(t);this.deps=this.depsTail=void 0,po(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?wi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fi(this)&&this.run()}get dirty(){return Fi(this)}}let za=0,Gn,Yn;function Ka(e,t=!1){if(e.flags|=8,t){e.next=Yn,Yn=e;return}e.next=Gn,Gn=e}function Pr(){za++}function xr(){if(--za>0)return;if(Yn){let t=Yn;for(Yn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Gn;){let t=Gn;for(Gn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Qa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ja(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Er(s),Qc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Fi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ga(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ga(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===as)||(e.globalVersion=as,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fi(e))))return;e.flags|=2;const t=e.dep,n=$e,s=wt;$e=e,wt=!0;try{Qa(e);const i=e.fn(e._value);(t.version===0||sn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{$e=n,wt=s,Ja(e),e.flags&=-3}}function Er(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Er(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Qc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let wt=!0;const Ya=[];function Kt(){Ya.push(wt),wt=!1}function Qt(){const e=Ya.pop();wt=e===void 0?!0:e}function po(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=$e;$e=void 0;try{t()}finally{$e=n}}}let as=0;class Jc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ar{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!$e||!wt||$e===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==$e)n=this.activeLink=new Jc($e,this),$e.deps?(n.prevDep=$e.depsTail,$e.depsTail.nextDep=n,$e.depsTail=n):$e.deps=$e.depsTail=n,Xa(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=$e.depsTail,n.nextDep=void 0,$e.depsTail.nextDep=n,$e.depsTail=n,$e.deps===n&&($e.deps=s)}return n}trigger(t){this.version++,as++,this.notify(t)}notify(t){Pr();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{xr()}}}function Xa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Xa(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Fs=new WeakMap,vn=Symbol(""),Wi=Symbol(""),ls=Symbol("");function Je(e,t,n){if(wt&&$e){let s=Fs.get(e);s||Fs.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Ar),i.map=s,i.key=n),i.track()}}function Wt(e,t,n,s,i,r){const o=Fs.get(e);if(!o){as++;return}const a=l=>{l&&l.trigger()};if(Pr(),t==="clear")o.forEach(a);else{const l=le(e),u=l&&Or(n);if(l&&n==="length"){const c=Number(s);o.forEach((f,p)=>{(p==="length"||p===ls||!Mt(p)&&p>=c)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(ls)),t){case"add":l?u&&a(o.get("length")):(a(o.get(vn)),En(e)&&a(o.get(Wi)));break;case"delete":l||(a(o.get(vn)),En(e)&&a(o.get(Wi)));break;case"set":En(e)&&a(o.get(vn));break}}xr()}function Gc(e,t){const n=Fs.get(e);return n&&n.get(t)}function In(e){const t=me(e);return t===e?t:(Je(t,"iterate",ls),vt(e)?t:t.map(He))}function ni(e){return Je(e=me(e),"iterate",ls),e}const Yc={__proto__:null,[Symbol.iterator](){return ki(this,Symbol.iterator,He)},concat(...e){return In(this).concat(...e.map(t=>le(t)?In(t):t))},entries(){return ki(this,"entries",e=>(e[1]=He(e[1]),e))},every(e,t){return Ut(this,"every",e,t,void 0,arguments)},filter(e,t){return Ut(this,"filter",e,t,n=>n.map(He),arguments)},find(e,t){return Ut(this,"find",e,t,He,arguments)},findIndex(e,t){return Ut(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ut(this,"findLast",e,t,He,arguments)},findLastIndex(e,t){return Ut(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ut(this,"forEach",e,t,void 0,arguments)},includes(...e){return Si(this,"includes",e)},indexOf(...e){return Si(this,"indexOf",e)},join(e){return In(this).join(e)},lastIndexOf(...e){return Si(this,"lastIndexOf",e)},map(e,t){return Ut(this,"map",e,t,void 0,arguments)},pop(){return Vn(this,"pop")},push(...e){return Vn(this,"push",e)},reduce(e,...t){return ho(this,"reduce",e,t)},reduceRight(e,...t){return ho(this,"reduceRight",e,t)},shift(){return Vn(this,"shift")},some(e,t){return Ut(this,"some",e,t,void 0,arguments)},splice(...e){return Vn(this,"splice",e)},toReversed(){return In(this).toReversed()},toSorted(e){return In(this).toSorted(e)},toSpliced(...e){return In(this).toSpliced(...e)},unshift(...e){return Vn(this,"unshift",e)},values(){return ki(this,"values",He)}};function ki(e,t,n){const s=ni(e),i=s[t]();return s!==e&&!vt(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const Xc=Array.prototype;function Ut(e,t,n,s,i,r){const o=ni(e),a=o!==e&&!vt(e),l=o[t];if(l!==Xc[t]){const f=l.apply(e,r);return a?He(f):f}let u=n;o!==e&&(a?u=function(f,p){return n.call(this,He(f),p,e)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,e)}));const c=l.call(o,u,s);return a&&i?i(c):c}function ho(e,t,n,s){const i=ni(e);let r=n;return i!==e&&(vt(e)?n.length>3&&(r=function(o,a,l){return n.call(this,o,a,l,e)}):r=function(o,a,l){return n.call(this,o,He(a),l,e)}),i[t](r,...s)}function Si(e,t,n){const s=me(e);Je(s,"iterate",ls);const i=s[t](...n);return(i===-1||i===!1)&&Tr(n[0])?(n[0]=me(n[0]),s[t](...n)):i}function Vn(e,t,n=[]){Kt(),Pr();const s=me(e)[t].apply(e,n);return xr(),Qt(),s}const Zc=kr("__proto__,__v_isRef,__isVue"),Za=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt));function eu(e){Mt(e)||(e=String(e));const t=me(this);return Je(t,"has",e),t.hasOwnProperty(e)}class el{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?uu:il:r?sl:nl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=le(t);if(!i){let l;if(o&&(l=Yc[n]))return l;if(n==="hasOwnProperty")return eu}const a=Reflect.get(t,n,Re(t)?t:s);return(Mt(n)?Za.has(n):Zc(n))||(i||Je(t,"get",n),r)?a:Re(a)?o&&Or(n)?a:a.value:Ie(a)?i?ol(a):Fn(a):a}}class tl extends el{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const l=on(r);if(!vt(s)&&!on(s)&&(r=me(r),s=me(s)),!le(t)&&Re(r)&&!Re(s))return l?!1:(r.value=s,!0)}const o=le(t)&&Or(n)?Number(n)<t.length:be(t,n),a=Reflect.set(t,n,s,Re(t)?t:i);return t===me(i)&&(o?sn(s,r)&&Wt(t,"set",n,s):Wt(t,"add",n,s)),a}deleteProperty(t,n){const s=be(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Wt(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Mt(n)||!Za.has(n))&&Je(t,"has",n),s}ownKeys(t){return Je(t,"iterate",le(t)?"length":vn),Reflect.ownKeys(t)}}class tu extends el{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const nu=new tl,su=new tu,iu=new tl(!0);const qi=e=>e,Is=e=>Reflect.getPrototypeOf(e);function ru(e,t,n){return function(...s){const i=this.__v_raw,r=me(i),o=En(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=i[e](...s),c=n?qi:t?Ws:He;return!t&&Je(r,"iterate",l?Wi:vn),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[c(f[0]),c(f[1])]:c(f),done:p}},[Symbol.iterator](){return this}}}}function Os(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ou(e,t){const n={get(i){const r=this.__v_raw,o=me(r),a=me(i);e||(sn(i,a)&&Je(o,"get",i),Je(o,"get",a));const{has:l}=Is(o),u=t?qi:e?Ws:He;if(l.call(o,i))return u(r.get(i));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&Je(me(i),"iterate",vn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=me(r),a=me(i);return e||(sn(i,a)&&Je(o,"has",i),Je(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,l=me(a),u=t?qi:e?Ws:He;return!e&&Je(l,"iterate",vn),a.forEach((c,f)=>i.call(r,u(c),u(f),o))}};return Ye(n,e?{add:Os("add"),set:Os("set"),delete:Os("delete"),clear:Os("clear")}:{add(i){!t&&!vt(i)&&!on(i)&&(i=me(i));const r=me(this);return Is(r).has.call(r,i)||(r.add(i),Wt(r,"add",i,i)),this},set(i,r){!t&&!vt(r)&&!on(r)&&(r=me(r));const o=me(this),{has:a,get:l}=Is(o);let u=a.call(o,i);u||(i=me(i),u=a.call(o,i));const c=l.call(o,i);return o.set(i,r),u?sn(r,c)&&Wt(o,"set",i,r):Wt(o,"add",i,r),this},delete(i){const r=me(this),{has:o,get:a}=Is(r);let l=o.call(r,i);l||(i=me(i),l=o.call(r,i)),a&&a.call(r,i);const u=r.delete(i);return l&&Wt(r,"delete",i,void 0),u},clear(){const i=me(this),r=i.size!==0,o=i.clear();return r&&Wt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=ru(i,e,t)}),n}function Rr(e,t){const n=ou(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(be(n,i)&&i in s?n:s,i,r)}const au={get:Rr(!1,!1)},lu={get:Rr(!1,!0)},cu={get:Rr(!0,!1)};const nl=new WeakMap,sl=new WeakMap,il=new WeakMap,uu=new WeakMap;function du(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function fu(e){return e.__v_skip||!Object.isExtensible(e)?0:du(Lc(e))}function Fn(e){return on(e)?e:Mr(e,!1,nu,au,nl)}function rl(e){return Mr(e,!1,iu,lu,sl)}function ol(e){return Mr(e,!0,su,cu,il)}function Mr(e,t,n,s,i){if(!Ie(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=fu(e);if(r===0)return e;const o=i.get(e);if(o)return o;const a=new Proxy(e,r===2?s:n);return i.set(e,a),a}function Ht(e){return on(e)?Ht(e.__v_raw):!!(e&&e.__v_isReactive)}function on(e){return!!(e&&e.__v_isReadonly)}function vt(e){return!!(e&&e.__v_isShallow)}function Tr(e){return e?!!e.__v_raw:!1}function me(e){const t=e&&e.__v_raw;return t?me(t):e}function jr(e){return!be(e,"__v_skip")&&Object.isExtensible(e)&&Ni(e,"__v_skip",!0),e}const He=e=>Ie(e)?Fn(e):e,Ws=e=>Ie(e)?ol(e):e;function Re(e){return e?e.__v_isRef===!0:!1}function z(e){return al(e,!1)}function Bt(e){return al(e,!0)}function al(e,t){return Re(e)?e:new pu(e,t)}class pu{constructor(t,n){this.dep=new Ar,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:me(t),this._value=n?t:He(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||vt(t)||on(t);t=s?t:me(t),sn(t,n)&&(this._rawValue=t,this._value=s?t:He(t),this.dep.trigger())}}function se(e){return Re(e)?e.value:e}function Ne(e){return de(e)?e():se(e)}const hu={get:(e,t,n)=>t==="__v_raw"?e:se(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Re(i)&&!Re(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function ll(e){return Ht(e)?e:new Proxy(e,hu)}function vu(e){const t=le(e)?new Array(e.length):{};for(const n in e)t[n]=cl(e,n);return t}class gu{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Gc(me(this._object),this._key)}}class mu{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function yu(e,t,n){return Re(e)?e:de(e)?new mu(e):Ie(e)&&arguments.length>1?cl(e,t,n):z(e)}function cl(e,t,n){const s=e[t];return Re(s)?s:new gu(e,t,n)}class _u{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ar(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=as-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&$e!==this)return Ka(this,!0),!0}get value(){const t=this.dep.track();return Ga(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function bu(e,t,n=!1){let s,i;return de(e)?s=e:(s=e.get,i=e.set),new _u(s,i,n)}const $s={},qs=new WeakMap;let fn;function wu(e,t=!1,n=fn){if(n){let s=qs.get(n);s||qs.set(n,s=[]),s.push(e)}}function ku(e,t,n=Se){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:l}=n,u=O=>i?O:vt(O)||i===!1||i===0?qt(O,1):qt(O);let c,f,p,h,y=!1,b=!1;if(Re(e)?(f=()=>e.value,y=vt(e)):Ht(e)?(f=()=>u(e),y=!0):le(e)?(b=!0,y=e.some(O=>Ht(O)||vt(O)),f=()=>e.map(O=>{if(Re(O))return O.value;if(Ht(O))return u(O);if(de(O))return l?l(O,2):O()})):de(e)?t?f=l?()=>l(e,2):e:f=()=>{if(p){Kt();try{p()}finally{Qt()}}const O=fn;fn=c;try{return l?l(e,3,[h]):e(h)}finally{fn=O}}:f=At,t&&i){const O=f,I=i===!0?1/0:i;f=()=>qt(O(),I)}const $=Cr(),M=()=>{c.stop(),$&&$.active&&Ir($.effects,c)};if(r&&t){const O=t;t=(...I)=>{O(...I),M()}}let T=b?new Array(e.length).fill($s):$s;const A=O=>{if(!(!(c.flags&1)||!c.dirty&&!O))if(t){const I=c.run();if(i||y||(b?I.some((C,E)=>sn(C,T[E])):sn(I,T))){p&&p();const C=fn;fn=c;try{const E=[I,T===$s?void 0:b&&T[0]===$s?[]:T,h];T=I,l?l(t,3,E):t(...E)}finally{fn=C}}}else c.run()};return a&&a(A),c=new Ba(f),c.scheduler=o?()=>o(A,!1):A,h=O=>wu(O,!1,c),p=c.onStop=()=>{const O=qs.get(c);if(O){if(l)l(O,4);else for(const I of O)I();qs.delete(c)}},t?s?A(!0):T=c.run():o?o(A.bind(null,!0),!0):c.run(),M.pause=c.pause.bind(c),M.resume=c.resume.bind(c),M.stop=M,M}function qt(e,t=1/0,n){if(t<=0||!Ie(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Re(e))qt(e.value,t,n);else if(le(e))for(let s=0;s<e.length;s++)qt(e[s],t,n);else if(Nn(e)||En(e))e.forEach(s=>{qt(s,t,n)});else if(Ua(e)){for(const s in e)qt(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&qt(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ms(e,t,n,s){try{return s?e(...s):e()}catch(i){si(i,t,n)}}function Tt(e,t,n,s){if(de(e)){const i=ms(e,t,n,s);return i&&ja(i)&&i.catch(r=>{si(r,t,n)}),i}if(le(e)){const i=[];for(let r=0;r<e.length;r++)i.push(Tt(e[r],t,n,s));return i}}function si(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Se;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let f=0;f<c.length;f++)if(c[f](e,l,u)===!1)return}a=a.parent}if(r){Kt(),ms(r,null,10,[e,l,u]),Qt();return}}Su(e,n,i,s,o)}function Su(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Ze=[];let Pt=-1;const An=[];let en=null,$n=0;const ul=Promise.resolve();let Vs=null;function ii(e){const t=Vs||ul;return e?t.then(this?e.bind(this):e):t}function Iu(e){let t=Pt+1,n=Ze.length;for(;t<n;){const s=t+n>>>1,i=Ze[s],r=cs(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function Dr(e){if(!(e.flags&1)){const t=cs(e),n=Ze[Ze.length-1];!n||!(e.flags&2)&&t>=cs(n)?Ze.push(e):Ze.splice(Iu(t),0,e),e.flags|=1,dl()}}function dl(){Vs||(Vs=ul.then(pl))}function Ou(e){le(e)?An.push(...e):en&&e.id===-1?en.splice($n+1,0,e):e.flags&1||(An.push(e),e.flags|=1),dl()}function vo(e,t,n=Pt+1){for(;n<Ze.length;n++){const s=Ze[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Ze.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function fl(e){if(An.length){const t=[...new Set(An)].sort((n,s)=>cs(n)-cs(s));if(An.length=0,en){en.push(...t);return}for(en=t,$n=0;$n<en.length;$n++){const n=en[$n];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}en=null,$n=0}}const cs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function pl(e){try{for(Pt=0;Pt<Ze.length;Pt++){const t=Ze[Pt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ms(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Pt<Ze.length;Pt++){const t=Ze[Pt];t&&(t.flags&=-2)}Pt=-1,Ze.length=0,fl(),Vs=null,(Ze.length||An.length)&&pl()}}let ut=null,hl=null;function Hs(e){const t=ut;return ut=e,hl=e&&e.type.__scopeId||null,t}function Vi(e,t=ut,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Io(-1);const r=Hs(t);let o;try{o=e(...i)}finally{Hs(r),s._d&&Io(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function ye(e,t){if(ut===null)return e;const n=li(ut),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,l=Se]=t[i];r&&(de(r)&&(r={mounted:r,updated:r}),r.deep&&qt(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function un(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Kt(),Tt(l,n,8,[e.el,a,e,t]),Qt())}}const $u=Symbol("_vte"),Cu=e=>e.__isTeleport;function Ur(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ur(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Fe(e,t){return de(e)?Ye({name:e.name},t,{setup:e}):e}function vl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Xn(e,t,n,s,i=!1){if(le(e)){e.forEach((y,b)=>Xn(y,t&&(le(t)?t[b]:t),n,s,i));return}if(Zn(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Xn(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?li(s.component):s.el,o=i?null:r,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Se?a.refs={}:a.refs,f=a.setupState,p=me(f),h=f===Se?()=>!1:y=>be(p,y);if(u!=null&&u!==l&&(De(u)?(c[u]=null,h(u)&&(f[u]=null)):Re(u)&&(u.value=null)),de(l))ms(l,a,12,[o,c]);else{const y=De(l),b=Re(l);if(y||b){const $=()=>{if(e.f){const M=y?h(l)?f[l]:c[l]:l.value;i?le(M)&&Ir(M,r):le(M)?M.includes(r)||M.push(r):y?(c[l]=[r],h(l)&&(f[l]=c[l])):(l.value=[r],e.k&&(c[e.k]=l.value))}else y?(c[l]=o,h(l)&&(f[l]=o)):b&&(l.value=o,e.k&&(c[e.k]=o))};o?($.id=-1,at($,n)):$()}}}ei().requestIdleCallback;ei().cancelIdleCallback;const Zn=e=>!!e.type.__asyncLoader,gl=e=>e.type.__isKeepAlive;function Pu(e,t){ml(e,"a",t)}function xu(e,t){ml(e,"da",t)}function ml(e,t,n=Ge){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ri(t,s,n),n){let i=n.parent;for(;i&&i.parent;)gl(i.parent.vnode)&&Eu(s,t,n,i),i=i.parent}}function Eu(e,t,n,s){const i=ri(t,e,s,!0);Lr(()=>{Ir(s[t],i)},n)}function ri(e,t,n=Ge,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Kt();const a=ys(n),l=Tt(t,n,e,o);return a(),Qt(),l});return s?i.unshift(r):i.push(r),r}}const Yt=e=>(t,n=Ge)=>{(!ds||e==="sp")&&ri(e,(...s)=>t(...s),n)},Au=Yt("bm"),Wn=Yt("m"),Ru=Yt("bu"),Mu=Yt("u"),Tu=Yt("bum"),Lr=Yt("um"),ju=Yt("sp"),Du=Yt("rtg"),Uu=Yt("rtc");function Lu(e,t=Ge){ri("ec",e,t)}const Nu=Symbol.for("v-ndc");function Ae(e,t,n,s){let i;const r=n,o=le(e);if(o||De(e)){const a=o&&Ht(e);let l=!1,u=!1;a&&(l=!vt(e),u=on(e),e=ni(e)),i=new Array(e.length);for(let c=0,f=e.length;c<f;c++)i[c]=t(l?u?Ws(He(e[c])):He(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,r)}else if(Ie(e))if(e[Symbol.iterator])i=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);i=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];i[l]=t(e[c],c,l,r)}}else i=[];return i}const Hi=e=>e?Dl(e)?li(e):Hi(e.parent):null,es=Ye(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hi(e.parent),$root:e=>Hi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_l(e),$forceUpdate:e=>e.f||(e.f=()=>{Dr(e.update)}),$nextTick:e=>e.n||(e.n=ii.bind(e.proxy)),$watch:e=>ad.bind(e)}),Ii=(e,t)=>e!==Se&&!e.__isScriptSetup&&be(e,t),Fu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(Ii(s,t))return o[t]=1,s[t];if(i!==Se&&be(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&be(u,t))return o[t]=3,r[t];if(n!==Se&&be(n,t))return o[t]=4,n[t];Bi&&(o[t]=0)}}const c=es[t];let f,p;if(c)return t==="$attrs"&&Je(e.attrs,"get",""),c(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==Se&&be(n,t))return o[t]=4,n[t];if(p=l.config.globalProperties,be(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return Ii(i,t)?(i[t]=n,!0):s!==Se&&be(s,t)?(s[t]=n,!0):be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==Se&&be(e,o)||Ii(t,o)||(a=r[0])&&be(a,o)||be(s,o)||be(es,o)||be(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:be(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function go(e){return le(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Bi=!0;function Wu(e){const t=_l(e),n=e.proxy,s=e.ctx;Bi=!1,t.beforeCreate&&mo(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:p,beforeUpdate:h,updated:y,activated:b,deactivated:$,beforeDestroy:M,beforeUnmount:T,destroyed:A,unmounted:O,render:I,renderTracked:C,renderTriggered:E,errorCaptured:L,serverPrefetch:k,expose:_,inheritAttrs:g,components:w,directives:V,filters:P}=t;if(u&&qu(u,s,null),o)for(const B in o){const ie=o[B];de(ie)&&(s[B]=ie.bind(n))}if(i){const B=i.call(n,n);Ie(B)&&(e.data=Fn(B))}if(Bi=!0,r)for(const B in r){const ie=r[B],Pe=de(ie)?ie.bind(n,n):de(ie.get)?ie.get.bind(n,n):At,ce=!de(ie)&&de(ie.set)?ie.set.bind(n):At,xe=te({get:Pe,set:ce});Object.defineProperty(s,B,{enumerable:!0,configurable:!0,get:()=>xe.value,set:Ue=>xe.value=Ue})}if(a)for(const B in a)yl(a[B],s,n,B);if(l){const B=de(l)?l.call(n):l;Reflect.ownKeys(B).forEach(ie=>{Rs(ie,B[ie])})}c&&mo(c,e,"c");function Z(B,ie){le(ie)?ie.forEach(Pe=>B(Pe.bind(n))):ie&&B(ie.bind(n))}if(Z(Au,f),Z(Wn,p),Z(Ru,h),Z(Mu,y),Z(Pu,b),Z(xu,$),Z(Lu,L),Z(Uu,C),Z(Du,E),Z(Tu,T),Z(Lr,O),Z(ju,k),le(_))if(_.length){const B=e.exposed||(e.exposed={});_.forEach(ie=>{Object.defineProperty(B,ie,{get:()=>n[ie],set:Pe=>n[ie]=Pe})})}else e.exposed||(e.exposed={});I&&e.render===At&&(e.render=I),g!=null&&(e.inheritAttrs=g),w&&(e.components=w),V&&(e.directives=V),k&&vl(e)}function qu(e,t,n=At){le(e)&&(e=zi(e));for(const s in e){const i=e[s];let r;Ie(i)?"default"in i?r=gt(i.from||s,i.default,!0):r=gt(i.from||s):r=gt(i),Re(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function mo(e,t,n){Tt(le(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function yl(e,t,n,s){let i=s.includes(".")?Al(n,s):()=>n[s];if(De(e)){const r=t[e];de(r)&&Be(i,r)}else if(de(e))Be(i,e.bind(n));else if(Ie(e))if(le(e))e.forEach(r=>yl(r,t,n,s));else{const r=de(e.handler)?e.handler.bind(n):t[e.handler];de(r)&&Be(i,r,e)}}function _l(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!i.length&&!n&&!s?l=t:(l={},i.length&&i.forEach(u=>Bs(l,u,o,!0)),Bs(l,t,o)),Ie(t)&&r.set(t,l),l}function Bs(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Bs(e,r,n,!0),i&&i.forEach(o=>Bs(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=Vu[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Vu={data:yo,props:_o,emits:_o,methods:zn,computed:zn,beforeCreate:Xe,created:Xe,beforeMount:Xe,mounted:Xe,beforeUpdate:Xe,updated:Xe,beforeDestroy:Xe,beforeUnmount:Xe,destroyed:Xe,unmounted:Xe,activated:Xe,deactivated:Xe,errorCaptured:Xe,serverPrefetch:Xe,components:zn,directives:zn,watch:Bu,provide:yo,inject:Hu};function yo(e,t){return t?e?function(){return Ye(de(e)?e.call(this,this):e,de(t)?t.call(this,this):t)}:t:e}function Hu(e,t){return zn(zi(e),zi(t))}function zi(e){if(le(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Xe(e,t){return e?[...new Set([].concat(e,t))]:t}function zn(e,t){return e?Ye(Object.create(null),e,t):t}function _o(e,t){return e?le(e)&&le(t)?[...new Set([...e,...t])]:Ye(Object.create(null),go(e),go(t??{})):t}function Bu(e,t){if(!e)return t;if(!t)return e;const n=Ye(Object.create(null),e);for(const s in t)n[s]=Xe(e[s],t[s]);return n}function bl(){return{app:null,config:{isNativeTag:Dc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zu=0;function Ku(e,t){return function(s,i=null){de(s)||(s=Ye({},s)),i!=null&&!Ie(i)&&(i=null);const r=bl(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:zu++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:Cd,get config(){return r.config},set config(c){},use(c,...f){return o.has(c)||(c&&de(c.install)?(o.add(c),c.install(u,...f)):de(c)&&(o.add(c),c(u,...f))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,f){return f?(r.components[c]=f,u):r.components[c]},directive(c,f){return f?(r.directives[c]=f,u):r.directives[c]},mount(c,f,p){if(!l){const h=u._ceVNode||Ce(s,i);return h.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(h,c,p),l=!0,u._container=c,c.__vue_app__=u,li(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Tt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,f){return r.provides[c]=f,u},runWithContext(c){const f=gn;gn=u;try{return c()}finally{gn=f}}};return u}}let gn=null;function Rs(e,t){if(Ge){let n=Ge.provides;const s=Ge.parent&&Ge.parent.provides;s===n&&(n=Ge.provides=Object.create(s)),n[e]=t}}function gt(e,t,n=!1){const s=Ge||ut;if(s||gn){let i=gn?gn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&de(t)?t.call(s&&s.proxy):t}}function Qu(){return!!(Ge||ut||gn)}const wl={},kl=()=>Object.create(wl),Sl=e=>Object.getPrototypeOf(e)===wl;function Ju(e,t,n,s=!1){const i={},r=kl();e.propsDefaults=Object.create(null),Il(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:rl(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function Gu(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=me(i),[l]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let p=c[f];if(oi(e.emitsOptions,p))continue;const h=t[p];if(l)if(be(r,p))h!==r[p]&&(r[p]=h,u=!0);else{const y=rn(p);i[y]=Ki(l,a,y,h,e,!1)}else h!==r[p]&&(r[p]=h,u=!0)}}}else{Il(e,t,i,r)&&(u=!0);let c;for(const f in a)(!t||!be(t,f)&&((c=wn(f))===f||!be(t,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=Ki(l,a,f,void 0,e,!0)):delete i[f]);if(r!==a)for(const f in r)(!t||!be(t,f))&&(delete r[f],u=!0)}u&&Wt(e.attrs,"set","")}function Il(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Jn(l))continue;const u=t[l];let c;i&&be(i,c=rn(l))?!r||!r.includes(c)?n[c]=u:(a||(a={}))[c]=u:oi(e.emitsOptions,l)||(!(l in s)||u!==s[l])&&(s[l]=u,o=!0)}if(r){const l=me(n),u=a||Se;for(let c=0;c<r.length;c++){const f=r[c];n[f]=Ki(i,l,f,u[f],e,!be(u,f))}}return o}function Ki(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=be(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&de(l)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const c=ys(i);s=u[n]=l.call(null,t),c()}}else s=l;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===wn(n))&&(s=!0))}return s}const Yu=new WeakMap;function Ol(e,t,n=!1){const s=n?Yu:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let l=!1;if(!de(e)){const c=f=>{l=!0;const[p,h]=Ol(f,t,!0);Ye(o,p),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return Ie(e)&&s.set(e,xn),xn;if(le(r))for(let c=0;c<r.length;c++){const f=rn(r[c]);bo(f)&&(o[f]=Se)}else if(r)for(const c in r){const f=rn(c);if(bo(f)){const p=r[c],h=o[f]=le(p)||de(p)?{type:p}:Ye({},p),y=h.type;let b=!1,$=!0;if(le(y))for(let M=0;M<y.length;++M){const T=y[M],A=de(T)&&T.name;if(A==="Boolean"){b=!0;break}else A==="String"&&($=!1)}else b=de(y)&&y.name==="Boolean";h[0]=b,h[1]=$,(b||be(h,"default"))&&a.push(f)}}const u=[o,a];return Ie(e)&&s.set(e,u),u}function bo(e){return e[0]!=="$"&&!Jn(e)}const Nr=e=>e[0]==="_"||e==="$stable",Fr=e=>le(e)?e.map(Et):[Et(e)],Xu=(e,t,n)=>{if(t._n)return t;const s=Vi((...i)=>Fr(t(...i)),n);return s._c=!1,s},$l=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Nr(i))continue;const r=e[i];if(de(r))t[i]=Xu(i,r,s);else if(r!=null){const o=Fr(r);t[i]=()=>o}}},Cl=(e,t)=>{const n=Fr(t);e.slots.default=()=>n},Pl=(e,t,n)=>{for(const s in t)(n||!Nr(s))&&(e[s]=t[s])},Zu=(e,t,n)=>{const s=e.slots=kl();if(e.vnode.shapeFlag&32){const i=t.__;i&&Ni(s,"__",i,!0);const r=t._;r?(Pl(s,t,n),n&&Ni(s,"_",r,!0)):$l(t,s)}else t&&Cl(e,t)},ed=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=Se;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:Pl(i,t,n):(r=!t.$stable,$l(t,i)),o=t}else t&&(Cl(e,t),o={default:1});if(r)for(const a in i)!Nr(a)&&o[a]==null&&delete i[a]},at=hd;function td(e){return nd(e)}function nd(e,t){const n=ei();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:p,setScopeId:h=At,insertStaticContent:y}=e,b=(v,m,S,j=null,N=null,U=null,G=void 0,Q=null,K=!!m.dynamicChildren)=>{if(v===m)return;v&&!Hn(v,m)&&(j=x(v),Ue(v,N,U,!0),v=null),m.patchFlag===-2&&(K=!1,m.dynamicChildren=null);const{type:H,ref:oe,shapeFlag:Y}=m;switch(H){case ai:$(v,m,S,j);break;case an:M(v,m,S,j);break;case $i:v==null&&T(m,S,j,G);break;case ge:w(v,m,S,j,N,U,G,Q,K);break;default:Y&1?I(v,m,S,j,N,U,G,Q,K):Y&6?V(v,m,S,j,N,U,G,Q,K):(Y&64||Y&128)&&H.process(v,m,S,j,N,U,G,Q,K,ne)}oe!=null&&N?Xn(oe,v&&v.ref,U,m||v,!m):oe==null&&v&&v.ref!=null&&Xn(v.ref,null,U,v,!0)},$=(v,m,S,j)=>{if(v==null)s(m.el=a(m.children),S,j);else{const N=m.el=v.el;m.children!==v.children&&u(N,m.children)}},M=(v,m,S,j)=>{v==null?s(m.el=l(m.children||""),S,j):m.el=v.el},T=(v,m,S,j)=>{[v.el,v.anchor]=y(v.children,m,S,j,v.el,v.anchor)},A=({el:v,anchor:m},S,j)=>{let N;for(;v&&v!==m;)N=p(v),s(v,S,j),v=N;s(m,S,j)},O=({el:v,anchor:m})=>{let S;for(;v&&v!==m;)S=p(v),i(v),v=S;i(m)},I=(v,m,S,j,N,U,G,Q,K)=>{m.type==="svg"?G="svg":m.type==="math"&&(G="mathml"),v==null?C(m,S,j,N,U,G,Q,K):k(v,m,N,U,G,Q,K)},C=(v,m,S,j,N,U,G,Q)=>{let K,H;const{props:oe,shapeFlag:Y,transition:re,dirs:ue}=v;if(K=v.el=o(v.type,U,oe&&oe.is,oe),Y&8?c(K,v.children):Y&16&&L(v.children,K,null,j,N,Oi(v,U),G,Q),ue&&un(v,null,j,"created"),E(K,v,v.scopeId,G,j),oe){for(const Oe in oe)Oe!=="value"&&!Jn(Oe)&&r(K,Oe,null,oe[Oe],U,j);"value"in oe&&r(K,"value",null,oe.value,U),(H=oe.onVnodeBeforeMount)&&Ct(H,j,v)}ue&&un(v,null,j,"beforeMount");const ve=sd(N,re);ve&&re.beforeEnter(K),s(K,m,S),((H=oe&&oe.onVnodeMounted)||ve||ue)&&at(()=>{H&&Ct(H,j,v),ve&&re.enter(K),ue&&un(v,null,j,"mounted")},N)},E=(v,m,S,j,N)=>{if(S&&h(v,S),j)for(let U=0;U<j.length;U++)h(v,j[U]);if(N){let U=N.subTree;if(m===U||Ml(U.type)&&(U.ssContent===m||U.ssFallback===m)){const G=N.vnode;E(v,G,G.scopeId,G.slotScopeIds,N.parent)}}},L=(v,m,S,j,N,U,G,Q,K=0)=>{for(let H=K;H<v.length;H++){const oe=v[H]=Q?tn(v[H]):Et(v[H]);b(null,oe,m,S,j,N,U,G,Q)}},k=(v,m,S,j,N,U,G)=>{const Q=m.el=v.el;let{patchFlag:K,dynamicChildren:H,dirs:oe}=m;K|=v.patchFlag&16;const Y=v.props||Se,re=m.props||Se;let ue;if(S&&dn(S,!1),(ue=re.onVnodeBeforeUpdate)&&Ct(ue,S,m,v),oe&&un(m,v,S,"beforeUpdate"),S&&dn(S,!0),(Y.innerHTML&&re.innerHTML==null||Y.textContent&&re.textContent==null)&&c(Q,""),H?_(v.dynamicChildren,H,Q,S,j,Oi(m,N),U):G||ie(v,m,Q,null,S,j,Oi(m,N),U,!1),K>0){if(K&16)g(Q,Y,re,S,N);else if(K&2&&Y.class!==re.class&&r(Q,"class",null,re.class,N),K&4&&r(Q,"style",Y.style,re.style,N),K&8){const ve=m.dynamicProps;for(let Oe=0;Oe<ve.length;Oe++){const we=ve[Oe],nt=Y[we],st=re[we];(st!==nt||we==="value")&&r(Q,we,nt,st,N,S)}}K&1&&v.children!==m.children&&c(Q,m.children)}else!G&&H==null&&g(Q,Y,re,S,N);((ue=re.onVnodeUpdated)||oe)&&at(()=>{ue&&Ct(ue,S,m,v),oe&&un(m,v,S,"updated")},j)},_=(v,m,S,j,N,U,G)=>{for(let Q=0;Q<m.length;Q++){const K=v[Q],H=m[Q],oe=K.el&&(K.type===ge||!Hn(K,H)||K.shapeFlag&198)?f(K.el):S;b(K,H,oe,null,j,N,U,G,!0)}},g=(v,m,S,j,N)=>{if(m!==S){if(m!==Se)for(const U in m)!Jn(U)&&!(U in S)&&r(v,U,m[U],null,N,j);for(const U in S){if(Jn(U))continue;const G=S[U],Q=m[U];G!==Q&&U!=="value"&&r(v,U,Q,G,N,j)}"value"in S&&r(v,"value",m.value,S.value,N)}},w=(v,m,S,j,N,U,G,Q,K)=>{const H=m.el=v?v.el:a(""),oe=m.anchor=v?v.anchor:a("");let{patchFlag:Y,dynamicChildren:re,slotScopeIds:ue}=m;ue&&(Q=Q?Q.concat(ue):ue),v==null?(s(H,S,j),s(oe,S,j),L(m.children||[],S,oe,N,U,G,Q,K)):Y>0&&Y&64&&re&&v.dynamicChildren?(_(v.dynamicChildren,re,S,N,U,G,Q),(m.key!=null||N&&m===N.subTree)&&xl(v,m,!0)):ie(v,m,S,oe,N,U,G,Q,K)},V=(v,m,S,j,N,U,G,Q,K)=>{m.slotScopeIds=Q,v==null?m.shapeFlag&512?N.ctx.activate(m,S,j,G,K):P(m,S,j,N,U,G,K):R(v,m,K)},P=(v,m,S,j,N,U,G)=>{const Q=v.component=wd(v,j,N);if(gl(v)&&(Q.ctx.renderer=ne),kd(Q,!1,G),Q.asyncDep){if(N&&N.registerDep(Q,Z,G),!v.el){const K=Q.subTree=Ce(an);M(null,K,m,S)}}else Z(Q,v,m,S,N,U,G)},R=(v,m,S)=>{const j=m.component=v.component;if(fd(v,m,S))if(j.asyncDep&&!j.asyncResolved){B(j,m,S);return}else j.next=m,j.update();else m.el=v.el,j.vnode=m},Z=(v,m,S,j,N,U,G)=>{const Q=()=>{if(v.isMounted){let{next:Y,bu:re,u:ue,parent:ve,vnode:Oe}=v;{const Ot=El(v);if(Ot){Y&&(Y.el=Oe.el,B(v,Y,G)),Ot.asyncDep.then(()=>{v.isUnmounted||Q()});return}}let we=Y,nt;dn(v,!1),Y?(Y.el=Oe.el,B(v,Y,G)):Y=Oe,re&&As(re),(nt=Y.props&&Y.props.onVnodeBeforeUpdate)&&Ct(nt,ve,Y,Oe),dn(v,!0);const st=ko(v),It=v.subTree;v.subTree=st,b(It,st,f(It.el),x(It),v,N,U),Y.el=st.el,we===null&&pd(v,st.el),ue&&at(ue,N),(nt=Y.props&&Y.props.onVnodeUpdated)&&at(()=>Ct(nt,ve,Y,Oe),N)}else{let Y;const{el:re,props:ue}=m,{bm:ve,m:Oe,parent:we,root:nt,type:st}=v,It=Zn(m);dn(v,!1),ve&&As(ve),!It&&(Y=ue&&ue.onVnodeBeforeMount)&&Ct(Y,we,m),dn(v,!0);{nt.ce&&nt.ce._def.shadowRoot!==!1&&nt.ce._injectChildStyle(st);const Ot=v.subTree=ko(v);b(null,Ot,S,j,v,N,U),m.el=Ot.el}if(Oe&&at(Oe,N),!It&&(Y=ue&&ue.onVnodeMounted)){const Ot=m;at(()=>Ct(Y,we,Ot),N)}(m.shapeFlag&256||we&&Zn(we.vnode)&&we.vnode.shapeFlag&256)&&v.a&&at(v.a,N),v.isMounted=!0,m=S=j=null}};v.scope.on();const K=v.effect=new Ba(Q);v.scope.off();const H=v.update=K.run.bind(K),oe=v.job=K.runIfDirty.bind(K);oe.i=v,oe.id=v.uid,K.scheduler=()=>Dr(oe),dn(v,!0),H()},B=(v,m,S)=>{m.component=v;const j=v.vnode.props;v.vnode=m,v.next=null,Gu(v,m.props,j,S),ed(v,m.children,S),Kt(),vo(v),Qt()},ie=(v,m,S,j,N,U,G,Q,K=!1)=>{const H=v&&v.children,oe=v?v.shapeFlag:0,Y=m.children,{patchFlag:re,shapeFlag:ue}=m;if(re>0){if(re&128){ce(H,Y,S,j,N,U,G,Q,K);return}else if(re&256){Pe(H,Y,S,j,N,U,G,Q,K);return}}ue&8?(oe&16&&qe(H,N,U),Y!==H&&c(S,Y)):oe&16?ue&16?ce(H,Y,S,j,N,U,G,Q,K):qe(H,N,U,!0):(oe&8&&c(S,""),ue&16&&L(Y,S,j,N,U,G,Q,K))},Pe=(v,m,S,j,N,U,G,Q,K)=>{v=v||xn,m=m||xn;const H=v.length,oe=m.length,Y=Math.min(H,oe);let re;for(re=0;re<Y;re++){const ue=m[re]=K?tn(m[re]):Et(m[re]);b(v[re],ue,S,null,N,U,G,Q,K)}H>oe?qe(v,N,U,!0,!1,Y):L(m,S,j,N,U,G,Q,K,Y)},ce=(v,m,S,j,N,U,G,Q,K)=>{let H=0;const oe=m.length;let Y=v.length-1,re=oe-1;for(;H<=Y&&H<=re;){const ue=v[H],ve=m[H]=K?tn(m[H]):Et(m[H]);if(Hn(ue,ve))b(ue,ve,S,null,N,U,G,Q,K);else break;H++}for(;H<=Y&&H<=re;){const ue=v[Y],ve=m[re]=K?tn(m[re]):Et(m[re]);if(Hn(ue,ve))b(ue,ve,S,null,N,U,G,Q,K);else break;Y--,re--}if(H>Y){if(H<=re){const ue=re+1,ve=ue<oe?m[ue].el:j;for(;H<=re;)b(null,m[H]=K?tn(m[H]):Et(m[H]),S,ve,N,U,G,Q,K),H++}}else if(H>re)for(;H<=Y;)Ue(v[H],N,U,!0),H++;else{const ue=H,ve=H,Oe=new Map;for(H=ve;H<=re;H++){const ot=m[H]=K?tn(m[H]):Et(m[H]);ot.key!=null&&Oe.set(ot.key,H)}let we,nt=0;const st=re-ve+1;let It=!1,Ot=0;const qn=new Array(st);for(H=0;H<st;H++)qn[H]=0;for(H=ue;H<=Y;H++){const ot=v[H];if(nt>=st){Ue(ot,N,U,!0);continue}let $t;if(ot.key!=null)$t=Oe.get(ot.key);else for(we=ve;we<=re;we++)if(qn[we-ve]===0&&Hn(ot,m[we])){$t=we;break}$t===void 0?Ue(ot,N,U,!0):(qn[$t-ve]=H+1,$t>=Ot?Ot=$t:It=!0,b(ot,m[$t],S,null,N,U,G,Q,K),nt++)}const lo=It?id(qn):xn;for(we=lo.length-1,H=st-1;H>=0;H--){const ot=ve+H,$t=m[ot],co=ot+1<oe?m[ot+1].el:j;qn[H]===0?b(null,$t,S,co,N,U,G,Q,K):It&&(we<0||H!==lo[we]?xe($t,S,co,2):we--)}}},xe=(v,m,S,j,N=null)=>{const{el:U,type:G,transition:Q,children:K,shapeFlag:H}=v;if(H&6){xe(v.component.subTree,m,S,j);return}if(H&128){v.suspense.move(m,S,j);return}if(H&64){G.move(v,m,S,ne);return}if(G===ge){s(U,m,S);for(let Y=0;Y<K.length;Y++)xe(K[Y],m,S,j);s(v.anchor,m,S);return}if(G===$i){A(v,m,S);return}if(j!==2&&H&1&&Q)if(j===0)Q.beforeEnter(U),s(U,m,S),at(()=>Q.enter(U),N);else{const{leave:Y,delayLeave:re,afterLeave:ue}=Q,ve=()=>{v.ctx.isUnmounted?i(U):s(U,m,S)},Oe=()=>{Y(U,()=>{ve(),ue&&ue()})};re?re(U,ve,Oe):Oe()}else s(U,m,S)},Ue=(v,m,S,j=!1,N=!1)=>{const{type:U,props:G,ref:Q,children:K,dynamicChildren:H,shapeFlag:oe,patchFlag:Y,dirs:re,cacheIndex:ue}=v;if(Y===-2&&(N=!1),Q!=null&&(Kt(),Xn(Q,null,S,v,!0),Qt()),ue!=null&&(m.renderCache[ue]=void 0),oe&256){m.ctx.deactivate(v);return}const ve=oe&1&&re,Oe=!Zn(v);let we;if(Oe&&(we=G&&G.onVnodeBeforeUnmount)&&Ct(we,m,v),oe&6)Dt(v.component,S,j);else{if(oe&128){v.suspense.unmount(S,j);return}ve&&un(v,null,m,"beforeUnmount"),oe&64?v.type.remove(v,m,S,ne,j):H&&!H.hasOnce&&(U!==ge||Y>0&&Y&64)?qe(H,m,S,!1,!0):(U===ge&&Y&384||!N&&oe&16)&&qe(K,m,S),j&&ee(v)}(Oe&&(we=G&&G.onVnodeUnmounted)||ve)&&at(()=>{we&&Ct(we,m,v),ve&&un(v,null,m,"unmounted")},S)},ee=v=>{const{type:m,el:S,anchor:j,transition:N}=v;if(m===ge){F(S,j);return}if(m===$i){O(v);return}const U=()=>{i(S),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(v.shapeFlag&1&&N&&!N.persisted){const{leave:G,delayLeave:Q}=N,K=()=>G(S,U);Q?Q(v.el,U,K):K()}else U()},F=(v,m)=>{let S;for(;v!==m;)S=p(v),i(v),v=S;i(m)},Dt=(v,m,S)=>{const{bum:j,scope:N,job:U,subTree:G,um:Q,m:K,a:H,parent:oe,slots:{__:Y}}=v;wo(K),wo(H),j&&As(j),oe&&le(Y)&&Y.forEach(re=>{oe.renderCache[re]=void 0}),N.stop(),U&&(U.flags|=8,Ue(G,v,m,S)),Q&&at(Q,m),at(()=>{v.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},qe=(v,m,S,j=!1,N=!1,U=0)=>{for(let G=U;G<v.length;G++)Ue(v[G],m,S,j,N)},x=v=>{if(v.shapeFlag&6)return x(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const m=p(v.anchor||v.el),S=m&&m[$u];return S?p(S):m};let X=!1;const J=(v,m,S)=>{v==null?m._vnode&&Ue(m._vnode,null,null,!0):b(m._vnode||null,v,m,null,null,null,S),m._vnode=v,X||(X=!0,vo(),fl(),X=!1)},ne={p:b,um:Ue,m:xe,r:ee,mt:P,mc:L,pc:ie,pbc:_,n:x,o:e};return{render:J,hydrate:void 0,createApp:Ku(J)}}function Oi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function dn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function sd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function xl(e,t,n=!1){const s=e.children,i=t.children;if(le(s)&&le(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=tn(i[r]),a.el=o.el),!n&&a.patchFlag!==-2&&xl(o,a)),a.type===ai&&(a.el=o.el),a.type===an&&!a.el&&(a.el=o.el)}}function id(e){const t=e.slice(),n=[0];let s,i,r,o,a;const l=e.length;for(s=0;s<l;s++){const u=e[s];if(u!==0){if(i=n[n.length-1],e[i]<u){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<u?r=a+1:o=a;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function El(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:El(t)}function wo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const rd=Symbol.for("v-scx"),od=()=>gt(rd);function _n(e,t){return Wr(e,null,t)}function Be(e,t,n){return Wr(e,t,n)}function Wr(e,t,n=Se){const{immediate:s,deep:i,flush:r,once:o}=n,a=Ye({},n),l=t&&s||!t&&r!=="post";let u;if(ds){if(r==="sync"){const h=od();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=At,h.resume=At,h.pause=At,h}}const c=Ge;a.call=(h,y,b)=>Tt(h,c,y,b);let f=!1;r==="post"?a.scheduler=h=>{at(h,c&&c.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(h,y)=>{y?h():Dr(h)}),a.augmentJob=h=>{t&&(h.flags|=4),f&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const p=ku(e,t,a);return ds&&(u?u.push(p):l&&p()),p}function ad(e,t,n){const s=this.proxy,i=De(e)?e.includes(".")?Al(s,e):()=>s[e]:e.bind(s,s);let r;de(t)?r=t:(r=t.handler,n=t);const o=ys(this),a=Wr(i,r.bind(s),n);return o(),a}function Al(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const ld=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${rn(t)}Modifiers`]||e[`${wn(t)}Modifiers`];function cd(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Se;let i=n;const r=t.startsWith("update:"),o=r&&ld(s,t.slice(7));o&&(o.trim&&(i=n.map(c=>De(c)?c.trim():c)),o.number&&(i=n.map(Ns)));let a,l=s[a=_i(t)]||s[a=_i(rn(t))];!l&&r&&(l=s[a=_i(wn(t))]),l&&Tt(l,e,6,i);const u=s[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Tt(u,e,6,i)}}function Rl(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!de(e)){const l=u=>{const c=Rl(u,t,!0);c&&(a=!0,Ye(o,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Ie(e)&&s.set(e,null),null):(le(r)?r.forEach(l=>o[l]=null):Ye(o,r),Ie(e)&&s.set(e,o),o)}function oi(e,t){return!e||!Xs(t)?!1:(t=t.slice(2).replace(/Once$/,""),be(e,t[0].toLowerCase()+t.slice(1))||be(e,wn(t))||be(e,t))}function ko(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:f,data:p,setupState:h,ctx:y,inheritAttrs:b}=e,$=Hs(e);let M,T;try{if(n.shapeFlag&4){const O=i||s,I=O;M=Et(u.call(I,O,c,f,h,p,y)),T=a}else{const O=t;M=Et(O.length>1?O(f,{attrs:a,slots:o,emit:l}):O(f,null)),T=t.props?a:ud(a)}}catch(O){ts.length=0,si(O,e,1),M=Ce(an)}let A=M;if(T&&b!==!1){const O=Object.keys(T),{shapeFlag:I}=A;O.length&&I&7&&(r&&O.some(Sr)&&(T=dd(T,r)),A=Rn(A,T,!1,!0))}return n.dirs&&(A=Rn(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Ur(A,n.transition),M=A,Hs($),M}const ud=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xs(n))&&((t||(t={}))[n]=e[n]);return t},dd=(e,t)=>{const n={};for(const s in e)(!Sr(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function fd(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:l}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?So(s,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const p=c[f];if(o[p]!==s[p]&&!oi(u,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?So(s,o,u):!0:!!o;return!1}function So(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!oi(n,r))return!0}return!1}function pd({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ml=e=>e.__isSuspense;function hd(e,t){t&&t.pendingBranch?le(e)?t.effects.push(...e):t.effects.push(e):Ou(e)}const ge=Symbol.for("v-fgt"),ai=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),$i=Symbol.for("v-stc"),ts=[];let dt=null;function D(e=!1){ts.push(dt=e?null:[])}function vd(){ts.pop(),dt=ts[ts.length-1]||null}let us=1;function Io(e,t=!1){us+=e,e<0&&dt&&t&&(dt.hasOnce=!0)}function Tl(e){return e.dynamicChildren=us>0?dt||xn:null,vd(),us>0&&dt&&dt.push(e),e}function W(e,t,n,s,i,r){return Tl(d(e,t,n,s,i,r,!0))}function xt(e,t,n,s,i){return Tl(Ce(e,t,n,s,i,!0))}function zs(e){return e?e.__v_isVNode===!0:!1}function Hn(e,t){return e.type===t.type&&e.key===t.key}const jl=({key:e})=>e??null,Ms=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?De(e)||Re(e)||de(e)?{i:ut,r:e,k:t,f:!!n}:e:null);function d(e,t=null,n=null,s=0,i=null,r=e===ge?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&jl(t),ref:t&&Ms(t),scopeId:hl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ut};return a?(qr(l,n),r&128&&e.normalize(l)):n&&(l.shapeFlag|=De(n)?8:16),us>0&&!o&&dt&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&dt.push(l),l}const Ce=gd;function gd(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Nu)&&(e=an),zs(e)){const a=Rn(e,t,!0);return n&&qr(a,n),us>0&&!r&&dt&&(a.shapeFlag&6?dt[dt.indexOf(e)]=a:dt.push(a)),a.patchFlag=-2,a}if($d(e)&&(e=e.__vccOpts),t){t=md(t);let{class:a,style:l}=t;a&&!De(a)&&(t.class=bt(a)),Ie(l)&&(Tr(l)&&!le(l)&&(l=Ye({},l)),t.style=ti(l))}const o=De(e)?1:Ml(e)?128:Cu(e)?64:Ie(e)?4:de(e)?2:0;return d(e,t,n,s,i,o,r,!0)}function md(e){return e?Tr(e)||Sl(e)?Ye({},e):e:null}function Rn(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=e,u=t?yd(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&jl(u),ref:t&&t.ref?n&&r?le(r)?r.concat(Ms(t)):[r,Ms(t)]:Ms(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ge?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rn(e.ssContent),ssFallback:e.ssFallback&&Rn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&Ur(c,l.clone(c)),c}function Te(e=" ",t=0){return Ce(ai,null,e,t)}function pe(e="",t=!1){return t?(D(),xt(an,null,e)):Ce(an,null,e)}function Et(e){return e==null||typeof e=="boolean"?Ce(an):le(e)?Ce(ge,null,e.slice()):zs(e)?tn(e):Ce(ai,null,String(e))}function tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Rn(e)}function qr(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(le(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),qr(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Sl(t)?t._ctx=ut:i===3&&ut&&(ut.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else de(t)?(t={default:t,_ctx:ut},n=32):(t=String(t),s&64?(n=16,t=[Te(t)]):n=8);e.children=t,e.shapeFlag|=n}function yd(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=bt([t.class,s.class]));else if(i==="style")t.style=ti([t.style,s.style]);else if(Xs(i)){const r=t[i],o=s[i];o&&r!==o&&!(le(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function Ct(e,t,n,s=null){Tt(e,t,7,[n,s])}const _d=bl();let bd=0;function wd(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||_d,r={uid:bd++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ol(s,i),emitsOptions:Rl(s,i),emit:null,emitted:null,propsDefaults:Se,inheritAttrs:s.inheritAttrs,ctx:Se,data:Se,props:Se,attrs:Se,slots:Se,refs:Se,setupState:Se,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=cd.bind(null,r),e.ce&&e.ce(r),r}let Ge=null,Ks,Qi;{const e=ei(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Ks=t("__VUE_INSTANCE_SETTERS__",n=>Ge=n),Qi=t("__VUE_SSR_SETTERS__",n=>ds=n)}const ys=e=>{const t=Ge;return Ks(e),e.scope.on(),()=>{e.scope.off(),Ks(t)}},Oo=()=>{Ge&&Ge.scope.off(),Ks(null)};function Dl(e){return e.vnode.shapeFlag&4}let ds=!1;function kd(e,t=!1,n=!1){t&&Qi(t);const{props:s,children:i}=e.vnode,r=Dl(e);Ju(e,s,r,t),Zu(e,i,n||t);const o=r?Sd(e,t):void 0;return t&&Qi(!1),o}function Sd(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Fu);const{setup:s}=n;if(s){Kt();const i=e.setupContext=s.length>1?Od(e):null,r=ys(e),o=ms(s,e,0,[e.props,i]),a=ja(o);if(Qt(),r(),(a||e.sp)&&!Zn(e)&&vl(e),a){if(o.then(Oo,Oo),t)return o.then(l=>{$o(e,l)}).catch(l=>{si(l,e,0)});e.asyncDep=o}else $o(e,o)}else Ul(e)}function $o(e,t,n){de(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ie(t)&&(e.setupState=ll(t)),Ul(e)}function Ul(e,t,n){const s=e.type;e.render||(e.render=s.render||At);{const i=ys(e);Kt();try{Wu(e)}finally{Qt(),i()}}}const Id={get(e,t){return Je(e,"get",""),e[t]}};function Od(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Id),slots:e.slots,emit:e.emit,expose:t}}function li(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ll(jr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in es)return es[n](e)},has(t,n){return n in t||n in es}})):e.proxy}function $d(e){return de(e)&&"__vccOpts"in e}const te=(e,t)=>bu(e,t,ds);function Ll(e,t,n){const s=arguments.length;return s===2?Ie(t)&&!le(t)?zs(t)?Ce(e,null,[t]):Ce(e,t):Ce(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&zs(n)&&(n=[n]),Ce(e,t,n))}const Cd="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ji;const Co=typeof window<"u"&&window.trustedTypes;if(Co)try{Ji=Co.createPolicy("vue",{createHTML:e=>e})}catch{}const Nl=Ji?e=>Ji.createHTML(e):e=>e,Pd="http://www.w3.org/2000/svg",xd="http://www.w3.org/1998/Math/MathML",Ft=typeof document<"u"?document:null,Po=Ft&&Ft.createElement("template"),Ed={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Ft.createElementNS(Pd,e):t==="mathml"?Ft.createElementNS(xd,e):n?Ft.createElement(e,{is:n}):Ft.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Ft.createTextNode(e),createComment:e=>Ft.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ft.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Po.innerHTML=Nl(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Po.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ad=Symbol("_vtc");function Rd(e,t,n){const s=e[Ad];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xo=Symbol("_vod"),Md=Symbol("_vsh"),Td=Symbol(""),jd=/(^|;)\s*display\s*:/;function Dd(e,t,n){const s=e.style,i=De(n);let r=!1;if(n&&!i){if(t)if(De(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ts(s,a,"")}else for(const o in t)n[o]==null&&Ts(s,o,"");for(const o in n)o==="display"&&(r=!0),Ts(s,o,n[o])}else if(i){if(t!==n){const o=s[Td];o&&(n+=";"+o),s.cssText=n,r=jd.test(n)}}else t&&e.removeAttribute("style");xo in e&&(e[xo]=r?s.display:"",e[Md]&&(s.display="none"))}const Eo=/\s*!important$/;function Ts(e,t,n){if(le(n))n.forEach(s=>Ts(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Ud(e,t);Eo.test(n)?e.setProperty(wn(s),n.replace(Eo,""),"important"):e[s]=n}}const Ao=["Webkit","Moz","ms"],Ci={};function Ud(e,t){const n=Ci[t];if(n)return n;let s=rn(t);if(s!=="filter"&&s in e)return Ci[t]=s;s=La(s);for(let i=0;i<Ao.length;i++){const r=Ao[i]+s;if(r in e)return Ci[t]=r}return t}const Ro="http://www.w3.org/1999/xlink";function Mo(e,t,n,s,i,r=zc(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ro,t.slice(6,t.length)):e.setAttributeNS(Ro,t,n):n==null||r&&!Na(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Mt(n)?String(n):n)}function To(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Nl(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Na(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Vt(e,t,n,s){e.addEventListener(t,n,s)}function Ld(e,t,n,s){e.removeEventListener(t,n,s)}const jo=Symbol("_vei");function Nd(e,t,n,s,i=null){const r=e[jo]||(e[jo]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=Fd(t);if(s){const u=r[t]=Vd(s,i);Vt(e,a,u,l)}else o&&(Ld(e,a,o,l),r[t]=void 0)}}const Do=/(?:Once|Passive|Capture)$/;function Fd(e){let t;if(Do.test(e)){t={};let s;for(;s=e.match(Do);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):wn(e.slice(2)),t]}let Pi=0;const Wd=Promise.resolve(),qd=()=>Pi||(Wd.then(()=>Pi=0),Pi=Date.now());function Vd(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Tt(Hd(s,n.value),t,5,[s])};return n.value=e,n.attached=qd(),n}function Hd(e,t){if(le(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Uo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Bd=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?Rd(e,s,o):t==="style"?Dd(e,n,s):Xs(t)?Sr(t)||Nd(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):zd(e,t,s,o))?(To(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Mo(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!De(s))?To(e,rn(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Mo(e,t,s,o))};function zd(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Uo(t)&&de(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Uo(t)&&De(n)?!1:t in e}const ln=e=>{const t=e.props["onUpdate:modelValue"]||!1;return le(t)?n=>As(t,n):t};function Kd(e){e.target.composing=!0}function Lo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const mt=Symbol("_assign"),Me={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[mt]=ln(i);const r=s||i.props&&i.props.type==="number";Vt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=Ns(a)),e[mt](a)}),n&&Vt(e,"change",()=>{e.value=e.value.trim()}),t||(Vt(e,"compositionstart",Kd),Vt(e,"compositionend",Lo),Vt(e,"change",Lo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[mt]=ln(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ns(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===l)||(e.value=l))}},Qd={deep:!0,created(e,t,n){e[mt]=ln(n),Vt(e,"change",()=>{const s=e._modelValue,i=Mn(e),r=e.checked,o=e[mt];if(le(s)){const a=$r(s,i),l=a!==-1;if(r&&!l)o(s.concat(i));else if(!r&&l){const u=[...s];u.splice(a,1),o(u)}}else if(Nn(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(Fl(e,r))})},mounted:No,beforeUpdate(e,t,n){e[mt]=ln(n),No(e,t,n)}};function No(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(le(t))i=$r(t,s.props.value)>-1;else if(Nn(t))i=t.has(s.props.value);else{if(t===n)return;i=yn(t,Fl(e,!0))}e.checked!==i&&(e.checked=i)}const Jd={created(e,{value:t},n){e.checked=yn(t,n.props.value),e[mt]=ln(n),Vt(e,"change",()=>{e[mt](Mn(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[mt]=ln(s),t!==n&&(e.checked=yn(t,s.props.value))}},cn={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Nn(t);Vt(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Ns(Mn(o)):Mn(o));e[mt](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,ii(()=>{e._assigning=!1})}),e[mt]=ln(s)},mounted(e,{value:t}){Fo(e,t)},beforeUpdate(e,t,n){e[mt]=ln(n)},updated(e,{value:t}){e._assigning||Fo(e,t)}};function Fo(e,t){const n=e.multiple,s=le(t);if(!(n&&!s&&!Nn(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],a=Mn(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=$r(t,a)>-1}else o.selected=t.has(a);else if(yn(Mn(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Mn(e){return"_value"in e?e._value:e.value}function Fl(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Gd=["ctrl","shift","alt","meta"],Yd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Gd.some(n=>e[`${n}Key`]&&!t.includes(n))},lt=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=Yd[t[o]];if(a&&a(i,t))return}return e(i,...r)})},Xd=Ye({patchProp:Bd},Ed);let Wo;function Zd(){return Wo||(Wo=td(Xd))}const ef=(...e)=>{const t=Zd().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=nf(s);if(!i)return;const r=t._component;!de(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,tf(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function tf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function nf(e){return De(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Wl;const ci=e=>Wl=e,ql=Symbol();function Gi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ns;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ns||(ns={}));function sf(){const e=Va(!0),t=e.run(()=>z({}));let n=[],s=[];const i=jr({install(r){ci(i),i._a=r,r.provide(ql,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const Vl=()=>{};function qo(e,t,n,s=Vl){e.push(t);const i=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),s())};return!n&&Cr()&&Ha(i),i}function On(e,...t){e.slice().forEach(n=>{n(...t)})}const rf=e=>e(),Vo=Symbol(),xi=Symbol();function Yi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];Gi(i)&&Gi(s)&&e.hasOwnProperty(n)&&!Re(s)&&!Ht(s)?e[n]=Yi(i,s):e[n]=s}return e}const of=Symbol();function af(e){return!Gi(e)||!Object.prototype.hasOwnProperty.call(e,of)}const{assign:Zt}=Object;function lf(e){return!!(Re(e)&&e.effect)}function cf(e,t,n,s){const{state:i,actions:r,getters:o}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=i?i():{});const c=vu(n.state.value[e]);return Zt(c,r,Object.keys(o||{}).reduce((f,p)=>(f[p]=jr(te(()=>{ci(n);const h=n._s.get(e);return o[p].call(h,h)})),f),{}))}return l=Hl(e,u,t,n,s,!0),l}function Hl(e,t,n={},s,i,r){let o;const a=Zt({actions:{}},n),l={deep:!0};let u,c,f=[],p=[],h;const y=s.state.value[e];!r&&!y&&(s.state.value[e]={}),z({});let b;function $(L){let k;u=c=!1,typeof L=="function"?(L(s.state.value[e]),k={type:ns.patchFunction,storeId:e,events:h}):(Yi(s.state.value[e],L),k={type:ns.patchObject,payload:L,storeId:e,events:h});const _=b=Symbol();ii().then(()=>{b===_&&(u=!0)}),c=!0,On(f,k,s.state.value[e])}const M=r?function(){const{state:k}=n,_=k?k():{};this.$patch(g=>{Zt(g,_)})}:Vl;function T(){o.stop(),f=[],p=[],s._s.delete(e)}const A=(L,k="")=>{if(Vo in L)return L[xi]=k,L;const _=function(){ci(s);const g=Array.from(arguments),w=[],V=[];function P(B){w.push(B)}function R(B){V.push(B)}On(p,{args:g,name:_[xi],store:I,after:P,onError:R});let Z;try{Z=L.apply(this&&this.$id===e?this:I,g)}catch(B){throw On(V,B),B}return Z instanceof Promise?Z.then(B=>(On(w,B),B)).catch(B=>(On(V,B),Promise.reject(B))):(On(w,Z),Z)};return _[Vo]=!0,_[xi]=k,_},O={_p:s,$id:e,$onAction:qo.bind(null,p),$patch:$,$reset:M,$subscribe(L,k={}){const _=qo(f,L,k.detached,()=>g()),g=o.run(()=>Be(()=>s.state.value[e],w=>{(k.flush==="sync"?c:u)&&L({storeId:e,type:ns.direct,events:h},w)},Zt({},l,k)));return _},$dispose:T},I=Fn(O);s._s.set(e,I);const E=(s._a&&s._a.runWithContext||rf)(()=>s._e.run(()=>(o=Va()).run(()=>t({action:A}))));for(const L in E){const k=E[L];if(Re(k)&&!lf(k)||Ht(k))r||(y&&af(k)&&(Re(k)?k.value=y[L]:Yi(k,y[L])),s.state.value[e][L]=k);else if(typeof k=="function"){const _=A(k,L);E[L]=_,a.actions[L]=k}}return Zt(I,E),Zt(me(I),E),Object.defineProperty(I,"$state",{get:()=>s.state.value[e],set:L=>{$(k=>{Zt(k,L)})}}),s._p.forEach(L=>{Zt(I,o.run(()=>L({store:I,app:s._a,pinia:s,options:a})))}),y&&r&&n.hydrate&&n.hydrate(I.$state,y),u=!0,c=!0,I}/*! #__NO_SIDE_EFFECTS__ */function ui(e,t,n){let s;const i=typeof t=="function";s=i?n:t;function r(o,a){const l=Qu();return o=o||(l?gt(ql,null):null),o&&ci(o),o=Wl,o._s.has(e)||(i?Hl(e,t,s,o):cf(e,s,o)),o._s.get(e)}return r.$id=e,r}function Tn(e){const t=me(e),n={};for(const s in t){const i=t[s];i.effect?n[s]=te({get:()=>e[s],set(r){e[s]=r}}):(Re(i)||Ht(i))&&(n[s]=yu(e,s))}return n}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Cn=typeof document<"u";function Bl(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function uf(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Bl(e.default)}const _e=Object.assign;function Ei(e,t){const n={};for(const s in t){const i=t[s];n[s]=kt(i)?i.map(e):e(i)}return n}const ss=()=>{},kt=Array.isArray,zl=/#/g,df=/&/g,ff=/\//g,pf=/=/g,hf=/\?/g,Kl=/\+/g,vf=/%5B/g,gf=/%5D/g,Ql=/%5E/g,mf=/%60/g,Jl=/%7B/g,yf=/%7C/g,Gl=/%7D/g,_f=/%20/g;function Vr(e){return encodeURI(""+e).replace(yf,"|").replace(vf,"[").replace(gf,"]")}function bf(e){return Vr(e).replace(Jl,"{").replace(Gl,"}").replace(Ql,"^")}function Xi(e){return Vr(e).replace(Kl,"%2B").replace(_f,"+").replace(zl,"%23").replace(df,"%26").replace(mf,"`").replace(Jl,"{").replace(Gl,"}").replace(Ql,"^")}function wf(e){return Xi(e).replace(pf,"%3D")}function kf(e){return Vr(e).replace(zl,"%23").replace(hf,"%3F")}function Sf(e){return e==null?"":kf(e).replace(ff,"%2F")}function fs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const If=/\/$/,Of=e=>e.replace(If,"");function Ai(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=t.slice(0,l),r=t.slice(l+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=xf(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:fs(o)}}function $f(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ho(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Cf(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&jn(t.matched[s],n.matched[i])&&Yl(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function jn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Yl(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Pf(e[n],t[n]))return!1;return!0}function Pf(e,t){return kt(e)?Bo(e,t):kt(t)?Bo(t,e):e===t}function Bo(e,t){return kt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function xf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Xt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ps;(function(e){e.pop="pop",e.push="push"})(ps||(ps={}));var is;(function(e){e.back="back",e.forward="forward",e.unknown=""})(is||(is={}));function Ef(e){if(!e)if(Cn){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Of(e)}const Af=/^[^#]+#/;function Rf(e,t){return e.replace(Af,"#")+t}function Mf(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const di=()=>({left:window.scrollX,top:window.scrollY});function Tf(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Mf(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function zo(e,t){return(history.state?history.state.position-t:-1)+e}const Zi=new Map;function jf(e,t){Zi.set(e,t)}function Df(e){const t=Zi.get(e);return Zi.delete(e),t}let Uf=()=>location.protocol+"//"+location.host;function Xl(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),Ho(l,"")}return Ho(n,e)+s+i}function Lf(e,t,n,s){let i=[],r=[],o=null;const a=({state:p})=>{const h=Xl(e,location),y=n.value,b=t.value;let $=0;if(p){if(n.value=h,t.value=p,o&&o===y){o=null;return}$=b?p.position-b.position:0}else s(h);i.forEach(M=>{M(n.value,y,{delta:$,type:ps.pop,direction:$?$>0?is.forward:is.back:is.unknown})})};function l(){o=n.value}function u(p){i.push(p);const h=()=>{const y=i.indexOf(p);y>-1&&i.splice(y,1)};return r.push(h),h}function c(){const{history:p}=window;p.state&&p.replaceState(_e({},p.state,{scroll:di()}),"")}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:f}}function Ko(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?di():null}}function Nf(e){const{history:t,location:n}=window,s={value:Xl(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(l,u,c){const f=e.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?e:e.slice(f))+l:Uf()+e+l;try{t[c?"replaceState":"pushState"](u,"",p),i.value=u}catch(h){console.error(h),n[c?"replace":"assign"](p)}}function o(l,u){const c=_e({},t.state,Ko(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});r(l,c,!0),s.value=l}function a(l,u){const c=_e({},i.value,t.state,{forward:l,scroll:di()});r(c.current,c,!0);const f=_e({},Ko(s.value,l,null),{position:c.position+1},u);r(l,f,!1),s.value=l}return{location:s,state:i,push:a,replace:o}}function Ff(e){e=Ef(e);const t=Nf(e),n=Lf(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=_e({location:"",base:e,go:s,createHref:Rf.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Wf(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Ff(e)}function qf(e){return typeof e=="string"||e&&typeof e=="object"}function Zl(e){return typeof e=="string"||typeof e=="symbol"}const ec=Symbol("");var Qo;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Qo||(Qo={}));function Dn(e,t){return _e(new Error,{type:e,[ec]:!0},t)}function Lt(e,t){return e instanceof Error&&ec in e&&(t==null||!!(e.type&t))}const Jo="[^/]+?",Vf={sensitive:!1,strict:!1,start:!0,end:!0},Hf=/[.+*?^${}()[\]/\\]/g;function Bf(e,t){const n=_e({},Vf,t),s=[];let i=n.start?"^":"";const r=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const p=u[f];let h=40+(n.sensitive?.25:0);if(p.type===0)f||(i+="/"),i+=p.value.replace(Hf,"\\$&"),h+=40;else if(p.type===1){const{value:y,repeatable:b,optional:$,regexp:M}=p;r.push({name:y,repeatable:b,optional:$});const T=M||Jo;if(T!==Jo){h+=10;try{new RegExp(`(${T})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${y}" (${T}): `+O.message)}}let A=b?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;f||(A=$&&u.length<2?`(?:/${A})`:"/"+A),$&&(A+="?"),i+=A,h+=20,$&&(h+=-8),b&&(h+=-20),T===".*"&&(h+=-50)}c.push(h)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),f={};if(!c)return null;for(let p=1;p<c.length;p++){const h=c[p]||"",y=r[p-1];f[y.name]=h&&y.repeatable?h.split("/"):h}return f}function l(u){let c="",f=!1;for(const p of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const h of p)if(h.type===0)c+=h.value;else if(h.type===1){const{value:y,repeatable:b,optional:$}=h,M=y in u?u[y]:"";if(kt(M)&&!b)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const T=kt(M)?M.join("/"):M;if(!T)if($)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${y}"`);c+=T}}return c||"/"}return{re:o,score:s,keys:r,parse:a,stringify:l}}function zf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function tc(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=zf(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Go(s))return 1;if(Go(i))return-1}return i.length-s.length}function Go(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Kf={type:0,value:""},Qf=/[a-zA-Z0-9_]/;function Jf(e){if(!e)return[[]];if(e==="/")return[[Kf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,u="",c="";function f(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(u&&f(),o()):l===":"?(f(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:Qf.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),o(),i}function Gf(e,t,n){const s=Bf(Jf(e.path),n),i=_e(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Yf(e,t){const n=[],s=new Map;t=ea({strict:!1,end:!0,sensitive:!1},t);function i(f){return s.get(f)}function r(f,p,h){const y=!h,b=Xo(f);b.aliasOf=h&&h.record;const $=ea(t,f),M=[b];if("alias"in f){const O=typeof f.alias=="string"?[f.alias]:f.alias;for(const I of O)M.push(Xo(_e({},b,{components:h?h.record.components:b.components,path:I,aliasOf:h?h.record:b})))}let T,A;for(const O of M){const{path:I}=O;if(p&&I[0]!=="/"){const C=p.record.path,E=C[C.length-1]==="/"?"":"/";O.path=p.record.path+(I&&E+I)}if(T=Gf(O,p,$),h?h.alias.push(T):(A=A||T,A!==T&&A.alias.push(T),y&&f.name&&!Zo(T)&&o(f.name)),nc(T)&&l(T),b.children){const C=b.children;for(let E=0;E<C.length;E++)r(C[E],T,h&&h.children[E])}h=h||T}return A?()=>{o(A)}:ss}function o(f){if(Zl(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=ep(f,n);n.splice(p,0,f),f.record.name&&!Zo(f)&&s.set(f.record.name,f)}function u(f,p){let h,y={},b,$;if("name"in f&&f.name){if(h=s.get(f.name),!h)throw Dn(1,{location:f});$=h.record.name,y=_e(Yo(p.params,h.keys.filter(A=>!A.optional).concat(h.parent?h.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),f.params&&Yo(f.params,h.keys.map(A=>A.name))),b=h.stringify(y)}else if(f.path!=null)b=f.path,h=n.find(A=>A.re.test(b)),h&&(y=h.parse(b),$=h.record.name);else{if(h=p.name?s.get(p.name):n.find(A=>A.re.test(p.path)),!h)throw Dn(1,{location:f,currentLocation:p});$=h.record.name,y=_e({},p.params,f.params),b=h.stringify(y)}const M=[];let T=h;for(;T;)M.unshift(T.record),T=T.parent;return{name:$,path:b,params:y,matched:M,meta:Zf(M)}}e.forEach(f=>r(f));function c(){n.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:a,getRecordMatcher:i}}function Yo(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Xo(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Xf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Xf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Zo(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Zf(e){return e.reduce((t,n)=>_e(t,n.meta),{})}function ea(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function ep(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;tc(e,t[r])<0?s=r:n=r+1}const i=tp(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function tp(e){let t=e;for(;t=t.parent;)if(nc(t)&&tc(e,t)===0)return t}function nc({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function np(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(Kl," "),o=r.indexOf("="),a=fs(o<0?r:r.slice(0,o)),l=o<0?null:fs(r.slice(o+1));if(a in t){let u=t[a];kt(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function ta(e){let t="";for(let n in e){const s=e[n];if(n=wf(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(kt(s)?s.map(r=>r&&Xi(r)):[s&&Xi(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function sp(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=kt(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const ip=Symbol(""),na=Symbol(""),fi=Symbol(""),Hr=Symbol(""),er=Symbol("");function Bn(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function nn(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const u=p=>{p===!1?l(Dn(4,{from:n,to:t})):p instanceof Error?l(p):qf(p)?l(Dn(2,{from:t,to:p})):(o&&s.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),a())},c=r(()=>e.call(s&&s.instances[i],t,n,u));let f=Promise.resolve(c);e.length<3&&(f=f.then(u)),f.catch(p=>l(p))})}function Ri(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let l=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Bl(l)){const c=(l.__vccOpts||l)[t];c&&r.push(nn(c,n,s,o,a,i))}else{let u=l();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=uf(c)?c.default:c;o.mods[a]=c,o.components[a]=f;const h=(f.__vccOpts||f)[t];return h&&nn(h,n,s,o,a,i)()}))}}return r}function sa(e){const t=gt(fi),n=gt(Hr),s=te(()=>{const l=se(e.to);return t.resolve(l)}),i=te(()=>{const{matched:l}=s.value,{length:u}=l,c=l[u-1],f=n.matched;if(!c||!f.length)return-1;const p=f.findIndex(jn.bind(null,c));if(p>-1)return p;const h=ia(l[u-2]);return u>1&&ia(c)===h&&f[f.length-1].path!==h?f.findIndex(jn.bind(null,l[u-2])):p}),r=te(()=>i.value>-1&&lp(n.params,s.value.params)),o=te(()=>i.value>-1&&i.value===n.matched.length-1&&Yl(n.params,s.value.params));function a(l={}){if(ap(l)){const u=t[se(e.replace)?"replace":"push"](se(e.to)).catch(ss);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:te(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function rp(e){return e.length===1?e[0]:e}const op=Fe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:sa,setup(e,{slots:t}){const n=Fn(sa(e)),{options:s}=gt(fi),i=te(()=>({[ra(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[ra(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&rp(t.default(n));return e.custom?r:Ll("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),tr=op;function ap(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function lp(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!kt(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function ia(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const ra=(e,t,n)=>e??t??n,cp=Fe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=gt(er),i=te(()=>e.route||s.value),r=gt(na,0),o=te(()=>{let u=se(r);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),a=te(()=>i.value.matched[o.value]);Rs(na,te(()=>o.value+1)),Rs(ip,a),Rs(er,i);const l=z();return Be(()=>[l.value,a.value,e.name],([u,c,f],[p,h,y])=>{c&&(c.instances[f]=u,h&&h!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!jn(c,h)||!p)&&(c.enterCallbacks[f]||[]).forEach(b=>b(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=a.value,p=f&&f.components[c];if(!p)return oa(n.default,{Component:p,route:u});const h=f.props[c],y=h?h===!0?u.params:typeof h=="function"?h(u):h:null,$=Ll(p,_e({},y,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return oa(n.default,{Component:$,route:u})||$}}});function oa(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const sc=cp;function up(e){const t=Yf(e.routes,e),n=e.parseQuery||np,s=e.stringifyQuery||ta,i=e.history,r=Bn(),o=Bn(),a=Bn(),l=Bt(Xt);let u=Xt;Cn&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Ei.bind(null,x=>""+x),f=Ei.bind(null,Sf),p=Ei.bind(null,fs);function h(x,X){let J,ne;return Zl(x)?(J=t.getRecordMatcher(x),ne=X):ne=x,t.addRoute(ne,J)}function y(x){const X=t.getRecordMatcher(x);X&&t.removeRoute(X)}function b(){return t.getRoutes().map(x=>x.record)}function $(x){return!!t.getRecordMatcher(x)}function M(x,X){if(X=_e({},X||l.value),typeof x=="string"){const S=Ai(n,x,X.path),j=t.resolve({path:S.path},X),N=i.createHref(S.fullPath);return _e(S,j,{params:p(j.params),hash:fs(S.hash),redirectedFrom:void 0,href:N})}let J;if(x.path!=null)J=_e({},x,{path:Ai(n,x.path,X.path).path});else{const S=_e({},x.params);for(const j in S)S[j]==null&&delete S[j];J=_e({},x,{params:f(S)}),X.params=f(X.params)}const ne=t.resolve(J,X),ke=x.hash||"";ne.params=c(p(ne.params));const v=$f(s,_e({},x,{hash:bf(ke),path:ne.path})),m=i.createHref(v);return _e({fullPath:v,hash:ke,query:s===ta?sp(x.query):x.query||{}},ne,{redirectedFrom:void 0,href:m})}function T(x){return typeof x=="string"?Ai(n,x,l.value.path):_e({},x)}function A(x,X){if(u!==x)return Dn(8,{from:X,to:x})}function O(x){return E(x)}function I(x){return O(_e(T(x),{replace:!0}))}function C(x){const X=x.matched[x.matched.length-1];if(X&&X.redirect){const{redirect:J}=X;let ne=typeof J=="function"?J(x):J;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=T(ne):{path:ne},ne.params={}),_e({query:x.query,hash:x.hash,params:ne.path!=null?{}:x.params},ne)}}function E(x,X){const J=u=M(x),ne=l.value,ke=x.state,v=x.force,m=x.replace===!0,S=C(J);if(S)return E(_e(T(S),{state:typeof S=="object"?_e({},ke,S.state):ke,force:v,replace:m}),X||J);const j=J;j.redirectedFrom=X;let N;return!v&&Cf(s,ne,J)&&(N=Dn(16,{to:j,from:ne}),xe(ne,ne,!0,!1)),(N?Promise.resolve(N):_(j,ne)).catch(U=>Lt(U)?Lt(U,2)?U:ce(U):ie(U,j,ne)).then(U=>{if(U){if(Lt(U,2))return E(_e({replace:m},T(U.to),{state:typeof U.to=="object"?_e({},ke,U.to.state):ke,force:v}),X||j)}else U=w(j,ne,!0,m,ke);return g(j,ne,U),U})}function L(x,X){const J=A(x,X);return J?Promise.reject(J):Promise.resolve()}function k(x){const X=F.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(x):x()}function _(x,X){let J;const[ne,ke,v]=dp(x,X);J=Ri(ne.reverse(),"beforeRouteLeave",x,X);for(const S of ne)S.leaveGuards.forEach(j=>{J.push(nn(j,x,X))});const m=L.bind(null,x,X);return J.push(m),qe(J).then(()=>{J=[];for(const S of r.list())J.push(nn(S,x,X));return J.push(m),qe(J)}).then(()=>{J=Ri(ke,"beforeRouteUpdate",x,X);for(const S of ke)S.updateGuards.forEach(j=>{J.push(nn(j,x,X))});return J.push(m),qe(J)}).then(()=>{J=[];for(const S of v)if(S.beforeEnter)if(kt(S.beforeEnter))for(const j of S.beforeEnter)J.push(nn(j,x,X));else J.push(nn(S.beforeEnter,x,X));return J.push(m),qe(J)}).then(()=>(x.matched.forEach(S=>S.enterCallbacks={}),J=Ri(v,"beforeRouteEnter",x,X,k),J.push(m),qe(J))).then(()=>{J=[];for(const S of o.list())J.push(nn(S,x,X));return J.push(m),qe(J)}).catch(S=>Lt(S,8)?S:Promise.reject(S))}function g(x,X,J){a.list().forEach(ne=>k(()=>ne(x,X,J)))}function w(x,X,J,ne,ke){const v=A(x,X);if(v)return v;const m=X===Xt,S=Cn?history.state:{};J&&(ne||m?i.replace(x.fullPath,_e({scroll:m&&S&&S.scroll},ke)):i.push(x.fullPath,ke)),l.value=x,xe(x,X,J,m),ce()}let V;function P(){V||(V=i.listen((x,X,J)=>{if(!Dt.listening)return;const ne=M(x),ke=C(ne);if(ke){E(_e(ke,{replace:!0,force:!0}),ne).catch(ss);return}u=ne;const v=l.value;Cn&&jf(zo(v.fullPath,J.delta),di()),_(ne,v).catch(m=>Lt(m,12)?m:Lt(m,2)?(E(_e(T(m.to),{force:!0}),ne).then(S=>{Lt(S,20)&&!J.delta&&J.type===ps.pop&&i.go(-1,!1)}).catch(ss),Promise.reject()):(J.delta&&i.go(-J.delta,!1),ie(m,ne,v))).then(m=>{m=m||w(ne,v,!1),m&&(J.delta&&!Lt(m,8)?i.go(-J.delta,!1):J.type===ps.pop&&Lt(m,20)&&i.go(-1,!1)),g(ne,v,m)}).catch(ss)}))}let R=Bn(),Z=Bn(),B;function ie(x,X,J){ce(x);const ne=Z.list();return ne.length?ne.forEach(ke=>ke(x,X,J)):console.error(x),Promise.reject(x)}function Pe(){return B&&l.value!==Xt?Promise.resolve():new Promise((x,X)=>{R.add([x,X])})}function ce(x){return B||(B=!x,P(),R.list().forEach(([X,J])=>x?J(x):X()),R.reset()),x}function xe(x,X,J,ne){const{scrollBehavior:ke}=e;if(!Cn||!ke)return Promise.resolve();const v=!J&&Df(zo(x.fullPath,0))||(ne||!J)&&history.state&&history.state.scroll||null;return ii().then(()=>ke(x,X,v)).then(m=>m&&Tf(m)).catch(m=>ie(m,x,X))}const Ue=x=>i.go(x);let ee;const F=new Set,Dt={currentRoute:l,listening:!0,addRoute:h,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:$,getRoutes:b,resolve:M,options:e,push:O,replace:I,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:Z.add,isReady:Pe,install(x){const X=this;x.component("RouterLink",tr),x.component("RouterView",sc),x.config.globalProperties.$router=X,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>se(l)}),Cn&&!ee&&l.value===Xt&&(ee=!0,O(i.location).catch(ke=>{}));const J={};for(const ke in Xt)Object.defineProperty(J,ke,{get:()=>l.value[ke],enumerable:!0});x.provide(fi,X),x.provide(Hr,rl(J)),x.provide(er,l);const ne=x.unmount;F.add(x),x.unmount=function(){F.delete(x),F.size<1&&(u=Xt,V&&V(),V=null,l.value=Xt,ee=!1,B=!1),ne()}}};function qe(x){return x.reduce((X,J)=>X.then(()=>k(J)),Promise.resolve())}return Dt}function dp(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(u=>jn(u,a))?s.push(a):n.push(a));const l=e.matched[o];l&&(t.matched.find(u=>jn(u,l))||i.push(l))}return[n,s,i]}function fp(){return gt(fi)}function pp(e){return gt(Hr)}function it(e){if(typeof e=="number")return(Math.abs(e*2654435761)>>>0).toString(16);if(typeof e=="boolean")return e?"1":"0";if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string"){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t=t>>>0;return t.toString(16)}if(Array.isArray(e)){let t=2166136261;for(let n=0;n<e.length;n++){t^=(n+1)*2654435761;const s=it(e[n]);for(let i=0;i<s.length;i++)t^=s.charCodeAt(i),t*=16777619,t=t>>>0}return t.toString(16)}if(typeof e=="object"){let t=2166136261;const n=Object.keys(e).sort();for(let s=0;s<n.length;s++){const i=n[s],r=it(i);t^=parseInt(r,16),t*=16777619,t=t>>>0;const o=it(e[i]);t^=parseInt(o,16),t*=16777619,t=t>>>0}return t.toString(16)}return it(String(e))}const je={Remove:"remove",Replace:"replace",Add:"add"},ic=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),hp=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),js=Symbol.iterator,ht={mutable:"mutable",immutable:"immutable"},Br={};function rs(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aa(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){const s=Reflect.getOwnPropertyDescriptor(n,t);if(s)return s;n=Reflect.getPrototypeOf(n)}}}function zr(e){return Object.getPrototypeOf(e)===Set.prototype}function Kr(e){return Object.getPrototypeOf(e)===Map.prototype}function ct(e){var t;return(t=e.copy)!==null&&t!==void 0?t:e.original}function bn(e){return!!he(e)}function he(e){return typeof e!="object"?null:e==null?void 0:e[ic]}function Qr(e){var t;const n=he(e);return n?(t=n.copy)!==null&&t!==void 0?t:n.original:e}function St(e,t){if(!e||typeof e!="object")return!1;let n;return Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!(t!=null&&t.mark)&&((n=t.mark(e,ht))===ht.immutable||typeof n=="function")}function rc(e,t=[]){if(Object.hasOwnProperty.call(e,"key")){const n=e.parent.copy,s=he(Jt(n,e.key));if(s!==null&&(s==null?void 0:s.original)!==e.original)return null;const i=e.parent.type===3,r=i?Array.from(e.parent.setMap.keys()).indexOf(e.key):e.key;if(!(i&&n.size>r||rs(n,r)))return null;t.push(r)}if(e.parent)return rc(e.parent,t);t.reverse();try{vp(e.copy,t)}catch{return null}return t}function kn(e){return Array.isArray(e)?1:e instanceof Map?2:e instanceof Set?3:0}function Jt(e,t){return kn(e)===2?e.get(t):e[t]}function _s(e,t,n){kn(e)===2?e.set(t,n):e[t]=n}function Mi(e,t){const n=he(e);return(n?ct(n):e)[t]}function zt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function nr(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function hn(e,t){return t?e:[""].concat(e).map(n=>{const s=`${n}`;return s.indexOf("/")===-1&&s.indexOf("~")===-1?s:s.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function vp(e,t){for(let n=0;n<t.length-1;n+=1){const s=t[n];if(e=Jt(kn(e)===3?Array.from(e):e,s),typeof e!="object")throw new Error(`Cannot resolve patch at '${t.join("/")}'.`)}return e}function gp(e){const t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let s=Reflect.getOwnPropertyDescriptor(e,n);if(s.enumerable&&s.configurable&&s.writable){t[n]=e[n];return}s.writable||(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(s={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[n]}),Reflect.defineProperty(t,n,s)}),t}const mp=Object.prototype.propertyIsEnumerable;function oc(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set){if(!zr(e)){const s=Object.getPrototypeOf(e).constructor;return new s(e.values())}return Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values())}else if(e instanceof Map){if(!Kr(e)){const s=Object.getPrototypeOf(e).constructor;return new s(e)}return new Map(e)}else if(t!=null&&t.mark&&(n=t.mark(e,ht),n!==void 0)&&n!==ht.mutable){if(n===ht.immutable)return gp(e);if(typeof n=="function"){if(t.enablePatches||t.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return n()}throw new Error(`Unsupported mark result: ${n}`)}else if(typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype){const s={};return Object.keys(e).forEach(i=>{s[i]=e[i]}),Object.getOwnPropertySymbols(e).forEach(i=>{mp.call(e,i)&&(s[i]=e[i])}),s}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function et(e){e.copy||(e.copy=oc(e.original,e.options))}function Kn(e){if(!St(e))return Qr(e);if(Array.isArray(e))return e.map(Kn);if(e instanceof Map){const n=Array.from(e.entries()).map(([s,i])=>[s,Kn(i)]);if(!Kr(e)){const s=Object.getPrototypeOf(e).constructor;return new s(n)}return new Map(n)}if(e instanceof Set){const n=Array.from(e).map(Kn);if(!zr(e)){const s=Object.getPrototypeOf(e).constructor;return new s(n)}return new Set(n)}const t=Object.create(Object.getPrototypeOf(e));for(const n in e)t[n]=Kn(e[n]);return t}function Ds(e){return bn(e)?Kn(e):e}function Rt(e){var t;e.assignedMap=(t=e.assignedMap)!==null&&t!==void 0?t:new Map,e.operated||(e.operated=!0,e.parent&&Rt(e.parent))}function la(){throw new Error("Cannot modify frozen object")}function Pn(e,t,n,s,i){{n=n??new WeakMap,s=s??[],i=i??[];const o=n.has(e)?n.get(e):e;if(s.length>0){const a=s.indexOf(o);if(o&&typeof o=="object"&&a!==-1)throw s[0]===o?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${i.slice(0,a).map((l,u)=>{if(typeof l=="symbol")return`[${l.toString()}]`;const c=s[u];return typeof l=="object"&&(c instanceof Map||c instanceof Set)?Array.from(c.keys()).indexOf(l):l}).join("/")}`);s.push(o),i.push(t)}else s.push(o)}if(Object.isFrozen(e)||bn(e)){s.pop(),i.pop();return}switch(kn(e)){case 2:for(const[a,l]of e)Pn(a,a,n,s,i),Pn(l,a,n,s,i);e.set=e.clear=e.delete=la;break;case 3:for(const a of e)Pn(a,a,n,s,i);e.add=e.clear=e.delete=la;break;case 1:Object.freeze(e);let o=0;for(const a of e)Pn(a,o,n,s,i),o+=1;break;default:Object.freeze(e),Object.keys(e).forEach(a=>{const l=e[a];Pn(l,a,n,s,i)})}s.pop(),i.pop()}function Jr(e,t){const n=kn(e);if(n===0)Reflect.ownKeys(e).forEach(s=>{t(s,e[s],e)});else if(n===1){let s=0;for(const i of e)t(s,i,e),s+=1}else e.forEach((s,i)=>t(i,s,e))}function ac(e,t,n){if(bn(e)||!St(e,n)||t.has(e)||Object.isFrozen(e))return;const s=e instanceof Set,i=s?new Map:void 0;if(t.add(e),Jr(e,(r,o)=>{var a;if(bn(o)){const l=he(o);et(l);const u=!((a=l.assignedMap)===null||a===void 0)&&a.size||l.operated?l.copy:l.original;_s(s?i:e,r,u)}else ac(o,t,n)}),i){const r=e,o=Array.from(r);r.clear(),o.forEach(a=>{r.add(i.has(a)?i.get(a):a)})}}function yp(e,t){const n=e.type===3?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&ac(Jt(n,t),e.finalities.handledSet,e.options)}function sr(e){e.type===3&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(Qr(t))}))}function ir(e,t,n,s){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&s){const r=rc(e);r&&t(e,r,n,s)}e.finalized=!0}}function Gr(e,t,n,s){const i=he(n);i&&(i.callbacks||(i.callbacks=[]),i.callbacks.push((r,o)=>{var a;const l=e.type===3?e.setMap:e.copy;if(zt(Jt(l,t),n)){let u=i.original;i.copy&&(u=i.copy),sr(e),ir(e,s,r,o),e.options.enableAutoFreeze&&(e.options.updatedValues=(a=e.options.updatedValues)!==null&&a!==void 0?a:new WeakMap,e.options.updatedValues.set(u,i.original)),_s(l,t,u)}}),e.options.enableAutoFreeze&&i.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),St(n,e.options)&&e.finalities.draft.push(()=>{const r=e.type===3?e.setMap:e.copy;zt(Jt(r,t),n)&&yp(e,t)})}function _p(e,t,n,s,i){let{original:r,assignedMap:o,options:a}=e,l=e.copy;l.length<r.length&&([r,l]=[l,r],[n,s]=[s,n]);for(let u=0;u<r.length;u+=1)if(o.get(u.toString())&&l[u]!==r[u]){const c=t.concat([u]),f=hn(c,i);n.push({op:je.Replace,path:f,value:Ds(l[u])}),s.push({op:je.Replace,path:f,value:Ds(r[u])})}for(let u=r.length;u<l.length;u+=1){const c=t.concat([u]),f=hn(c,i);n.push({op:je.Add,path:f,value:Ds(l[u])})}if(r.length<l.length){const{arrayLengthAssignment:u=!0}=a.enablePatches;if(u){const c=t.concat(["length"]),f=hn(c,i);s.push({op:je.Replace,path:f,value:r.length})}else for(let c=l.length;r.length<c;c-=1){const f=t.concat([c-1]),p=hn(f,i);s.push({op:je.Remove,path:p})}}}function bp({original:e,copy:t,assignedMap:n},s,i,r,o){n.forEach((a,l)=>{const u=Jt(e,l),c=Ds(Jt(t,l)),f=a?rs(e,l)?je.Replace:je.Add:je.Remove;if(zt(u,c)&&f===je.Replace)return;const p=s.concat(l),h=hn(p,o);i.push(f===je.Remove?{op:f,path:h}:{op:f,path:h,value:c}),r.push(f===je.Add?{op:je.Remove,path:h}:f===je.Remove?{op:je.Add,path:h,value:u}:{op:je.Replace,path:h,value:u})})}function wp({original:e,copy:t},n,s,i,r){let o=0;e.forEach(a=>{if(!t.has(a)){const l=n.concat([o]),u=hn(l,r);s.push({op:je.Remove,path:u,value:a}),i.unshift({op:je.Add,path:u,value:a})}o+=1}),o=0,t.forEach(a=>{if(!e.has(a)){const l=n.concat([o]),u=hn(l,r);s.push({op:je.Add,path:u,value:a}),i.unshift({op:je.Remove,path:u,value:a})}o+=1})}function hs(e,t,n,s){const{pathAsArray:i=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return bp(e,t,n,s,i);case 1:return _p(e,t,n,s,i);case 3:return wp(e,t,n,s,i)}}const Qs=(e,t,n=!1)=>{if(typeof e=="object"&&e!==null&&(!St(e,t)||n))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},rr={get size(){return ct(he(this)).size},has(e){return ct(he(this)).has(e)},set(e,t){const n=he(this),s=ct(n);return(!s.has(e)||!zt(s.get(e),t))&&(et(n),Rt(n),n.assignedMap.set(e,!0),n.copy.set(e,t),Gr(n,e,t,hs)),this},delete(e){if(!this.has(e))return!1;const t=he(this);return et(t),Rt(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){const e=he(this);if(this.size){et(e),Rt(e),e.assignedMap=new Map;for(const[t]of e.original)e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){const n=he(this);ct(n).forEach((s,i)=>{e.call(t,this.get(i),i,this)})},get(e){var t,n;const s=he(this),i=ct(s).get(e),r=((n=(t=s.options).mark)===null||n===void 0?void 0:n.call(t,i,ht))===ht.mutable;if(s.options.strict&&Qs(i,s.options,r),r||s.finalized||!St(i,s.options)||i!==s.original.get(e))return i;const o=Br.createDraft({original:i,parentDraft:s,key:e,finalities:s.finalities,options:s.options});return et(s),s.copy.set(e,o),o},keys(){return ct(he(this)).keys()},values(){const e=this.keys();return{[js]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){const e=this.keys();return{[js]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[js](){return this.entries()}},kp=Reflect.ownKeys(rr),ca=(e,t,{isValuesIterator:n})=>()=>{var s,i;const r=t.next();if(r.done)return r;const o=r.value;let a=e.setMap.get(o);const l=he(a),u=((i=(s=e.options).mark)===null||i===void 0?void 0:i.call(s,a,ht))===ht.mutable;if(e.options.strict&&Qs(o,e.options,u),!u&&!l&&St(o,e.options)&&!e.finalized&&e.original.has(o)){const c=Br.createDraft({original:o,parentDraft:e,key:o,finalities:e.finalities,options:e.options});e.setMap.set(o,c),a=c}else l&&(a=l.proxy);return{done:!1,value:n?a:[a,a]}},Js={get size(){return he(this).setMap.size},has(e){const t=he(this);if(t.setMap.has(e))return!0;et(t);const n=he(e);return!!(n&&t.setMap.has(n.original))},add(e){const t=he(this);return this.has(e)||(et(t),Rt(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),Gr(t,e,e,hs)),this},delete(e){if(!this.has(e))return!1;const t=he(this);et(t),Rt(t);const n=he(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;const e=he(this);et(e),Rt(e);for(const t of e.original)e.assignedMap.set(t,!1);e.setMap.clear()},values(){const e=he(this);et(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:ca(e,t,{isValuesIterator:!0})}},entries(){const e=he(this);et(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:ca(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[js](){return this.values()},forEach(e,t){const n=this.values();let s=n.next();for(;!s.done;)e.call(t,s.value,s.value,this),s=n.next()}};Set.prototype.difference&&Object.assign(Js,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});const Sp=Reflect.ownKeys(Js),lc=new WeakSet,cc={get(e,t,n){var s,i;const r=(s=e.copy)===null||s===void 0?void 0:s[t];if(r&&lc.has(r))return r;if(t===ic)return e;let o;if(e.options.mark){const u=t==="size"&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if(o=e.options.mark(u,ht),o===ht.mutable)return e.options.strict&&Qs(u,e.options,!0),u}const a=ct(e);if(a instanceof Map&&kp.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(rr,"size").get.call(e.proxy);const u=rr[t];if(u)return u.bind(e.proxy)}if(a instanceof Set&&Sp.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(Js,"size").get.call(e.proxy);const u=Js[t];if(u)return u.bind(e.proxy)}if(!rs(a,t)){const u=aa(a,t);return u?"value"in u?u.value:(i=u.get)===null||i===void 0?void 0:i.call(e.proxy):void 0}const l=a[t];if(e.options.strict&&Qs(l,e.options),e.finalized||!St(l,e.options))return l;if(l===Mi(e.original,t)){if(et(e),e.copy[t]=Yr({original:e.original[t],parentDraft:e,key:e.type===1?Number(t):t,finalities:e.finalities,options:e.options}),typeof o=="function"){const u=he(e.copy[t]);return et(u),Rt(u),u.copy}return e.copy[t]}return l},set(e,t,n){var s;if(e.type===3||e.type===2)throw new Error("Map/Set draft does not support any property assignment.");let i;if(e.type===1&&t!=="length"&&!(Number.isInteger(i=Number(t))&&i>=0&&(t===0||i===0||String(i)===String(t))))throw new Error("Only supports setting array indices and the 'length' property.");const r=aa(ct(e),t);if(r!=null&&r.set)return r.set.call(e.proxy,n),!0;const o=Mi(ct(e),t),a=he(o);return a&&zt(a.original,n)?(e.copy[t]=n,e.assignedMap=(s=e.assignedMap)!==null&&s!==void 0?s:new Map,e.assignedMap.set(t,!1),!0):(zt(n,o)&&(n!==void 0||rs(e.original,t))||(et(e),Rt(e),rs(e.original,t)&&zt(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,Gr(e,t,n,hs)),!0)},has(e,t){return t in ct(e)},ownKeys(e){return Reflect.ownKeys(ct(e))},getOwnPropertyDescriptor(e,t){const n=ct(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},getPrototypeOf(e){return Reflect.getPrototypeOf(e.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return e.type===1?cc.set.call(this,e,t,void 0,e.proxy):(Mi(e.original,t)!==void 0||t in e.original?(et(e),Rt(e),e.assignedMap.set(t,!1)):(e.assignedMap=(n=e.assignedMap)!==null&&n!==void 0?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function Yr(e){const{original:t,parentDraft:n,key:s,finalities:i,options:r}=e,o=kn(t),a={type:o,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:i,options:r,setMap:o===3?new Map(t.entries()):void 0};(s||"key"in e)&&(a.key=s);const{proxy:l,revoke:u}=Proxy.revocable(o===1?Object.assign([],a):a,cc);if(i.revoke.push(u),lc.add(l),a.proxy=l,n){const c=n;c.finalities.draft.push((f,p)=>{var h,y;const b=he(l);let $=c.type===3?c.setMap:c.copy;const M=Jt($,s),T=he(M);if(T){let A=T.original;T.operated&&(A=Qr(M)),sr(T),ir(T,hs,f,p),c.options.enableAutoFreeze&&(c.options.updatedValues=(h=c.options.updatedValues)!==null&&h!==void 0?h:new WeakMap,c.options.updatedValues.set(A,T.original)),_s($,s,A)}(y=b.callbacks)===null||y===void 0||y.forEach(A=>{A(f,p)})})}else{const c=he(l);c.finalities.draft.push((f,p)=>{sr(c),ir(c,hs,f,p)})}return l}Br.createDraft=Yr;function Ip(e,t,n,s,i){var r;const o=he(e),a=(r=o==null?void 0:o.original)!==null&&r!==void 0?r:e,l=!!t.length;if(o!=null&&o.operated)for(;o.finalities.draft.length>0;)o.finalities.draft.pop()(n,s);const u=l?t[0]:o?o.operated?o.copy:o.original:e;return o&&nr(o),i&&Pn(u,u,o==null?void 0:o.options.updatedValues),[u,n&&l?[{op:je.Replace,path:[],value:t[0]}]:n,s&&l?[{op:je.Replace,path:[],value:a}]:s]}function Op(e,t){var n;const s={draft:[],revoke:[],handledSet:new WeakSet};let i,r;t.enablePatches&&(i=[],r=[]);const a=((n=t.mark)===null||n===void 0?void 0:n.call(t,e,ht))===ht.mutable||!St(e,t)?e:Yr({original:e,parentDraft:null,finalities:s,options:t});return[a,(l=[])=>{const[u,c,f]=Ip(a,l,i,r,t.enableAutoFreeze);return t.enablePatches?[u,c,f]:u}]}function or(e){const{rootDraft:t,value:n,useRawReturn:s=!1,isRoot:i=!0}=e;Jr(n,(r,o,a)=>{const l=he(o);if(l&&t&&l.finalities===t.finalities){e.isContainDraft=!0;const u=l.original;if(a instanceof Set){const c=Array.from(a);a.clear(),c.forEach(f=>a.add(r===f?u:f))}else _s(a,r,u)}else typeof o=="object"&&o!==null&&(e.value=o,e.isRoot=!1,or(e))}),i&&(e.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),s&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function uc(e){var t;const n=he(e);if(!St(e,n==null?void 0:n.options))return e;const s=kn(e);if(n&&!n.operated)return n.original;let i;function r(){i=s===2?Kr(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e):s===3?Array.from(n.setMap.values()):oc(e,n==null?void 0:n.options)}if(n){n.finalized=!0;try{r()}finally{n.finalized=!1}}else i=e;if(Jr(i,(o,a)=>{if(n&&zt(Jt(n.original,o),a))return;const l=uc(a);l!==a&&(i===e&&r(),_s(i,o,l))}),s===3){const o=(t=n==null?void 0:n.original)!==null&&t!==void 0?t:i;return zr(o)?new Set(i):new(Object.getPrototypeOf(o)).constructor(i)}return i}function ua(e){if(!bn(e))throw new Error(`current() is only used for Draft, parameter: ${e}`);return uc(e)}const $p=e=>function t(n,s,i){var r,o,a;if(typeof n=="function"&&typeof s!="function")return function(I,...C){return t(I,E=>n.call(this,E,...C),s)};const l=n,u=s;let c=i;if(typeof s!="function"&&(c=s),c!==void 0&&Object.prototype.toString.call(c)!=="[object Object]")throw new Error(`Invalid options: ${c}, 'options' should be an object.`);c=Object.assign(Object.assign({},e),c);const f=bn(l)?ua(l):l,p=Array.isArray(c.mark)?(I,C)=>{for(const E of c.mark){if(typeof E!="function")throw new Error(`Invalid mark: ${E}, 'mark' should be a function.`);const L=E(I,C);if(L)return L}}:c.mark,h=(r=c.enablePatches)!==null&&r!==void 0?r:!1,y=(o=c.strict)!==null&&o!==void 0?o:!1,$={enableAutoFreeze:(a=c.enableAutoFreeze)!==null&&a!==void 0?a:!1,mark:p,strict:y,enablePatches:h};if(!St(f,$)&&typeof f=="object"&&f!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[M,T]=Op(f,$);if(typeof s!="function"){if(!St(f,$))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[M,T]}let A;try{A=u(M)}catch(I){throw nr(he(M)),I}const O=I=>{const C=he(M);if(!bn(I)){if(I!==void 0&&!zt(I,M)&&(C!=null&&C.operated))throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const L=I==null?void 0:I[hp];if(L){const k=L[0];return $.strict&&typeof I=="object"&&I!==null&&or({rootDraft:C,value:I,useRawReturn:!0}),T([k])}if(I!==void 0)return typeof I=="object"&&I!==null&&or({rootDraft:C,value:I}),T([I])}if(I===M||I===void 0)return T([]);const E=he(I);if($===E.options){if(E.operated)throw new Error("Cannot return a modified child draft.");return T([ua(I)])}return T([I])};return A instanceof Promise?A.then(O,I=>{throw nr(he(M)),I}):O(A)},ar=$p();Object.prototype.constructor.toString();function dc(e,t){const n=Object.keys(e),s=Object.keys(t);return n.length===s.length&&Object.keys(e).every(i=>t.hasOwnProperty(i))}function da(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n])}function Us(e,t){return typeof e!="object"||typeof t!="object"||e===null||t===null?e===t:dc(e,t)?Object.keys(e).every(n=>Us(e[n],t[n])):!1}function fc(e){if(!Qn(e))return e;const t={};for(const[n,s]of Object.entries(e))s!==void 0&&(t[n]=s);return t}function pc(e,t){if(!Qn(e)||!Qn(t))return t;const n=Object.assign({},e);for(const s of Object.keys(t)){if(t[s]===void 0)continue;if(t[s]===null){delete n[s];continue}const i=Qn(e[s])&&Qn(t[s]);n[s]=i?pc(e[s],t[s]):t[s]}return n}function Qn(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Cp(e,t,n){if(!e||t.length===0)return;let s=e||{};for(let r=0;r<t.length-1;r++){const o=t[r];(!(o in s)||typeof s[o]!="object")&&(s[o]=typeof t[r+1]=="number"?[]:{}),s=s[o]}const i=t[t.length-1];Array.isArray(s)&&typeof i=="number"?s.splice(i,0,n):s[i]=n}function fa(e,t,n){if(!e||t.length===0)return;let s=e||{};for(let i=0;i<t.length-1;i++){const r=t[i];(!(r in s)||typeof s[r]!="object")&&(s[r]=typeof t[i+1]=="number"?[]:{}),s=s[r]}s[t[t.length-1]]=n}function hc(e,t){if(!e||t.length===0)return;const[n,...s]=t;if(n in e){if(s.length===0){Array.isArray(e)?e.splice(n,1):delete e[n];return}hc(e[n],s),Pp(e[n])&&delete e[n]}}function Pp(e){return e&&Object.keys(e).length===0}function xp(e){return e.cardinality==="one"}function Xr(e){return e["value-type"]==="ref"}function Zr(e){return e["value-type"]==="blob"}function pi(e,t){return e[t]}function eo(e,t){return t.reduce((n,s)=>n&&n.get(s),e)}function yt(e,t){if(t.length===0)throw new Error("path must have at least one element");if(t.length===1){e.delete(t[0]);return}const[n,...s]=t;e.has(n)&&yt(e.get(n),s)}function rt(e,t,n){if(t.length===0)throw new Error("path must have at least one element");if(t.length===1){e.set(t[0],n);return}const[s,...i]=t;let r=e.get(s);r||(r=new Map,e.set(s,r)),rt(r,i,n)}function vc(e,t){const n=new Map,s=new Map,i=new Map;for(const r of t){const[o,a,l,u]=r,c=pi(e,a);if(!c){console.warn("no such attr",o,e);continue}Xr(c)&&rt(i,[l,a,o],r),rt(n,[o,a,l],r),rt(s,[a,o,l],r)}return{eav:n,aev:s,vae:i}}function gc(e){const t=new Map,n=new Map,s=new Map,i=new Map;for(const r of Object.values(e)){const o=r["forward-identity"],[a,l,u]=o,c=r["reverse-identity"];if(rt(s,[l,u],r),Zr(r)&&rt(t,[l,u],r),r["primary?"]&&rt(n,[l],r),c){const[f,p,h]=c;rt(i,[p,h],r)}}return{blobAttrs:t,primaryKeys:n,forwardIdents:s,revIdents:i}}function Ep(e){return{__type:e.__type,attrs:e.attrs,triples:ft(e.eav,3),cardinalityInference:e.cardinalityInference,linkIndex:e.linkIndex}}function Ap(e){return lr(e.attrs,e.triples,e.cardinalityInference,e.linkIndex)}function to(e){e.attrIndexes=gc(e.attrs)}function lr(e,t,n,s){const i=vc(e,t);return i.attrs=e,i.attrIndexes=gc(e),i.cardinalityInference=n,i.linkIndex=s,i.__type="store",i}function hi(e,t){var n,s;let i;if(Array.isArray(t[0])){const[o,a]=t[0],l=e.aev.get(o);if(!l)return null;i=(n=ft(l,2).find(c=>c[2]===a))===null||n===void 0?void 0:n[0]}else i=t[0];if(!i)return null;const r=t[2];if(Array.isArray(r)&&r.length===2&&e.aev.get(r[0])){const[o,a]=r,l=e.aev.get(o);if(!l)return null;const c=(s=ft(l,2).find(b=>b[2]===a))===null||s===void 0?void 0:s[0];if(!c)return null;const[f,p,h,...y]=t;return[i,p,c,...y]}else{const[o,...a]=t;return[i,...a]}}function Rp(e,t){const n=hi(e,t);if(!n)return;const[s,i,r]=n,o=pi(e.attrs,i);o&&(yt(e.eav,[s,i,r]),yt(e.aev,[i,s,r]),Xr(o)&&yt(e.vae,[r,i,s]))}let Mp=0;function mc(e,t,n){const[s,i,r]=n;let o;const a=eo(e.ea,[s,i,r]);return a&&(o=a[3]),o||Date.now()*10+Mp++}function Tp(e,t){var n;const s=hi(e,t);if(!s)return;const[i,r,o]=s,a=pi(e.attrs,r);if(!a)return;const l=eo(e.eav,[i,r,o]),u=(n=l==null?void 0:l[3])!==null&&n!==void 0?n:mc(e,a,s),c=[i,r,o,u];xp(a)?(rt(e.eav,[i,r],new Map([[o,c]])),rt(e.aev,[r,i],new Map([[o,c]]))):(rt(e.eav,[i,r,o],c),rt(e.aev,[r,i,o],c)),Xr(a)&&rt(e.vae,[o,r,i],c)}function jp(e,t){var n;const s=hi(e,t);if(!s)return;const[i,r,o]=s,a=pi(e.attrs,r);if(!a)return;if(!Zr(a))throw new Error("merge operation is not supported for links");const l=eo(e.eav,[i,r]);if(!l)return;const u=(n=l.values().next())===null||n===void 0?void 0:n.value;if(!u)return;const c=u[2],f=pc(c,o),p=[i,r,f,mc(e,a,u)];rt(e.eav,[i,r],new Map([[f,p]]))}function cr(e,t){var n,s;const[i,r]=t,o=hi(e,[i]);if(!o)return;const[a]=o,l=e.eav.get(a);if(l){for(const c of l.keys()){const f=e.attrs[c];f&&f["on-delete-reverse"]==="cascade"&&ft(l.get(c),1).forEach(([p,h,y])=>{var b;return cr(e,[y,(b=f["reverse-identity"])===null||b===void 0?void 0:b[1]])}),(!r||!f||((n=f["forward-identity"])===null||n===void 0?void 0:n[1])===r)&&(yt(e.aev,[c,a]),yt(e.eav,[a,c]))}l.size===0&&yt(e.eav,[a])}const u=e.vae.get(a)&&ft(e.vae.get(a),2);u&&u.forEach(c=>{var f,p;const[h,y,b]=c,$=e.attrs[y];(!r||!$||((f=$["reverse-identity"])===null||f===void 0?void 0:f[1])===r)&&(yt(e.eav,[h,y,b]),yt(e.aev,[y,h,b]),yt(e.vae,[b,y,h])),$&&$["on-delete"]==="cascade"&&cr(e,[h,(p=$["forward-identity"])===null||p===void 0?void 0:p[1]])}),((s=e.vae.get(a))===null||s===void 0?void 0:s.size)===0&&yt(e.vae,[a])}function yc(e,t){const n=vc(e.attrs,t);Object.keys(n).forEach(s=>{e[s]=n[s]})}function Dp(e,[t]){e.attrs[t.id]=t,to(e)}function _c(e){return ft(e.eav,3)}function Up(e,[t]){if(!e.attrs[t])return;const n=_c(e).filter(([s,i])=>i!==t);delete e.attrs[t],to(e),yc(e,n)}function Lp(e,[t]){const n=e.attrs[t.id];n&&(e.attrs[t.id]=Object.assign(Object.assign({},n),t),to(e),yc(e,_c(e)))}function Np(e,t){const[n,...s]=t;switch(n){case"add-triple":Tp(e,s);break;case"deep-merge-triple":jp(e,s);break;case"retract-triple":Rp(e,s);break;case"delete-entity":cr(e,s);break;case"add-attr":Dp(e,s);break;case"delete-attr":Up(e,s);break;case"update-attr":Lp(e,s);break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${n}`)}}function ft(e,t,n=[]){if(!e||t===0)return n;if(t===1){for(const s of e.values())n.push(s);return n}for(const s of e.values())ft(s,t-1,n);return n}function Cs(e,t,n){var s,i;const r=[];if(n!=null&&n.hasOwnProperty("$not")){for(const a of t.keys())n.$not!==a&&r.push(t.get(a));return r}if(n!=null&&n.hasOwnProperty("$isNull")){const{attrId:a,isNull:l,reverse:u}=n.$isNull;if(u)for(const c of t.keys()){const f=e.vae.get(c),p=!f||((s=f.get(a))===null||s===void 0?void 0:s.get(null))||!f.get(a);(l?p:!p)&&r.push(t.get(c))}else{const c=e.aev.get(a);for(const f of t.keys()){const p=!c||((i=c.get(f))===null||i===void 0?void 0:i.get(null))||!c.get(f);(l?p:!p)&&r.push(t.get(f))}}return r}if(n!=null&&n.$comparator)return ft(t,1).filter(n.$op);const o=n.in||n.$in||[n];for(const a of o){const l=t.get(a);l&&r.push(l)}return r}function Fp(e,t,n){let s="";return e!==void 0&&(s+="e"),t!==void 0&&(s+="a"),n!==void 0&&(s+="v"),s}function Wp(e,[t,n,s]){var i,r;switch(Fp(t,n,s)){case"e":{const a=e.eav.get(t);return ft(a,2)}case"ea":{const a=(i=e.eav.get(t))===null||i===void 0?void 0:i.get(n);return ft(a,1)}case"eav":{const a=(r=e.eav.get(t))===null||r===void 0?void 0:r.get(n);return a?Cs(e,a,s):[]}case"ev":{const a=e.eav.get(t);if(!a)return[];const l=[];for(const u of a.values())l.push(...Cs(e,u,s));return l}case"a":{const a=e.aev.get(n);return ft(a,2)}case"av":{const a=e.aev.get(n);if(!a)return[];const l=[];for(const u of a.values())l.push(...Cs(e,u,s));return l}case"v":{const a=[];for(const l of e.eav.values())for(const u of l.values())a.push(...Cs(e,u,s));return a}default:return ft(e.eav,3)}}function qp(e,t,n){var s;const i={};for(const[r,o]of t.entries()){const a=(s=e.eav.get(n))===null||s===void 0?void 0:s.get(o.id),l=ft(a,1);for(const u of l)i[r]=u[2]}return i}function Un(e,t,n){var s;return(s=e.attrIndexes.forwardIdents.get(t))===null||s===void 0?void 0:s.get(n)}function bc(e,t,n){var s;return(s=e.attrIndexes.revIdents.get(t))===null||s===void 0?void 0:s.get(n)}function Vp(e,t){return e.attrIndexes.blobAttrs.get(t)}function Hp(e,t){var n;const s=e.attrIndexes.primaryKeys.get(t);return s||((n=e.attrIndexes.forwardIdents.get(t))===null||n===void 0?void 0:n.get("id"))}function Bp(e,t){return ar(e,n=>{t.forEach(s=>{Np(n,s)})})}function zp(e){return typeof e=="string"&&e.startsWith("?")}function Kp(e,t,n){if(n.hasOwnProperty(e)){const s=n[e];return wc(s,t,n)}return Object.assign(Object.assign({},n),{[e]:t})}function pa(e,t,n){return e===t?n:null}function Qp(e){switch(typeof e){case"string":return e.startsWith("?")?Kp:pa;default:return pa}}const Jp=["in","$in","$not","$isNull","$comparator"];function Gp(e){for(const t of Jp)if(e.hasOwnProperty(t))return!0;return!1}function wc(e,t,n){return n?typeof e=="object"?Gp(e)?n:null:Qp(e)(e,t,n):null}function Yp(e,t,n){return e.reduce((s,i,r)=>{const o=t[r];return wc(i,o,s)},n)}function Xp(e,t,n){return th(e,t,n).map(s=>Yp(t,s,n)).filter(s=>s)}function Zp(e,t,n){return t.or?t.or.patterns.flatMap(s=>ur(e,s,n)):t.and?t.and.patterns.reduce((s,i)=>ur(e,i,s),n):n.flatMap(s=>Xp(e,t,s))}function ur(e,t,n=[{}]){return t.reduce((s,i)=>Zp(e,i,s),n)}function no(e,t){return Array.isArray(t)?t.map(n=>no(e,n)):zp(t)?e[t]:t}function eh(e,{find:t,where:n}){return ur(e,n).map(i=>no(i,t))}function th(e,t,n){return Wp(e,no(n,t))}let Ps;const nh=new Uint8Array(16);function sh(){if(!Ps&&(Ps=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Ps))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ps(nh)}const Ve=[];for(let e=0;e<256;++e)Ve.push((e+256).toString(16).slice(1));function ih(e,t=0){return Ve[e[t+0]]+Ve[e[t+1]]+Ve[e[t+2]]+Ve[e[t+3]]+"-"+Ve[e[t+4]]+Ve[e[t+5]]+"-"+Ve[e[t+6]]+Ve[e[t+7]]+"-"+Ve[e[t+8]]+Ve[e[t+9]]+"-"+Ve[e[t+10]]+Ve[e[t+11]]+Ve[e[t+12]]+Ve[e[t+13]]+Ve[e[t+14]]+Ve[e[t+15]]}const rh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ha={randomUUID:rh};function oh(e,t,n){if(ha.randomUUID&&!e)return ha.randomUUID();e=e||{};const s=e.random||(e.rng||sh)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,ih(s)}function va(e){const t=e.replace(/-/g,""),n=[];for(let s=0;s<t.length;s+=2)n.push(parseInt(t.substring(s,s+2),16));return n}function ah(e,t){for(let n=0;n<e.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function lh(e,t){return ah(va(e),va(t))}function Qe(){return oh()}let ch=0;function os(e){return vi(`_${e}`,ch++)}function vi(e,t){return`?${e}-${t}`}class Ln extends Error{constructor(t){super(t),this.name="AttrNotFoundError"}}function uh(e,t){const n=Hp(e,t);if(!n)throw new Ln(`Could not find id attr for ${t}`);return n}function ga(e,t,n,s){return[dh(e,t,n,s)]}function dh(e,t,n,s){return[e(n,s),uh(t,n).id,e(n,s),e("time",s)]}function fh(e,t,n){return e.map(s=>s===t?n:s)}function kc(e,t,n,s,i){const r=Un(t,n,i),o=bc(t,n,i),a=r||o;if(!a)throw new Ln(`Could not find attr for ${[n,i]}`);if(a["value-type"]!=="ref")throw new Error(`Attr ${a.id} is not a ref`);const[l,u]=a["forward-identity"],[c,f]=a["reverse-identity"],p=s+1,h=r?[e(u,s),a.id,e(f,p),os("time")]:[e(u,p),a.id,e(f,s),os("time")];return[r?f:u,p,h,a,!!r]}function ma(e,t){if(typeof t!="string")return function(o){return!1};const s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),i=new RegExp(`^${s}$`,e?void 0:"i");return function(o){return typeof o!="string"?!1:i.test(o)}}function ph(e,t){if(typeof t!="object"||t.hasOwnProperty("$in")||t.hasOwnProperty("in"))return t;const n=e["checked-data-type"]==="date";if(t.hasOwnProperty("$gt"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])>new Date(t.$gt)}:function(i){return i[2]>t.$gt}};if(t.hasOwnProperty("$gte"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])>=new Date(t.$gte)}:function(i){return i[2]>=t.$gte}};if(t.hasOwnProperty("$lt"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])<new Date(t.$lt)}:function(i){return i[2]<t.$lt}};if(t.hasOwnProperty("$lte"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])<=new Date(t.$lte)}:function(i){return i[2]<=t.$lte}};if(t.hasOwnProperty("$like")){const s=ma(!0,t.$like);return{$comparator:!0,$op:function(r){return s(r[2])}}}if(t.hasOwnProperty("$ilike")){const s=ma(!1,t.$ilike);return{$comparator:!0,$op:function(r){return s(r[2])}}}return t}function hh(e,t,n,s,i,r){const o=Un(t,n,i),a=bc(t,n,i),l=o||a;if(!l)throw new Ln(`No attr for etype = ${n} label = ${i}`);if(r!=null&&r.hasOwnProperty("$isNull")){const u=Un(t,n,"id");if(!u)throw new Ln(`No attr for etype = ${n} label = id`);return[e(n,s),u.id,{$isNull:{attrId:l.id,isNull:r.$isNull,reverse:!o}},os("time")]}return o?[e(n,s),l.id,ph(l,r),os("time")]:[r,l.id,e(n,s),os("time")]}function vh(e,t,n,s,i){const[r,o,a]=i.reduce((l,u)=>{const[c,f,p]=l,[h,y,b]=kc(e,t,c,f,u);return[h,y,[...p,b]]},[n,s,[]]);return[r,o,a]}function dr(e,t,n,s,i,r){const o=i.slice(0,i.length-1),a=i[i.length-1],[l,u,c]=vh(e,t,n,s,o),f=hh(e,t,l,u,a,r);return c.concat([f])}function gh(e,t){return t?[t].concat(e):e}function mh([e,t]){return e==="or"&&Array.isArray(t)}function yh([e,t]){return e==="and"&&Array.isArray(t)}function _h(e,t,n){return(s,i)=>{const r=e(s,i);return t==r?r:`${r}-${n}`}}function ya(e,t,n,s,i,r){const o=e(s,i),a=r.map((l,u)=>{const c=_h(e,o,u);return Sc(c,n,s,i,l)});return{[t]:{patterns:a,joinSym:o}}}function bh(e){const t=[];for(let n=1;n<=e.length;n++)t.push(e.slice(0,n));return t}function _a(e,t,n,s,i){return bh(i).map(r=>dr(e,t,n,s,r,{$isNull:!0}))}function Sc(e,t,n,s,i){return Object.entries(i).flatMap(([r,o])=>{if(mh([r,o]))return ya(e,"or",t,n,s,o);if(yh([r,o]))return ya(e,"and",t,n,s,o);if(r==="$entityIdStartsWith")return[];const a=r.split(".");if(o!=null&&o.hasOwnProperty("$not")){const l=dr(e,t,n,s,a,o),u=_a(e,t,n,s,a);return[{or:{patterns:[l,...u],joinSym:e(n,s)}}]}return o!=null&&o.hasOwnProperty("$isNull")&&o.$isNull===!0&&a.length>1?[{or:{patterns:_a(e,t,n,s,a),joinSym:e(n,s)}}]:dr(e,t,n,s,a,o)})}function wh(e,t,n,s){const i=vi;return s?Sc(i,e,t,n,s).concat(ga(i,e,t,n)):ga(i,e,t,n)}function kh(e,t,n){return[e(t,n),e("time",n)]}function Sh(e,t,n,s,i,r){const[o,a,l,u,c]=kc(e,t,n,s,i),f=fh(l,e(n,s),r);return[o,a,f,u,c]}function Ih(e,t,{etype:n,level:s,form:i},r){const o=Object.keys(i).filter(a=>a!=="$");return o.length?Object.entries(r).map(function([l,u]){return o.map(function(p){var h,y,b;const $=!!(t.cardinalityInference&&(!((b=(y=(h=t.linkIndex)===null||h===void 0?void 0:h[n])===null||y===void 0?void 0:y[p])===null||b===void 0)&&b.isSingular));try{const[M,T,A]=Sh(e,t,n,s,p,l),O=Ic(t,{etype:M,level:T,form:i[p],join:A}),I=$?O[0]:O;return{[p]:I}}catch(M){if(M instanceof Ln)return{[p]:$?void 0:[]};throw M}}).reduce(function(p,h){return Object.assign(Object.assign({},p),h)},u)}):Object.values(r)}function Gs([e,t],[n,s]){return t===s||t==null&&s==null?lh(e,n):s==null?1:t==null?-1:t>s?1:-1}function fr(e){return e==null?e:new Date(e).getTime()}function Oh(e,t,n,s){var i;const[r,o,a,l]=e,u=n==="desc"?1:-1;if(((i=t["forward-identity"])===null||i===void 0?void 0:i[2])==="id")return Gs(s,[r,l])===u;const[c,f]=s,p=t["checked-data-type"]==="date"?fr(f):f,h=t["checked-data-type"]==="date"?fr(a):a;return Gs([c,p],[r,h])===u}function $h(e,t){const n=t[1];return e.attrs[n]}function Ch(e,t,n){const s=Object.keys(n)[0];return Un(e,t,s)}function Ph(e,t,n,s){if(n)return $h(e,n);if(s)return Ch(e,t,s)}function xh(e,t,n){var s,i;if(!Array.isArray(n.fields))return Vp(e,t);const r=new Map;for(const o of n.fields){const a=Un(e,t,o),l=(s=a==null?void 0:a["forward-identity"])===null||s===void 0?void 0:s[2];l&&Zr(a)&&r.set(l,a)}if(!r.has("id")){const o=Un(e,t,"id"),a=(i=o==null?void 0:o["forward-identity"])===null||i===void 0?void 0:i[2];a&&r.set(a,o)}return r}function Eh(e,t,n,s,i,r){var o;let a=eh(e,r);const l=s==null?void 0:s["start-cursor"],u=Ph(e,t,l,i);if(u&&((o=u==null?void 0:u["forward-identity"])===null||o===void 0?void 0:o[2])!=="id"){const p=u["checked-data-type"]==="date",h=u.id;a=a.map(([y])=>{var b,$,M,T,A;let O=(A=(T=(M=($=(b=e.eav.get(y))===null||b===void 0?void 0:b.get(h))===null||$===void 0?void 0:$.values())===null||M===void 0?void 0:M.next())===null||T===void 0?void 0:T.value)===null||A===void 0?void 0:A[2];return p&&(O=fr(O)),[y,O]})}a.sort(n==="asc"?function(h,y){return Gs(h,y)}:function(h,y){return Gs(y,h)});let c={};const f=xh(e,t,r);for(const p of a){const[h]=p;if(c[h]||l&&u&&Oh(l,u,n,p))continue;const y=qp(e,f,h);y&&(c[h]=y)}return c}function Ah(e){var t;const n=(t=e.$)===null||t===void 0?void 0:t.order;return n&&n[Object.keys(n)[0]]||"asc"}function Rh(e,{etype:t,level:n,form:s,join:i,pageInfo:r}){var o,a,l,u,c,f,p,h,y;const b=((o=s.$)===null||o===void 0?void 0:o.limit)||((a=s.$)===null||a===void 0?void 0:a.first)||((l=s.$)===null||l===void 0?void 0:l.last),$=(u=s.$)===null||u===void 0?void 0:u.offset,M=(c=s.$)===null||c===void 0?void 0:c.before,T=(f=s.$)===null||f===void 0?void 0:f.after,A=(p=s.$)===null||p===void 0?void 0:p.order,O=(h=s.$)===null||h===void 0?void 0:h.fields;if(($||M||T)&&(!r||!r["start-cursor"]))return[];const I=gh(wh(e,t,n,(y=s.$)===null||y===void 0?void 0:y.where),i),C=kh(vi,t,n),E=Eh(e,t,Ah(s),r,A,{where:I,find:C,fields:O});if(b!=null){const L=Object.entries(E);return L.length<=b?E:Object.fromEntries(L.slice(0,b))}return E}function Mh(e,t){try{return Rh(e,t)}catch(n){if(n instanceof Ln)return{};throw n}}function Ic(e,t){const n=Mh(e,t);return Ih(vi,e,t,n)}function Th(e){const t={};for(const[n,s]of Object.entries(e))t[n]={startCursor:s["start-cursor"],endCursor:s["end-cursor"],hasNextPage:s["has-next-page?"],hasPreviousPage:s["has-previous-page?"]};return t}function jh({store:e,pageInfo:t,aggregate:n},s){const r={data:Object.keys(s).reduce(function(a,l){return n!=null&&n[l]||l==="$$ruleParams"||(a[l]=Ic(e,{etype:l,form:s[l],level:0,pageInfo:t==null?void 0:t[l]})),a},{})};return t&&(r.pageInfo=Th(t)),n&&(r.aggregate=n),r}function Dh(){const t={__etype:1,__ops:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(t))}const Uh=Dh();function pr(e,t,n){const s={__etype:e,__ops:n};return new Proxy(s,{get:(i,r)=>{if(r==="__ops")return n;if(r==="__etype")return e;if(Uh.has(r))return o=>pr(e,t,[...n,[r,e,t,o]])}})}function hr(e){return e.startsWith("lookup__")}function Oc(e){const[t,n,...s]=e.split("__");return[n,JSON.parse(s.join("__"))]}function Lh(e){return new Proxy({__etype:e},{get(t,n){if(n==="__etype")return e;const s=n;return hr(s)?pr(e,Oc(s),[]):pr(e,s,[])}})}function so(){return new Proxy({},{get(e,t){return Lh(t)}})}so();function Nh(e){return e.__ops}function Fh(e,t){const{attrIdMap:n,refSwapAttrIds:s}=e,i=[];for(const o of t){const a=n[o];if(a)i.push(a);else if(Array.isArray(o)&&o.length==2&&n[o[0]]){const[l,u]=o;i.push([n[l],u])}else i.push(o)}const[r]=t;if((r==="add-triple"||r==="retract-triple")&&s.has(t[2])){const o=i[1];i[1]=i[3],i[3]=o}return i}function tt(e,t,n){return Object.values(e).find(s=>{const[i,r,o]=s["forward-identity"];return r===t&&o===n})}function mn(e,t,n){return Object.values(e).find(s=>{const i=s["reverse-identity"];if(!i)return!1;const[r,o,a]=i;return o===t&&a===n})}function Wh(e){if(Array.isArray(e))return e;const t=Object.entries(e);if(t.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return t[0]}function vr(e,t,n){return n.indexOf(".")!==-1&&!tt(e,t,n)}function gr(e){const[t,n,...s]=e.split(".");if(s.length>0||n!=="id")throw new Error(`${e} is not a valid lookup attribute.`);return t}function qh(e,t,n){if(!vr(e,t,n))return tt(e,t,n);const s=gr(n),i=tt(e,t,s)||mn(e,t,s);if(i&&i["value-type"]!=="ref")throw new Error(`${n} does not reference a valid link attribute.`);return i}function mr(e){return typeof e=="string"&&!hr(e)?null:typeof e=="string"&&hr(e)?Oc(e):Wh(e)}function pt(e,t,n){const s=mr(n);if(s===null)return n;const[i,r]=s,o=qh(e,t,i);if(!o||!o["unique?"])throw new Error(`${i} is not a unique attribute.`);return[o.id,r]}function $c(e,t,n,s){const i=pt(e,t,n);return Array.isArray(i)?[["add-triple",i,tt(e,t,"id").id,i]].concat(s):s}function Vh(e,[t,n,s]){const i=Object.entries(s).flatMap(([r,o])=>{const a=Array.isArray(o)?o:[o],l=tt(e,t,r),u=mn(e,t,r);return a.map(c=>l?["add-triple",pt(e,t,n),l.id,pt(e,l["reverse-identity"][1],c)]:["add-triple",pt(e,u["forward-identity"][1],c),u.id,pt(e,t,n)])});return $c(e,t,n,i)}function Hh(e,[t,n,s]){const i=Object.entries(s).flatMap(([r,o])=>{const a=Array.isArray(o)?o:[o],l=tt(e,t,r),u=mn(e,t,r);return a.map(c=>l?["retract-triple",pt(e,t,n),l.id,pt(e,l["reverse-identity"][1],c)]:["retract-triple",pt(e,u["forward-identity"][1],c),u.id,pt(e,t,n)])});return $c(e,t,n,i)}function Bh(e,[t,n,s]){const i=fc(s),r=pt(e,t,n);return[["id",r]].concat(Object.entries(i)).map(([a,l])=>{const u=tt(e,t,a);return["add-triple",r,u.id,l]})}function zh(e,[t,n]){return[["delete-entity",pt(e,t,n),t]]}function Kh(e,[t,n,s]){const i=fc(s),r=pt(e,t,n),o=Object.entries(i).map(([l,u])=>{const c=tt(e,t,l);return["deep-merge-triple",r,c.id,u]});return[["add-triple",r,tt(e,t,"id").id,r]].concat(o)}function Qh(e,[t,n,s]){return[["rule-params",pt(e,t,n),t,s]]}function Jh(e){const[t,n,s,i]=e;if(!i)return e;const r=Object.assign({},i);return delete r.id,[t,n,s,r]}function Gh(e,t){const[n,...s]=Jh(t);switch(n){case"merge":return Kh(e,s);case"update":return Bh(e,s);case"link":return Vh(e,s);case"unlink":return Hh(e,s);case"delete":return zh(e,s);case"ruleParams":return Qh(e,s);default:throw new Error(`unsupported action ${n}`)}}function Yh(e){switch(e){case"string":case"date":case"boolean":case"number":return e;default:return}}function Xh(e,t,n){var s,i;const r=(i=(s=e.entities[t])===null||s===void 0?void 0:s.attrs)===null||i===void 0?void 0:i[n];if(n==="id")return null;if(!r)throw new Error(`${t}.${n} does not exist in your schema`);const{unique:o,indexed:a}=r==null?void 0:r.config,l=Yh(r==null?void 0:r.valueType);return{"index?":a,"unique?":o,"checked-data-type":l}}function Ti(e,t,n,s){const i=e?Xh(e,t,n):null,r=Qe(),a=[Qe(),t,n];return Object.assign(Object.assign({id:r,"forward-identity":a,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},i||{}),s||{})}function Zh(e,t,n){return Object.values(e.links).find(i=>i.forward.on===t&&i.forward.label===n||i.reverse.on===t&&i.reverse.label===n)}function ev(e,t,n){const s=Zh(e,t,n);if(!s)throw new Error(`Couldn't find the link ${t}.${n} in your schema`);const{forward:i,reverse:r}=s;return{"forward-identity":[Qe(),i.on,i.label],"reverse-identity":[Qe(),r.on,r.label],cardinality:i.has==="one"?"one":"many","unique?":r.has==="one"}}function ba(e,t,n,s){const i=e?ev(e,t,n):null,r=Qe(),o=[Qe(),t,n],a=[Qe(),n,t];return Object.assign(Object.assign({id:r,"forward-identity":o,"reverse-identity":a,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},i||{}),s||{})}const tv=new Set(["update","merge","link","unlink"]),nv=new Set(["link","unlink"]),sv=new Set(["update","merge"]),iv=new Set(["link","unlink","update","merge","delete","ruleParams"]),yr={"unique?":!0,"index?":!0},rv=Object.assign(Object.assign({},yr),{cardinality:"one"});function ov(e){const t=[],[n,s,i,r]=e;if(!iv.has(n))return t;const o=mr(i);if(o&&t.push({etype:s,lookupPair:o}),n==="link")for(const[a,l]of Object.entries(r)){const u=Array.isArray(l)?l:[l];for(const c of u){const f=mr(c);f&&t.push({etype:s,lookupPair:f,linkLabel:a})}}return t}function av({attrs:e,schema:t},n){var s,i;const[r,o,a]=[new Set,Object.assign({},e),[]];function l(f){o[f.id]=f,a.push(["add-attr",f]),r.add(f.id)}function u(f){f!=null&&f.isUnsynced&&!r.has(f.id)&&(a.push(["add-attr",f]),r.add(f.id))}function c(f,p){const h=tt(o,f,p),y=mn(o,f,p);u(h),u(y),!h&&!y&&l(ba(t,f,p,rv))}for(const f of n)for(const{etype:p,lookupPair:h,linkLabel:y}of ov(f)){const b=h[0];if(y){c(p,y);const $=tt(o,p,y),M=mn(o,p,y);u($),u(M);const T=((s=$==null?void 0:$["reverse-identity"])===null||s===void 0?void 0:s[1])||((i=M==null?void 0:M["forward-identity"])===null||i===void 0?void 0:i[1])||y;if(vr(o,T,b))c(T,gr(b));else{const A=tt(o,T,b);A||l(Ti(t,T,b,yr)),u(A)}}else if(vr(o,p,b))c(p,gr(b));else{const $=tt(o,p,b);$||l(Ti(t,p,b,yr)),u($)}}for(const f of n){const[p,h,y,b]=f;if(tv.has(p)){const $=Object.keys(b);$.push("id");for(const M of $){const T=tt(o,h,M);if(u(T),sv.has(p)&&(T||l(Ti(t,h,M,M==="id"?{"unique?":!0}:null))),nv.has(p)){const A=mn(o,h,M);!T&&!A&&l(ba(t,h,M)),u(A)}}}}return[o,a]}function lv(e,t){const s=(Array.isArray(t)?t:[t]).flatMap(a=>Nh(a)),[i,r]=av(e,s),o=s.flatMap(a=>Gh(i,a));return[...r,...o]}var wa=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};class Cc{constructor(t){this.dbName=t,this._storeName="kv",this._dbPromise=this._init()}_init(){return new Promise((t,n)=>{const s=indexedDB.open(this.dbName,1);s.onerror=i=>{n(i)},s.onsuccess=i=>{t(i.target.result)},s.onupgradeneeded=i=>{i.target.result.createObjectStore(this._storeName)}})}getItem(t){return wa(this,void 0,void 0,function*(){const n=yield this._dbPromise;return new Promise((s,i)=>{const a=n.transaction([this._storeName],"readonly").objectStore(this._storeName).get(t);a.onerror=l=>{i(l)},a.onsuccess=l=>{a.result?s(a.result):s(null)}})})}setItem(t,n){return wa(this,void 0,void 0,function*(){const s=yield this._dbPromise;return new Promise((i,r)=>{const l=s.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(n,t);l.onerror=u=>{r(u)},l.onsuccess=u=>{i()}})})}}var cv=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};class Pc{static getIsOnline(){return cv(this,void 0,void 0,function*(){return navigator.onLine})}static listen(t){const n=()=>{t(!0)},s=()=>{t(!1)};return addEventListener("online",n),addEventListener("offline",s),()=>{removeEventListener("online",n),removeEventListener("offline",s)}}}var uv=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};class io extends Error{constructor(t){var n;const s=((n=t.body)===null||n===void 0?void 0:n.message)||`API Error (${t.status})`;super(s);const i=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,i),Error.captureStackTrace&&Error.captureStackTrace(this,io),this.name="InstantAPIError",this.status=t.status,this.body=t.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function jt(e,t){return uv(this,void 0,void 0,function*(){const n=yield fetch(e,t),s=yield n.json();return n.status===200?Promise.resolve(s):Promise.reject(new io({status:n.status,body:s}))})}var bs=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};function dv({apiURI:e,appId:t,email:n}){return jt(`${e}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":t,email:n})})}function fv(e){return bs(this,arguments,void 0,function*({apiURI:t,appId:n,email:s,code:i}){return yield jt(`${t}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":n,email:s,code:i})})})}function pv(e){return bs(this,arguments,void 0,function*({apiURI:t,appId:n,refreshToken:s}){return yield jt(`${t}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":n,"refresh-token":s})})})}function ka(e){return bs(this,arguments,void 0,function*({apiURI:t,appId:n,code:s,codeVerifier:i}){return yield jt(`${t}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,code:s,code_verifier:i})})})}function hv(e){return bs(this,arguments,void 0,function*({apiURI:t,appId:n,nonce:s,idToken:i,clientName:r,refreshToken:o}){return yield jt(`${t}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,nonce:s,id_token:i,client_name:r,refresh_token:o})})})}function vv(e){return bs(this,arguments,void 0,function*({apiURI:t,appId:n,refreshToken:s}){return yield jt(`${t}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,refresh_token:s})})})}var ws=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};function gv(e){return ws(this,arguments,void 0,function*({apiURI:t,appId:n,path:s,file:i,refreshToken:r,contentType:o,contentDisposition:a}){const l={app_id:n,path:s,authorization:`Bearer ${r}`,"content-type":o||i.type};return a&&(l["content-disposition"]=a),yield jt(`${t}/storage/upload`,{method:"PUT",headers:l,body:i})})}function mv(e){return ws(this,arguments,void 0,function*({apiURI:t,appId:n,path:s,refreshToken:i}){const{data:r}=yield jt(`${t}/storage/files?app_id=${n}&filename=${encodeURIComponent(s)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${i}`}});return r})}function yv(e){return ws(this,arguments,void 0,function*({apiURI:t,appId:n,fileName:s,refreshToken:i,metadata:r={}}){const{data:o}=yield jt(`${t}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${i}`},body:JSON.stringify({app_id:n,filename:s})});return o})}function _v(e,t){return ws(this,void 0,void 0,function*(){return(yield fetch(e,{method:"PUT",body:t,headers:{"Content-Type":t.type}})).ok})}function bv(e){return ws(this,arguments,void 0,function*({apiURI:t,appId:n,path:s,refreshToken:i}){const{data:r}=yield jt(`${t}/storage/signed-download-url?app_id=${n}&filename=${encodeURIComponent(s)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${i}`}});return r})}let ro=!1,xc=!1,Ec=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(ro=!!window.localStorage.getItem("devBackend"),xc=!!window.localStorage.getItem("__instantLogging"),Ec=!!window.localStorage.getItem("__devtoolLocalDash"));function Sa(e,t){if(!t)return e;const n={};return t.forEach(s=>{n[s]=e[s]}),n}function wv(e,t,n){var s,i;const r={peers:{}};if(t&&"user"in t?t.user:!0){const a=Sa((s=e.user)!==null&&s!==void 0?s:{},t==null?void 0:t.keys);r.user=Object.assign(Object.assign({},a),{peerId:n})}for(const a of Object.keys((i=e.peers)!==null&&i!==void 0?i:{})){const l=(t==null?void 0:t.peers)===void 0,u=Array.isArray(t==null?void 0:t.peers)&&(t==null?void 0:t.peers.includes(a));if(l||u){const c=Sa(e.peers[a],t==null?void 0:t.keys);r.peers[a]=Object.assign(Object.assign({},c),{peerId:a})}}return r}function kv(e,t){if(e.isLoading!==t.isLoading||e.error!==t.error||(e.user||t.user)&&(!e.user||!t.user||!da(e.user,t.user))||!dc(e.peers,t.peers))return!0;for(const s of Object.keys(e.peers))if(!da(e.peers[s],t.peers[s]))return!0;return!1}class Ia{constructor(){this.promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}var xs=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};class Oa{constructor(t,n,s,i,r=l=>JSON.stringify(l),o=l=>JSON.parse(l),a=100){this._subs=[],this._persister=t,this._key=n,this._onMerge=i,this._loadedCbs=[],this._isLoading=!0,this.currentValue=s,this.toJSON=r,this.fromJSON=o,this._saveThrottleMs=a,this._pendingSaveCbs=[],this._version=0,this._load()}_load(){return xs(this,void 0,void 0,function*(){const t=this.fromJSON(yield this._persister.getItem(this._key));this._isLoading=!1,this._onMerge(t,this.currentValue);for(const n of this._loadedCbs)n()})}waitForLoaded(){return xs(this,void 0,void 0,function*(){if(!this._isLoading)return;yield new Promise(n=>{this._loadedCbs.push(n)})})}isLoading(){return this._isLoading}version(){return this._version}waitForSync(){return xs(this,void 0,void 0,function*(){if(!this._nextSave)return;yield new Promise(n=>{this._pendingSaveCbs.push(n)})})}_writeToStorage(){this._persister.setItem(this._key,this.toJSON(this.currentValue));for(const t of this._pendingSaveCbs)t();this._pendingSaveCbs.length=0}flush(){return xs(this,void 0,void 0,function*(){this._nextSave&&(clearTimeout(this._nextSave),this._writeToStorage())})}_enqueuePersist(t){if(this._nextSave){t&&this._pendingSaveCbs.push(t);return}this._nextSave=setTimeout(()=>{this._nextSave=null,this._writeToStorage()},this._saveThrottleMs)}set(t,n){this._version++,this.currentValue=t(this.currentValue),this._isLoading?this._loadedCbs.push(()=>this._enqueuePersist(n)):this._enqueuePersist(n);for(const s of this._subs)s(this.currentValue)}subscribe(t){return this._subs.push(t),t(this.currentValue),()=>{this._subs=this._subs.filter(n=>n!==t)}}}function Ac(e,t=[]){e.forEach(n=>{const{data:s}=n,{"datalog-result":i}=s,{"join-rows":r}=i;for(const o of r)for(const a of o)t.push(a);Ac(n["child-nodes"],t)})}function $a(e){const t=[];return Ac(e,t),t}function Ca(e){return Object.values(e.links).reduce((t,n)=>{var s,i,r,o;return(s=t[r=n.forward.on])!==null&&s!==void 0||(t[r]={}),t[n.forward.on][n.forward.label]={isForward:!0,isSingular:n.forward.has==="one",link:n},(i=t[o=n.reverse.on])!==null&&i!==void 0||(t[o]={}),t[n.reverse.on][n.reverse.label]={isForward:!1,isSingular:n.reverse.has==="one",link:n},t},{})}const Rc="v0.19.22";function Sv(e){return{info:e?console.info.bind(console):()=>{},debug:e?console.debug.bind(console):()=>{},error:e?console.error.bind(console):()=>{}}}var We=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(c){try{u(s.next(c))}catch(f){o(f)}}function l(c){try{u(s.throw(c))}catch(f){o(f)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};const Nt={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},Iv=3e4,Ov=3e4,$v=0,Pa=1,Cv={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},ji="_instant_oauth_redirect",Di="currentUser";let Pv=0;function xv(e){const t=new WebSocket(e);return t._id=Pv++,t}function Ev(){return typeof window<"u"||typeof chrome<"u"}const xa={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function Av(e){var t;const n=JSON.parse(e);for(const s in n){const i=n[s];!((t=i==null?void 0:i.result)===null||t===void 0)&&t.store&&(i.result.store=Ap(i.result.store))}return n}function Rv(e){var t;const n={};for(const s in e){const i=e[s],r=Object.assign({},i);!((t=i.result)===null||t===void 0)&&t.store&&(r.result=Object.assign(Object.assign({},i.result),{store:Ep(i.result.store)})),n[s]=r}return JSON.stringify(n)}function Mv(e){return[...e].sort((t,n)=>{const[s,i]=t,[r,o]=n,a=i.order||0,l=o.order||0;return a==l?s<r?-1:s>r?1:0:a-l})}class Tv{constructor(t,n=Cc,s=Pc,i){this._isOnline=!0,this._isShutdown=!1,this.status=Nt.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._onMergeQuerySubs=(r,o)=>{const a=r||{},l=Object.assign({},o);Object.entries(o).forEach(([c,f])=>{var p;const h=(p=a==null?void 0:a[c])===null||p===void 0?void 0:p.result,y=f.result;h&&!y&&(l[c].result=h)}),Object.keys(a).filter(c=>!o[c]).slice(0,10).forEach(c=>{l[c]=a[c]}),this.querySubs.set(c=>l),this.loadedNotifyAll()},this._onMergePendingMutations=(r,o)=>{const a=new Map([...r.entries(),...o.entries()]);this.pendingMutations.set(u=>a),this.loadedNotifyAll(),this._rewriteMutationsSorted(this.attrs,r).forEach(([u,c])=>{!o.has(u)&&!c["tx-id"]&&this._sendMutation(u,c)})},this.getPreviousResult=r=>{const o=it(r);return this.dataForQuery(o)},this.notifyOne=r=>{var o,a;const l=(o=this.queryCbs[r])!==null&&o!==void 0?o:[],u=(a=this._dataForQueryCache[r])===null||a===void 0?void 0:a.data,c=this.dataForQuery(r);c&&(Us(c,u)||l.forEach(f=>f.cb(c)))},this.notifyOneQueryOnce=r=>{var o;const a=(o=this.queryOnceDfds[r])!==null&&o!==void 0?o:[],l=this.dataForQuery(r);a.forEach(u=>{this._completeQueryOnce(u.q,r,u.dfd),u.dfd.resolve(l)})},this.notifyQueryError=(r,o)=>{(this.queryCbs[r]||[]).forEach(l=>l.cb({error:o}))},this.pushTx=r=>{try{const o=lv({attrs:this.optimisticAttrs(),schema:this.config.schema},r);return this.pushOps(o)}catch(o){return this.pushOps([],o)}},this.pushOps=(r,o)=>{const a=Qe(),l=[...this.pendingMutations.currentValue.values()],u=Math.max(0,...l.map(p=>p.order||0))+1,c={op:"transact","tx-steps":r,created:Date.now(),error:o,order:u};this.pendingMutations.set(p=>(p.set(a,c),p));const f=new Ia;return this.mutationDeferredStore.set(a,f),this._sendMutation(a,c),this.notifyAll(),f.promise},this._wsOnOpen=r=>{const o=r.target;if(this._ws!==o){this._log.info("[socket][open]",o._id,"skip; this is no longer the current ws");return}this._log.info("[socket][open]",this._ws._id),this._setStatus(Nt.OPENED),this.getCurrentUser().then(a=>{var l;this._trySend(Qe(),{op:"init","app-id":this.config.appId,"refresh-token":(l=a.user)===null||l===void 0?void 0:l.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(a=>{this._log.error("[socket][error]",o._id,a)})},this._wsOnMessage=r=>{const o=r.target,a=JSON.parse(r.data.toString());if(this._ws!==o){this._log.info("[socket][message]",o._id,a,"skip; this is no longer the current ws");return}this._handleReceive(o._id,JSON.parse(r.data.toString()))},this._wsOnError=r=>{const o=r.target;if(this._ws!==o){this._log.info("[socket][error]",o._id,"skip; this is no longer the current ws");return}this._log.error("[socket][error]",o._id,r)},this._wsOnClose=r=>{const o=r.target;if(this._ws!==o){this._log.info("[socket][close]",o._id,"skip; this is no longer the current ws");return}this._setStatus(Nt.CLOSED);for(const a of Object.values(this._rooms))a.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",o._id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",o._id,"schedule reconnect, ms =",this._reconnectTimeoutMs),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",o._id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this.config=Object.assign(Object.assign({},Cv),t),this._log=Sv(t.verbose||ro||xc),this.versions=Object.assign(Object.assign({},i||{}),{"@instantdb/core":Rc}),this.config.schema&&(this._linkIndex=Ca(this.config.schema)),Ev()&&(typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",r=>We(this,void 0,void 0,function*(){var o;try{if(((o=r.data)===null||o===void 0?void 0:o.type)==="auth"){const a=yield this.getCurrentUser();this.updateUser(a.user)}}catch(a){this._log.error("[error] handle broadcast channel",a)}}))),this._oauthCallbackResponse=this._oauthLoginInit(),this._initStorage(n),this.getCurrentUser(),s.getIsOnline().then(r=>{this._isOnline=r,this._startSocket(),s.listen(o=>{o!==this._isOnline&&(this._log.info("[network] online =",o),this._isOnline=o,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Nt.CLOSED),this._setStatus(Nt.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload)))}updateSchema(t){this.config=Object.assign(Object.assign({},this.config),{schema:t,cardinalityInference:!!t}),this._linkIndex=t?Ca(this.config.schema):null}_initStorage(t){this._persister=new t(`instant_${this.config.appId}_5`),this.querySubs=new Oa(this._persister,"querySubs",{},this._onMergeQuerySubs,Rv,Av),this.pendingMutations=new Oa(this._persister,"pendingMutations",new Map,this._onMergePendingMutations,n=>JSON.stringify([...n.entries()]),n=>new Map(JSON.parse(n))),this._beforeUnloadCbs.push(()=>{this.pendingMutations.flush(),this.querySubs.flush()})}_beforeUnload(){for(const t of this._beforeUnloadCbs)t()}_finishTransaction(t,n,s){const i=this.mutationDeferredStore.get(n);this.mutationDeferredStore.delete(n);const r=t!=="error"&&t!=="timeout";!i&&!r&&console.error("Mutation failed",Object.assign({status:t,eventId:n},s)),i&&(r?i.resolve({status:t,eventId:n}):i.reject(Object.assign({status:t,eventId:n},s)))}_setStatus(t,n){this.status=t,this._errorMessage=n,this.notifyConnectionStatusSubs(t)}_flushEnqueuedRoomData(t){var n,s;const i=(s=(n=this._presence[t])===null||n===void 0?void 0:n.result)===null||s===void 0?void 0:s.user,r=this._broadcastQueue[t];if(this._broadcastQueue[t]=[],i&&this._trySetPresence(t,i),r)for(const o of r){const{topic:a,roomType:l,data:u}=o;this._tryBroadcast(t,l,a,u)}}_handleReceive(t,n){var s,i,r,o,a,l;const u=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(xa[n.op]||this._log.info("[receive]",t,n.op,n),n.op){case"init-ok":this._setStatus(Nt.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(n.attrs),this._flushPendingMessages(),this._sessionId=n["session-id"];for(const B of Object.keys(this._rooms)){const ie=(i=(s=this._presence[B])===null||s===void 0?void 0:s.result)===null||i===void 0?void 0:i.user;this._tryJoinRoom(B,ie)}break;case"add-query-exists":this.notifyOneQueryOnce(it(n.q));break;case"add-query-ok":const{q:c,result:f}=n,p=it(c),h=(o=(r=f==null?void 0:f[0])===null||r===void 0?void 0:r.data)===null||o===void 0?void 0:o["page-info"],y=(l=(a=f==null?void 0:f[0])===null||a===void 0?void 0:a.data)===null||l===void 0?void 0:l.aggregate,b=$a(f),$=lr(this.attrs,b,u,this._linkIndex);this.querySubs.set(B=>(B[p].result={store:$,pageInfo:h,aggregate:y,processedTxId:n["processed-tx-id"]},B)),this._cleanupPendingMutationsQueries(),this.notifyOne(p),this.notifyOneQueryOnce(p),this._cleanupPendingMutationsTimeout();break;case"refresh-ok":const{computations:M,attrs:T}=n;this._setAttrs(T),this._cleanupPendingMutationsTimeout();const A=this._rewriteMutationsSorted(T,this.pendingMutations.currentValue),O=n["processed-tx-id"],I=M.map(B=>{var ie,Pe,ce,xe;const Ue=B["instaql-query"],ee=B["instaql-result"],F=it(Ue),Dt=$a(ee),qe=lr(this.attrs,Dt,u,this._linkIndex),x=this._applyOptimisticUpdates(qe,A,O),X=(Pe=(ie=ee==null?void 0:ee[0])===null||ie===void 0?void 0:ie.data)===null||Pe===void 0?void 0:Pe["page-info"],J=(xe=(ce=ee==null?void 0:ee[0])===null||ce===void 0?void 0:ce.data)===null||xe===void 0?void 0:xe.aggregate;return{hash:F,store:x,pageInfo:X,aggregate:J}});I.forEach(({hash:B,store:ie,pageInfo:Pe,aggregate:ce})=>{this.querySubs.set(xe=>(xe[B].result={store:ie,pageInfo:Pe,aggregate:ce,processedTxId:O},xe))}),this._cleanupPendingMutationsQueries(),I.forEach(({hash:B})=>{this.notifyOne(B)});break;case"transact-ok":const{"client-event-id":C,"tx-id":E}=n,k=this._rewriteMutations(this.attrs,this.pendingMutations.currentValue).get(C);if(!k)break;this.pendingMutations.set(B=>(B.set(C,Object.assign(Object.assign({},B.get(C)),{"tx-id":E,confirmed:Date.now()})),B)),this._cleanupPendingMutationsTimeout();const _=k["tx-steps"].filter(([B,...ie])=>B==="add-attr").map(([B,ie])=>ie).concat(Object.values(this.attrs));this._setAttrs(_),this._finishTransaction("synced",C);break;case"patch-presence":{const B=n["room-id"];this._patchPresencePeers(B,n.edits),this._notifyPresenceSubs(B);break}case"refresh-presence":{const B=n["room-id"];this._setPresencePeers(B,n.data),this._notifyPresenceSubs(B);break}case"server-broadcast":const g=n["room-id"],w=n.topic;this._notifyBroadcastSubs(g,w,n);break;case"join-room-ok":const V=n["room-id"],P=this._rooms[V];if(!P){this._roomsPendingLeave[V]&&(this._tryLeaveRoom(V),delete this._roomsPendingLeave[V]);break}P.isConnected=!0,this._notifyPresenceSubs(V),this._flushEnqueuedRoomData(V);break;case"join-room-error":const R=n["room-id"],Z=this._rooms[R];Z&&(Z.error=n.error),this._notifyPresenceSubs(R);break;case"error":this._handleReceiveError(n);break}}_handleMutationError(t,n,s){const i=this.pendingMutations.currentValue.get(n);i&&(t!=="timeout"||!i["tx-id"])&&(this.pendingMutations.set(r=>(r.delete(n),r)),this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(s),this._finishTransaction(t,n,s))}_handleReceiveError(t){var n,s,i,r,o;const a=t["client-event-id"],l=this.pendingMutations.currentValue.get(a),u={message:t.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(t.hint&&(u.hint=t.hint),l){const p={message:t.message,hint:t.hint};this._handleMutationError("error",a,p);return}if(!((n=t["original-event"])===null||n===void 0)&&n.hasOwnProperty("q")&&((s=t["original-event"])===null||s===void 0?void 0:s.op)==="add-query"){const p=(i=t["original-event"])===null||i===void 0?void 0:i.q,h=it(p);this.notifyQueryError(it(p),u),this.notifyQueryOnceError(p,h,a,u);return}if(((r=t["original-event"])===null||r===void 0?void 0:r.op)==="init"){if(t.type==="record-not-found"&&((o=t.hint)===null||o===void 0?void 0:o["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Nt.ERRORED,u),this.notifyAll();return}const f=Object.assign({},t);delete f.message,delete f.hint,console.error(t.message,f),t.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,t.hint)}notifyQueryOnceError(t,n,s,i){var r;const o=(r=this.queryOnceDfds[n])===null||r===void 0?void 0:r.find(a=>a.eventId===s);o&&(o.dfd.reject(i),this._completeQueryOnce(t,n,o.dfd))}_setAttrs(t){this.attrs=t.reduce((n,s)=>(n[s.id]=s,n),{}),this.notifyAttrsSubs()}_startQuerySub(t,n){const s=Qe();return this.querySubs.set(i=>(i[n]=i[n]||{q:t,result:null,eventId:s},i)),this._trySendAuthed(s,{op:"add-query",q:t}),s}subscribeQuery(t,n,s){var i;s&&"ruleParams"in s&&(t=Object.assign({$$ruleParams:s.ruleParams},t));const r=it(t),o=this.getPreviousResult(t);return o&&n(o),this.queryCbs[r]=(i=this.queryCbs[r])!==null&&i!==void 0?i:[],this.queryCbs[r].push({q:t,cb:n}),this._startQuerySub(t,r),()=>{this._unsubQuery(t,r,n)}}queryOnce(t,n){var s;n&&"ruleParams"in n&&(t=Object.assign({$$ruleParams:n.ruleParams},t));const i=new Ia;if(!this._isOnline)return i.reject(new Error("We can't run `queryOnce`, because the device is offline.")),i.promise;if(!this.querySubs)return i.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),i.promise;const r=it(t),o=this._startQuerySub(t,r);return this.queryOnceDfds[r]=(s=this.queryOnceDfds[r])!==null&&s!==void 0?s:[],this.queryOnceDfds[r].push({q:t,dfd:i,eventId:o}),setTimeout(()=>i.reject(new Error("Query timed out")),Iv),i.promise}_completeQueryOnce(t,n,s){this.queryOnceDfds[n]&&(this.queryOnceDfds[n]=this.queryOnceDfds[n].filter(i=>i.dfd!==s),this._cleanupQuery(t,n))}_unsubQuery(t,n,s){this.queryCbs[n]&&(this.queryCbs[n]=this.queryCbs[n].filter(i=>i.cb!==s),this._cleanupQuery(t,n))}_cleanupQuery(t,n){var s,i;!((s=this.queryCbs[n])===null||s===void 0)&&s.length||!((i=this.queryOnceDfds[n])===null||i===void 0)&&i.length||(delete this.queryCbs[n],delete this.queryOnceDfds[n],this._trySendAuthed(Qe(),{op:"remove-query",q:t}))}_rewriteMutations(t,n){if(!t)return n;const s=l=>{const[u,c,f]=l["forward-identity"];return tt(t,c,f)},i=l=>{const[u,c,f]=l["forward-identity"];return mn(t,c,f)},r={attrIdMap:{},refSwapAttrIds:new Set},o=l=>{const u=[];for(const c of l){const[f]=c;if(f==="add-attr"){const[h,y]=c,b=s(y);if(b){r.attrIdMap[y.id]=b.id;continue}if(y["value-type"]==="ref"){const $=i(y);if($){r.attrIdMap[y.id]=$.id,r.refSwapAttrIds.add(y.id);continue}}}const p=Fh(r,c);u.push(p)}return u},a=new Map;for(const[l,u]of n.entries())a.set(l,Object.assign(Object.assign({},u),{"tx-steps":o(u["tx-steps"])}));return a}_rewriteMutationsSorted(t,n){return Mv(this._rewriteMutations(t,n).entries())}optimisticAttrs(){var t;const n=[...this.pendingMutations.currentValue.values()].flatMap(a=>a["tx-steps"]),s=new Set(n.filter(([a,l])=>a==="delete-attr").map(([a,l])=>l)),i=[];for(const[a,l]of n)if(a==="add-attr")i.push(l);else if(a==="update-attr"&&l.id&&(!((t=this.attrs)===null||t===void 0)&&t[l.id])){const u=Object.assign(Object.assign({},this.attrs[l.id]),l);i.push(u)}const r=[...Object.values(this.attrs||{}),...i].filter(a=>!s.has(a.id));return Object.fromEntries(r.map(a=>[a.id,a]))}dataForQuery(t){const n=this._errorMessage;if(n)return{error:n};if(!this.querySubs||!this.pendingMutations)return;const s=this.querySubs.version(),i=this.querySubs.currentValue,r=this.pendingMutations.version(),o=this.pendingMutations.currentValue,{q:a,result:l}=i[t]||{};if(!l)return;const u=this._dataForQueryCache[t];if(u&&s===u.querySubVersion&&r===u.pendingMutationsVersion)return u.data;const{store:c,pageInfo:f,aggregate:p,processedTxId:h}=l,y=this._rewriteMutationsSorted(c.attrs,o),b=this._applyOptimisticUpdates(c,y,h),$=jh({store:b,pageInfo:f,aggregate:p},a);return this._dataForQueryCache[t]={querySubVersion:s,pendingMutationsVersion:r,data:$},$}_applyOptimisticUpdates(t,n,s){for(const[i,r]of n)(!r["tx-id"]||s&&r["tx-id"]>s)&&(t=Bp(t,r["tx-steps"]));return t}notifyAll(){Object.keys(this.queryCbs).forEach(t=>{this.notifyOne(t)})}loadedNotifyAll(){this.pendingMutations.isLoading()||this.querySubs.isLoading()||this.notifyAll()}shutdown(){var t;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(t=this._ws)===null||t===void 0||t.close()}_sendMutation(t,n){if(n.error){this._handleMutationError("error",t,{error:n.error,message:n.error.message});return}if(this.status!==Nt.AUTHENTICATED){this._finishTransaction("enqueued",t);return}const s=Math.max(5e3,this.pendingMutations.currentValue.size*5e3);this._isOnline?(this._trySend(t,n),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",t,{message:"transaction timed out"})},s)):this._finishTransaction("enqueued",t)}_flushPendingMessages(){Object.keys(this.queryCbs).map(i=>this.querySubs.currentValue[i]).filter(i=>i).forEach(({eventId:i,q:r})=>{this._trySendAuthed(i,{op:"add-query",q:r})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:i,q:r})=>{this._trySendAuthed(i,{op:"add-query",q:r})}),this._rewriteMutationsSorted(this.attrs,this.pendingMutations.currentValue).forEach(([i,r])=>{r["tx-id"]||this._sendMutation(i,r)})}_cleanupPendingMutationsQueries(){let t=Number.MAX_SAFE_INTEGER;for(const{result:n}of Object.values(this.querySubs.currentValue))n!=null&&n.processedTxId&&(t=Math.min(t,n==null?void 0:n.processedTxId));this.pendingMutations.set(n=>{for(const[s,i]of Array.from(n.entries()))i["tx-id"]&&i["tx-id"]<=t&&n.delete(s);return n})}_cleanupPendingMutationsTimeout(){const t=Date.now();this.pendingMutations.currentValue.size<200||this.pendingMutations.set(n=>{let s=!1,i=!1;for(const[r,o]of Array.from(n.entries()))o.confirmed||(i=!0),o.confirmed&&o.confirmed+Ov<t&&(n.delete(r),s=!0);if(s&&i)for(const[r,o]of Array.from(n.entries()))o.confirmed||n.delete(r);return n})}_trySendAuthed(...t){this.status===Nt.AUTHENTICATED&&this._trySend(...t)}_trySend(t,n,s){this._ws.readyState===Pa&&(xa[n.op]||this._log.info("[send]",this._ws._id,n.op,n),this._ws.send(JSON.stringify(Object.assign({"client-event-id":t},n))))}_startSocket(){if(this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._ws&&this._ws.readyState==$v){this._log.info("[socket][start]",this._ws._id,"maintained as current ws, we were still in a connecting state");return}const t=this._ws;this._ws=xv(`${this.config.websocketURI}?app_id=${this.config.appId}`),this._ws.onopen=this._wsOnOpen,this._ws.onmessage=this._wsOnMessage,this._ws.onclose=this._wsOnClose,this._ws.onerror=this._wsOnError,this._log.info("[socket][start]",this._ws._id),(t==null?void 0:t.readyState)===Pa&&(this._log.info("[socket][start]",this._ws._id,"close previous ws id = ",t._id),t.close())}getLocalId(t){return We(this,void 0,void 0,function*(){const n=`localToken_${t}`,s=yield this._persister.getItem(n);if(s)return s;if(this._localIdPromises[n])return this._localIdPromises[n];const i=Qe();return this._localIdPromises[n]=this._persister.setItem(n,i).then(()=>i),this._localIdPromises[n]})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const t=new URL(window.location.href);if(t.searchParams.get(ji)){const n=t.toString();t.searchParams.delete(ji),t.searchParams.delete("code"),t.searchParams.delete("error");const s=t.pathname+(t.searchParams.size?"?"+t.searchParams:"")+t.hash;if(history.replaceState(history.state,"",s),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let i=!1;const r=o=>{var a;i||(i=!0,navigation.removeEventListener("navigate",r),!o.userInitiated&&o.navigationType==="replace"&&((a=o.destination)===null||a===void 0?void 0:a.url)===n&&history.replaceState(history.state,"",s))};navigation.addEventListener("navigate",r)}}}_oauthLoginInit(){return We(this,void 0,void 0,function*(){var t,n,s,i;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const r=new URLSearchParams(window.location.search);if(!r.get(ji))return null;const o=r.get("error");if(o)return this._replaceUrlAfterOAuth(),{error:{message:o}};const a=r.get("code");if(!a)return null;this._replaceUrlAfterOAuth();try{const{user:l}=yield ka({apiURI:this.config.apiURI,appId:this.config.appId,code:a});return this.setCurrentUser(l),null}catch(l){return((t=l==null?void 0:l.body)===null||t===void 0?void 0:t.type)==="record-not-found"&&((s=(n=l==null?void 0:l.body)===null||n===void 0?void 0:n.hint)===null||s===void 0?void 0:s["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((i=l==null?void 0:l.body)===null||i===void 0?void 0:i.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return We(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(t){return this.mutationErrorCbs.push(t),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(n=>n!==t)}}subscribeAuth(t){this.authCbs.push(t);const n=this._currentUserCached;n.isLoading||t(this._currentUserCached);let s=!1;return this.getCurrentUser().then(i=>{s||Us(i,n)||t(i)}),()=>{s=!0,this.authCbs=this.authCbs.filter(i=>i!==t)}}getAuth(){return We(this,void 0,void 0,function*(){const{user:t,error:n}=yield this.getCurrentUser();if(n)throw n;return t})}subscribeConnectionStatus(t){return this.connectionStatusCbs.push(t),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(n=>n!==t)}}subscribeAttrs(t){return this.attrsCbs.push(t),this.attrs&&t(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(n=>n!==t)}}notifyAuthSubs(t){this.authCbs.forEach(n=>n(t))}notifyMutationErrorSubs(t){this.mutationErrorCbs.forEach(n=>n(t))}notifyAttrsSubs(){if(!this.attrs)return;const t=this.optimisticAttrs();this.attrsCbs.forEach(n=>n(t))}notifyConnectionStatusSubs(t){this.connectionStatusCbs.forEach(n=>n(t))}setCurrentUser(t){return We(this,void 0,void 0,function*(){yield this._persister.setItem(Di,JSON.stringify(t))})}getCurrentUserCached(){return this._currentUserCached}getCurrentUser(){return We(this,void 0,void 0,function*(){const t=yield this._waitForOAuthCallbackResponse();if(t!=null&&t.error){const i={error:t.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}const n=yield this._persister.getItem(Di),s={user:JSON.parse(n),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},s),s})}_hasCurrentUser(){return We(this,void 0,void 0,function*(){const t=yield this._persister.getItem(Di);return JSON.parse(t)!=null})}changeCurrentUser(t){return We(this,void 0,void 0,function*(){var n;const{user:s}=yield this.getCurrentUser();if(!Us(s,t)){yield this.setCurrentUser(t),this.updateUser(t);try{(n=this._broadcastChannel)===null||n===void 0||n.postMessage({type:"auth"})}catch(i){console.error("Error posting message to broadcast channel",i)}}})}updateUser(t){const n={error:void 0,user:t};this._currentUserCached=Object.assign({isLoading:!1},n),this._dataForQueryCache={},this.querySubs.set(s=>(Object.keys(s).forEach(i=>{delete s[i].result}),s)),this._reconnectTimeoutMs=0,this._ws.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(n)}sendMagicCode({email:t}){return dv({apiURI:this.config.apiURI,appId:this.config.appId,email:t})}signInWithMagicCode(t){return We(this,arguments,void 0,function*({email:n,code:s}){const i=yield fv({apiURI:this.config.apiURI,appId:this.config.appId,email:n,code:s});return yield this.changeCurrentUser(i.user),i})}signInWithCustomToken(t){return We(this,void 0,void 0,function*(){const n=yield pv({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:t});return yield this.changeCurrentUser(n.user),n})}potentiallyInvalidateToken(t,n){var s;const i=(s=t==null?void 0:t.user)===null||s===void 0?void 0:s.refresh_token;if(!i)return;if(n.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}vv({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:i}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(o=>{})}signOut(t){return We(this,void 0,void 0,function*(){const n=yield this.getCurrentUser();this.potentiallyInvalidateToken(n,t),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:t,redirectURL:n}){const{apiURI:s,appId:i}=this.config;return`${s}/runtime/oauth/start?app_id=${i}&client_name=${t}&redirect_uri=${n}`}exchangeCodeForToken(t){return We(this,arguments,void 0,function*({code:n,codeVerifier:s}){const i=yield ka({apiURI:this.config.apiURI,appId:this.config.appId,code:n,codeVerifier:s});return yield this.changeCurrentUser(i.user),i})}issuerURI(){const{apiURI:t,appId:n}=this.config;return`${t}/runtime/${n}`}signInWithIdToken(t){return We(this,arguments,void 0,function*({idToken:n,clientName:s,nonce:i}){var r;const o=yield this.getCurrentUser(),a=(r=o==null?void 0:o.user)===null||r===void 0?void 0:r.refresh_token,l=yield hv({apiURI:this.config.apiURI,appId:this.config.appId,idToken:n,clientName:s,nonce:i,refreshToken:a});return yield this.changeCurrentUser(l.user),l})}joinRoom(t,n){return this._rooms[t]||(this._rooms[t]={isConnected:!1,error:void 0}),this._presence[t]=this._presence[t]||{},n&&(this._presence[t].result=this._presence[t].result||{},this._presence[t].result.user=n,this._notifyPresenceSubs(t)),this._tryJoinRoom(t,n),()=>{this._cleanupRoom(t)}}_cleanupRoom(t){var n,s,i,r;if(!(!((s=(n=this._presence[t])===null||n===void 0?void 0:n.handlers)===null||s===void 0)&&s.length)&&!Object.keys((i=this._broadcastSubs[t])!==null&&i!==void 0?i:{}).length){const o=(r=this._rooms[t])===null||r===void 0?void 0:r.isConnected;delete this._rooms[t],delete this._presence[t],delete this._broadcastSubs[t],o?this._tryLeaveRoom(t):this._roomsPendingLeave[t]=!0}}getPresence(t,n,s={}){const i=this._rooms[n],r=this._presence[n];return!i||!r||!r.result?null:Object.assign(Object.assign({},wv(r.result,s,this._sessionId)),{isLoading:!i.isConnected,error:i.error})}publishPresence(t,n,s){const i=this._rooms[n],r=this._presence[n];if(!i||!r)return;r.result=r.result||{};const o=Object.assign(Object.assign({},r.result.user),s);r.result.user=o,i.isConnected&&(this._trySetPresence(n,o),this._notifyPresenceSubs(n))}_trySetPresence(t,n){this._trySendAuthed(Qe(),{op:"set-presence","room-id":t,data:n})}_tryJoinRoom(t,n){this._trySendAuthed(Qe(),{op:"join-room","room-id":t,data:n}),delete this._roomsPendingLeave[t]}_tryLeaveRoom(t){this._trySendAuthed(Qe(),{op:"leave-room","room-id":t})}subscribePresence(t,n,s,i){const r=this.joinRoom(n,s.data),o=Object.assign(Object.assign({},s),{roomId:n,cb:i,prev:null});return this._presence[n]=this._presence[n]||{},this._presence[n].handlers=this._presence[n].handlers||[],this._presence[n].handlers.push(o),this._notifyPresenceSub(n,o),()=>{var a,l,u;this._presence[n].handlers=(u=(l=(a=this._presence[n])===null||a===void 0?void 0:a.handlers)===null||l===void 0?void 0:l.filter(c=>c!==o))!==null&&u!==void 0?u:[],r()}}_notifyPresenceSubs(t){var n,s;(s=(n=this._presence[t])===null||n===void 0?void 0:n.handlers)===null||s===void 0||s.forEach(i=>{this._notifyPresenceSub(t,i)})}_notifyPresenceSub(t,n){const s=this.getPresence("",t,n);s&&(n.prev&&!kv(s,n.prev)||(n.prev=s,n.cb(s)))}_patchPresencePeers(t,n){var s,i,r;const o=((i=(s=this._presence[t])===null||s===void 0?void 0:s.result)===null||i===void 0?void 0:i.peers)||{};let a=Object.fromEntries(Object.entries(o).map(([u,c])=>[u,{data:c}]));(r=this._presence[t])===null||r===void 0||r.result;const l=ar(a,u=>{for(let[c,f,p]of n)switch(f){case"+":Cp(u,c,p);break;case"r":fa(u,c,p);break;case"-":hc(u,c);break}delete u[this._sessionId]});this._setPresencePeers(t,l)}_setPresencePeers(t,n){const s=Object.assign({},n);delete s[this._sessionId];const i=Object.fromEntries(Object.entries(s).map(([r,o])=>[r,o.data]));this._presence=ar(this._presence,r=>{fa(r,[t,"result","peers"],i)})}publishTopic({roomType:t,roomId:n,topic:s,data:i}){var r;const o=this._rooms[n];if(o){if(!o.isConnected){this._broadcastQueue[n]=(r=this._broadcastQueue[n])!==null&&r!==void 0?r:[],this._broadcastQueue[n].push({topic:s,roomType:t,data:i});return}this._tryBroadcast(n,t,s,i)}}_tryBroadcast(t,n,s,i){this._trySendAuthed(Qe(),{op:"client-broadcast","room-id":t,roomType:n,topic:s,data:i})}subscribeTopic(t,n,s){const i=this.joinRoom(t);return this._broadcastSubs[t]=this._broadcastSubs[t]||{},this._broadcastSubs[t][n]=this._broadcastSubs[t][n]||[],this._broadcastSubs[t][n].push(s),this._presence[t]=this._presence[t]||{},()=>{this._broadcastSubs[t][n]=this._broadcastSubs[t][n].filter(r=>r!==s),this._broadcastSubs[t][n].length||delete this._broadcastSubs[t][n],i()}}_notifyBroadcastSubs(t,n,s){var i,r,o;(o=(r=(i=this._broadcastSubs)===null||i===void 0?void 0:i[t])===null||r===void 0?void 0:r[n])===null||o===void 0||o.forEach(a=>{var l,u,c,f,p,h;const y=(l=s.data)===null||l===void 0?void 0:l.data,b=s.data["peer-id"]===this._sessionId?(c=(u=this._presence[t])===null||u===void 0?void 0:u.result)===null||c===void 0?void 0:c.user:(h=(p=(f=this._presence[t])===null||f===void 0?void 0:f.result)===null||p===void 0?void 0:p.peers)===null||h===void 0?void 0:h[s.data["peer-id"]];return a(y,b)})}uploadFile(t,n,s){return We(this,void 0,void 0,function*(){var i;const r=yield this.getCurrentUser(),o=(i=r==null?void 0:r.user)===null||i===void 0?void 0:i.refresh_token;return gv(Object.assign(Object.assign({},s),{apiURI:this.config.apiURI,appId:this.config.appId,path:t,file:n,refreshToken:o}))})}deleteFile(t){return We(this,void 0,void 0,function*(){var n;const s=yield this.getCurrentUser(),i=(n=s==null?void 0:s.user)===null||n===void 0?void 0:n.refresh_token;return yield mv({apiURI:this.config.apiURI,appId:this.config.appId,path:t,refreshToken:i})})}upload(t,n){return We(this,void 0,void 0,function*(){var s;const i=yield this.getCurrentUser(),r=(s=i==null?void 0:i.user)===null||s===void 0?void 0:s.refresh_token,o=t||n.name,a=yield yv({apiURI:this.config.apiURI,appId:this.config.appId,fileName:o,refreshToken:r});return yield _v(a,n)})}getDownloadUrl(t){return We(this,void 0,void 0,function*(){var n;const s=yield this.getCurrentUser(),i=(n=s==null?void 0:s.user)===null||n===void 0?void 0:n.refresh_token;return yield bv({apiURI:this.config.apiURI,appId:this.config.appId,path:t,refreshToken:i})})}}class _t{constructor(t,n,s={indexed:!1,unique:!1}){this.valueType=t,this.required=n,this.config=s,this.metadata={}}clientRequired(){return new _t(this.valueType,!1,this.config)}optional(){return new _t(this.valueType,!1,this.config)}unique(){return new _t(this.valueType,this.required,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new _t(this.valueType,this.required,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class gi{constructor(t,n){this.attrs=t,this.links=n}asType(){return new gi(this.attrs,this.links)}}class mi{constructor(t,n,s){this.entities=t,this.links=n,this.rooms=s}withRoomSchema(){return new mi(this.entities,this.links,{})}}function jv(e,t){return new mi(Mc(e,t),t,void 0)}function Dv(e){return new gi(e,{})}function Uv(){return new _t("string",!0)}function Lv(){return new _t("number",!0)}function Nv(){return new _t("boolean",!0)}function Fv(){return new _t("date",!0)}function Wv(){return new _t("json",!0)}function qv(){return new _t("json",!0)}function Mc(e,t){var n,s,i,r;const o={fwd:{},rev:{}};for(const l of Object.values(t))(n=o.fwd)[s=l.forward.on]||(n[s]={}),(i=o.rev)[r=l.reverse.on]||(i[r]={}),o.fwd[l.forward.on][l.forward.label]={entityName:l.reverse.on,cardinality:l.forward.has},o.rev[l.reverse.on][l.reverse.label]={entityName:l.forward.on,cardinality:l.reverse.has};return Object.fromEntries(Object.entries(e).map(([l,u])=>[l,new gi(u.attrs,Object.assign(Object.assign({},o.fwd[l]),o.rev[l]))]))}function Vv({entities:e,links:t,rooms:n}){const s=t??{},i=n??{};return new mi(Mc(e,s),s,i)}const ae={graph:jv,schema:Vv,entity:Dv,string:Uv,number:Lv,boolean:Nv,date:Fv,json:Wv,any:qv};let Es;function Hv(e,t){Es==null||Es.dispose();const n=Gv(t),s=Kv(t,a),i=zv(Bv(e));function r(c){var f;c.source===i.element.contentWindow&&((f=c.data)===null||f===void 0?void 0:f.type)==="close"&&n.isVisible()&&a()}function o(c){const f=c.shiftKey&&c.ctrlKey&&c.key==="0",p=c.key==="Escape"||c.key==="Esc";(f||p&&n.isVisible())&&a()}function a(){n.isVisible()?n.element.style.display="none":(n.element.style.display="block",n.element.contains(i.element)||n.element.appendChild(i.element))}function l(){n.element.remove(),s.element.remove(),removeEventListener("keydown",o),removeEventListener("message",r)}function u(){document.body.appendChild(n.element),document.body.appendChild(s.element),addEventListener("keydown",o),addEventListener("message",r),Es={dispose:l}}return u()}function Bv(e){return`${ro||Ec?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${e}`}function zv(e){const t=document.createElement("iframe");return t.src=e,t.className="instant-devtool-iframe",Object.assign(t.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:t}}function Kv(e,t){const n=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,s=document.createElement("button");return s.innerHTML=n,s.className="instant-devtool-toggler",Object.assign(s.style,Object.assign(Object.assign({position:"fixed"},Qv(e.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),s.addEventListener("click",t),{element:s}}function Qv(e){switch(e){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function Jv(e){switch(e){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function Gv(e){const t=document.createElement("div");Object.assign(t.style,Object.assign(Object.assign({position:"fixed"},Jv(e.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),t.style.display="none",t.className="instant-devtool-container";function n(){return t.style.display!=="none"}return{element:t,isVisible:n}}const Yv={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function Xv(){var e;return globalThis.__instantDbSchemaHashStore=(e=globalThis.__instantDbSchemaHashStore)!==null&&e!==void 0?e:new WeakMap,globalThis.__instantDbSchemaHashStore}function Zv(){var e;return globalThis.__instantDbStore=(e=globalThis.__instantDbStore)!==null&&e!==void 0?e:{},globalThis.__instantDbStore}function _r(e){const t=e.__adminToken;return e.appId+"_"+(e.websocketURI||"default_ws_uri")+"_"+(e.apiURI||"default_api_uri")+"_"+(t||"client_only")}const br=Zv(),Ui=Xv();class eg{constructor(t){this.db=t,this.sendMagicCode=n=>this.db.sendMagicCode(n),this.signInWithMagicCode=n=>this.db.signInWithMagicCode(n),this.signInWithToken=n=>this.db.signInWithCustomToken(n),this.createAuthorizationURL=n=>this.db.createAuthorizationURL(n),this.signInWithIdToken=n=>this.db.signInWithIdToken(n),this.exchangeOAuthCode=n=>this.db.exchangeCodeForToken(n),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(n={invalidateToken:!0})=>this.db.signOut(n)}}class tg{constructor(t){this.db=t,this.uploadFile=(n,s,i={})=>this.db.uploadFile(n,s,i),this.delete=n=>this.db.deleteFile(n),this.upload=(n,s)=>this.db.upload(n,s),this.put=this.upload,this.getDownloadUrl=n=>this.db.getDownloadUrl(n)}}function ng(e){return JSON.parse(JSON.stringify(e))}class sg{constructor(t){this.tx=so(),this._reactor=t,this.auth=new eg(this._reactor),this.storage=new tg(this._reactor)}transact(t){return this._reactor.pushTx(t)}getLocalId(t){return this._reactor.getLocalId(t)}subscribeQuery(t,n,s){return this._reactor.subscribeQuery(t,n,s)}subscribeAuth(t){return this._reactor.subscribeAuth(t)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(t){return this._reactor.subscribeConnectionStatus(t)}joinRoom(t="_defaultRoomType",n="_defaultRoomId",s){return{leaveRoom:this._reactor.joinRoom(n,s==null?void 0:s.initialPresence),subscribeTopic:(r,o)=>this._reactor.subscribeTopic(n,r,o),subscribePresence:(r,o)=>this._reactor.subscribePresence(t,n,r,o),publishTopic:(r,o)=>this._reactor.publishTopic({roomType:t,roomId:n,topic:r,data:o}),publishPresence:r=>this._reactor.publishPresence(t,n,r),getPresence:r=>this._reactor.getPresence(t,n,r)}}shutdown(){delete br[_r(this._reactor.config)],this._reactor.shutdown()}queryOnce(t,n){return this._reactor.queryOnce(t,n)}}function Ea(e){if(!e)return"0";if(Ui.get(e))return Ui.get(e);const t=it(e);return Ui.set(e,t),t}function ig(e,t){return Ea(e._reactor.config.schema)!==Ea(t)}function rg(e,t,n,s){const i=br[_r(e)];if(i)return ig(i,e.schema)&&i._reactor.updateSchema(e.schema),i;const r=new Tv(Object.assign(Object.assign(Object.assign({},Yv),e),{cardinalityInference:!!e.schema}),t||Cc,n||Pc,Object.assign(Object.assign({},s||{}),{"@instantdb/core":Rc})),o=new sg(r);return br[_r(e)]=o,og(e.appId,e.devtool),o}function og(e,t){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof t=="boolean"&&!t)return;const n=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof t=="object"?t:{});n.allowedHosts.includes(window.location.hostname)&&Hv(e,n)}function Gt(e){return Cr()?(Ha(e),!0):!1}function ag(e){return{isLoading:!e,data:void 0,pageInfo:void 0,error:void 0,...e||{}}}function lg(e,t,n,s){const i=te(()=>{let l=Ne(t);const u=Ne(n);return l&&u&&"ruleParams"in u&&(l={$$ruleParams:u.ruleParams,...l}),l?ng(l):null}),r=te(()=>it(i.value)),o=ag(e._reactor.getPreviousResult(i.value)),a={isLoading:z(o.isLoading),data:Bt(o.data),pageInfo:Bt(o.pageInfo),error:Bt(o.error),stop:()=>{}};if(!(s!=null&&s.clientOnlyUseQuery)||e._reactor.querySubs){const l=Be(r,(u,c,f)=>{if(!i.value){s!=null&&s.stopLoadingOnNullQuery&&(a.isLoading.value=!1);return}const p=e.subscribeQuery(i.value,h=>{a.isLoading.value=!h,a.data.value=h.data,a.pageInfo.value=h.pageInfo,a.error.value=h.error});f(p)},{immediate:!0});a.stop=l,Gt(()=>{l()})}return{state:a,query:i}}function cg(){let e=null;function t(s,i){e&&clearTimeout(e),e=setTimeout(i,s)}function n(){e&&clearTimeout(e)}return Gt(()=>{n()}),{set:t,clear:n}}const ug=1e3;function dg(e,t,n){const s=[];function i(){s.forEach(o=>o()),s.length=0}const r=_n(o=>{const a=Ne(t),l=e.id.value,u=Array.isArray(a)?a:[a],c=Array.isArray(n)?n:[n];s.push(...u.map(f=>e._core._reactor.subscribeTopic(l,f,(p,h)=>{c.forEach(y=>{y(p,h,f)})}))),o(i)});return Gt(()=>{r()}),r}function fg(e,t){const n=_n(r=>{const o=e.id.value,a=e._core._reactor.joinRoom(o);r(a)});let s=r=>{};const i=_n(()=>{const r=e.id.value,o=e.type.value,a=Ne(t);s=l=>{e._core._reactor.publishTopic({roomType:o,roomId:r,topic:a,data:l})}});return Gt(()=>{n(),i()}),s}function pg(e,t={}){const n=()=>{const r=e._core._reactor.getPresence(e.type.value,e.id.value,Ne(t))??{peers:{},isLoading:!0};return{peers:r.peers,isLoading:!!r.isLoading,user:r.user,error:r.error}},s={peers:Bt({}),isLoading:z(!1),user:Bt(void 0),error:Bt(void 0)},i=_n(r=>{const o=e.id.value,a=e.type.value,l=Ne(t);Object.entries(n()).forEach(([c,f])=>{s[c].value=f});const u=e._core._reactor.subscribePresence(a,o,l,c=>{Object.entries(c).forEach(([f,p])=>{s[f].value=p})});r(u)});return Gt(()=>{i()}),{...s,publishPresence:r=>{e._core._reactor.publishPresence(e.type.value,e.id.value,r)},stop:i}}function hg(e,t,n){const s=_n(o=>{const a=e.id.value,l=Ne(t),u=e._core._reactor.joinRoom(a,l);o(u)}),i=_n(()=>{const o=e.id.value,a=e.type.value,l=Ne(t);Ne(n),e._core._reactor.publishPresence(a,o,l)});function r(){s(),i()}return Gt(()=>{r()}),r}function vg(e,t,n={}){const s=cg(),i=Ne(t),r=pn.usePresence(e,()=>({keys:[Ne(t)]})),o=te(()=>{var f;const c=e._core._reactor.getPresence(e.type.value,e.id.value);return r.peers.value,(f=Ne(n))!=null&&f.writeOnly?[]:Object.values((c==null?void 0:c.peers)??{}).filter(p=>p[i]===!0)}),a=c=>{const f=Ne(n),p=Ne(t),h=e.id.value,y=e.type.value;e._core._reactor.publishPresence(y,h,{[p]:c}),c&&((f==null?void 0:f.timeout)===null||(f==null?void 0:f.timeout)===0||s.set((f==null?void 0:f.timeout)??ug,()=>{e._core._reactor.publishPresence(y,h,{[p]:null})}))},l=c=>{const f=Ne(n),h=!((f==null?void 0:f.stopOnEnter)&&c.key==="Enter");a(h)};function u(){s.clear()}return Gt(()=>{u()}),{active:o,setActive:a,inputProps:{onKeyDown:l,onBlur:()=>{a(!1)}},stop:u}}const pn={useTopicEffect:dg,usePublishTopic:fg,usePresence:pg,useSyncPresence:hg,useTypingIndicator:vg};class gg{constructor(t,n,s){Ee(this,"_core");Ee(this,"type");Ee(this,"id");Ee(this,"useTopicEffect",(t,n)=>pn.useTopicEffect(this,t,n));Ee(this,"usePublishTopic",t=>pn.usePublishTopic(this,t));Ee(this,"usePresence",(t={})=>pn.usePresence(this,t));Ee(this,"useSyncPresence",(t,n)=>pn.useSyncPresence(this,t,n));Ee(this,"useTypingIndicator",(t,n={})=>pn.useTypingIndicator(this,t,n));this._core=t,this.type=n,this.id=s}}class Ls{constructor(t,n){Ee(this,"tx",so());Ee(this,"auth");Ee(this,"storage");Ee(this,"_core");Ee(this,"getLocalId",t=>this._core.getLocalId(t));Ee(this,"useLocalId",t=>{const n=z(null),s=z(!1);return Wn(()=>{s.value=!0}),_n(async()=>{const i=Ne(t);if(!s)return;const r=await this.getLocalId(i);Ne(t)===i&&(n.value=r)}),n});Ee(this,"rooms",pn);Ee(this,"transact",t=>this._core.transact(t));Ee(this,"useQuery",(t,n)=>lg(this._core,t,n,this.constructor.extra).state);Ee(this,"useAuth",()=>{const t=this._core._reactor._currentUserCached,n={isLoading:z(t.isLoading),user:Bt(t.user),error:Bt(t.error),stop:()=>{}},s=this._core._reactor.subscribeAuth(i=>{n.isLoading.value=!1,n.user.value=i.user,n.error.value=i.error});return n.stop=()=>{s()},Gt(()=>{s()}),n});Ee(this,"getAuth",()=>this._core.getAuth());Ee(this,"useConnectionStatus",()=>{const t=z(this._core._reactor.status),n=this._core.subscribeConnectionStatus(s=>{t.value=s});return Gt(n),t});Ee(this,"queryOnce",(t,n)=>this._core.queryOnce(t,n));const{__extra_vue:s,...i}=t;i.clientOnlyUseQuery&&console.warn("clientOnlyUseQuery is deprecated. use __extra_vue.clientOnlyUseQuery"),this._core=rg(i,this.constructor.Storage,this.constructor.NetworkListener,n),this.auth=this._core.auth,this.storage=this._core.storage,this.constructor.extra={clientOnlyUseQuery:!!(s!=null&&s.clientOnlyUseQuery)||!!i.clientOnlyUseQuery,stopLoadingOnNullQuery:!!(s!=null&&s.stopLoadingOnNullQuery)}}room(t,n){const s=te(()=>Ne(t)||"_defaultRoomType"),i=te(()=>Ne(n)||"_defaultRoomId");return new gg(this._core,s,i)}}Ee(Ls,"Storage"),Ee(Ls,"NetworkListener"),Ee(Ls,"extra");const mg="v0.7.1";function yg(e){return new Ls(e,{"@dorilama/instantdb-vue":mg})}const _g=ae.schema({entities:{$users:ae.entity({email:ae.string().unique().indexed()}),workspaces:ae.entity({name:ae.string(),description:ae.string().optional(),createdAt:ae.date(),updatedAt:ae.date()}),workspace_members:ae.entity({role:ae.string().indexed(),joinedAt:ae.date()}),workspace_invites:ae.entity({email:ae.string().indexed(),role:ae.string(),token:ae.string().unique().indexed(),expiresAt:ae.date(),createdAt:ae.date()}),ingredients:ae.entity({name:ae.string(),category:ae.string().indexed(),type:ae.string().indexed(),unitPrice:ae.number(),totalPrice:ae.number(),amount:ae.number().optional(),unit:ae.string().optional(),mainUnit:ae.string().optional(),totalAmount:ae.number().optional(),instructions:ae.string().optional(),createdAt:ae.date(),updatedAt:ae.date(),workspaceId:ae.string().optional().indexed()}),compound_ingredients:ae.entity({ingredientId:ae.number(),amount:ae.number()}),recipes:ae.entity({name:ae.string(),bartenderName:ae.string(),glass:ae.string(),ice:ae.string(),method:ae.string(),totalCost:ae.number(),status:ae.string().indexed(),createdAt:ae.date(),updatedAt:ae.date(),workspaceId:ae.string().optional().indexed()}),recipe_ingredients:ae.entity({ingredientId:ae.number(),amount:ae.number(),name:ae.string(),unit:ae.string(),unitPrice:ae.number(),type:ae.string()})},links:{compoundIngredientLink:{forward:{on:"compound_ingredients",has:"one",label:"ingredient"},reverse:{on:"ingredients",has:"many",label:"compoundIngredients"}},recipeIngredientLink:{forward:{on:"recipe_ingredients",has:"one",label:"recipe"},reverse:{on:"recipes",has:"many",label:"recipeIngredients"}},userIngredients:{forward:{on:"ingredients",has:"one",label:"$user"},reverse:{on:"$users",has:"many",label:"ingredients"}},userRecipes:{forward:{on:"recipes",has:"one",label:"$user"},reverse:{on:"$users",has:"many",label:"recipes"}},workspaceOwner:{forward:{on:"workspaces",has:"one",label:"$user"},reverse:{on:"$users",has:"many",label:"ownedWorkspaces"}},workspaceMember:{forward:{on:"workspace_members",has:"one",label:"$user"},reverse:{on:"$users",has:"many",label:"workspaceMemberships"}},workspaceMemberWorkspace:{forward:{on:"workspace_members",has:"one",label:"workspace"},reverse:{on:"workspaces",has:"many",label:"members"}},workspaceInviteWorkspace:{forward:{on:"workspace_invites",has:"one",label:"workspace"},reverse:{on:"workspaces",has:"many",label:"invites"}},workspaceInviteInviter:{forward:{on:"workspace_invites",has:"one",label:"inviter"},reverse:{on:"$users",has:"many",label:"sentInvites"}},workspaceIngredients:{forward:{on:"ingredients",has:"one",label:"workspace"},reverse:{on:"workspaces",has:"many",label:"ingredients"}},workspaceRecipes:{forward:{on:"recipes",has:"one",label:"workspace"},reverse:{on:"workspaces",has:"many",label:"recipes"}}}}),bg=void 0;throw new Error("VITE_INSTANT_APP_ID environment variable is required");const fe=yg({appId:bg,schema:_g}),ks=ui("auth",()=>{const e=z(!1),t=z(null),n=z(""),{isLoading:s,user:i,error:r}=fe.useAuth(),o=te(()=>!!i.value),a=async f=>{var p;try{e.value=!0,t.value=null,await fe.auth.sendMagicCode({email:f}),n.value=f}catch(h){throw t.value=((p=h.body)==null?void 0:p.message)||"Failed to send magic code",n.value="",h}finally{e.value=!1}},l=async(f,p)=>{var h;try{e.value=!0,t.value=null,await fe.auth.signInWithMagicCode({email:f,code:p}),n.value=""}catch(y){throw t.value=((h=y.body)==null?void 0:h.message)||"Invalid code",y}finally{e.value=!1}},u=async()=>{var f;try{await fe.auth.signOut(),n.value="",t.value=null}catch(p){throw t.value=((f=p.body)==null?void 0:f.message)||"Failed to sign out",p}},c=()=>{t.value=null};return{isLoading:te(()=>s.value||e.value),user:i,error:te(()=>{var f;return((f=r.value)==null?void 0:f.message)||t.value}),sentEmail:n,isAuthenticated:o,sendMagicCode:a,signInWithMagicCode:l,signOut:u,clearError:c}}),yi=ui("workspaces",()=>{const e=ks(),t=z(null),n=z(!1),s=z(null),i=z({workspaces:[],workspace_members:[]}),r=z(!1),o=z(null),a=async()=>{var k;if((k=e.user)!=null&&k.id)try{r.value=!0,o.value=null;const{data:_}=await fe.queryOnce({workspaces:{$:{where:{$user:e.user.id}}},workspace_members:{$:{where:{$user:e.user.id}},workspace:{}}});i.value={workspaces:(_==null?void 0:_.workspaces)||[],workspace_members:(_==null?void 0:_.workspace_members)||[]}}catch(_){console.error("Failed to load workspaces:",_),o.value=_.message||"Failed to load workspaces"}finally{r.value=!1}},l=te(()=>{if(!e.user)return[];const k=i.value.workspaces||[],_=(i.value.workspace_members||[]).map(V=>V.workspace).filter(Boolean);return[...k,..._].filter((V,P,R)=>P===R.findIndex(Z=>Z.id===V.id))}),u=te(()=>t.value&&l.value.find(k=>k.id===t.value)||null),c=te(()=>!!t.value),f=k=>{var w;if(!((w=e.user)!=null&&w.id))return null;if(i.value.workspaces.some(V=>V.id===k))return"owner";const g=i.value.workspace_members.find(V=>V.workspace.id===k);return(g==null?void 0:g.role)||null},p=async(k,_)=>{var g;if(!e.isAuthenticated||!((g=e.user)!=null&&g.id))throw new Error("Must be authenticated");try{n.value=!0,s.value=null;const w=crypto.randomUUID();return await fe.transact([fe.tx.workspaces[w].update({name:k,description:_||"",createdAt:new Date,updatedAt:new Date}).link({$user:e.user.id})]),await a(),{id:w,name:k,description:_||"",createdAt:new Date,updatedAt:new Date}}catch(w){throw console.error("Error creating workspace:",w),s.value=w.message||"Failed to create workspace",w}finally{n.value=!1}},h=async(k,_)=>{try{n.value=!0,s.value=null,await fe.transact([fe.tx.workspaces[k].update({..._,updatedAt:new Date})])}catch(g){throw s.value=g.message||"Failed to update workspace",g}finally{n.value=!1}},y=async k=>{var g;if(!((g=e.user)!=null&&g.id))throw new Error("Must be authenticated");if(f(k)!=="owner")throw new Error("Only workspace owners can delete workspaces");try{n.value=!0,s.value=null,await fe.transact([fe.tx.workspaces[k].delete()]),t.value===k&&(t.value=null,localStorage.removeItem("currentWorkspaceId")),await a()}catch(w){throw console.error("Error deleting workspace:",w),s.value=w.message||"Failed to delete workspace",w}finally{n.value=!1}},b=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),$=async(k,_,g)=>{if(!e.user)throw new Error("Must be authenticated");try{n.value=!0,s.value=null;const w=b(),V=new Date;return V.setDate(V.getDate()+7),await fe.transact([fe.tx.workspace_invites[fe.id()].update({email:_,role:g,token:w,expiresAt:V,createdAt:new Date}).link({workspace:k,inviter:e.user.id})]),w}catch(w){throw s.value=w.message||"Failed to send invitation",w}finally{n.value=!1}},M=async k=>{var _;if(!e.user)throw new Error("Must be authenticated");try{n.value=!0,s.value=null;const{data:g}=await fe.queryOnce({workspace_invites:{$:{where:{token:k}},workspace:{}}}),w=(_=g==null?void 0:g.workspace_invites)==null?void 0:_[0];if(!w)throw new Error("Invalid invitation token");if(new Date(w.expiresAt)<new Date)throw new Error("Invitation has expired");return await fe.transact([fe.tx.workspace_members[fe.id()].update({role:w.role,joinedAt:new Date}).link({workspace:w.workspace.id,$user:e.user.id}),fe.tx.workspace_invites[w.id].delete()]),w.workspace}catch(g){throw s.value=g.message||"Failed to accept invitation",g}finally{n.value=!1}},T=async k=>{var V;const{data:_}=await fe.queryOnce({workspace_members:{$:{where:{"workspace.id":k}},$user:{}},workspaces:{$:{where:{id:k}},$user:{}}}),g=(_==null?void 0:_.workspace_members)||[],w=(V=_==null?void 0:_.workspaces)==null?void 0:V[0];if(w&&w.$user){const P={id:`owner-${w.id}`,role:"owner",joinedAt:w.createdAt,$user:w.$user};g.some(Z=>Z.$user.id===w.$user.id)||g.unshift(P)}return g},A=async(k,_)=>{try{n.value=!0,s.value=null,await fe.transact([fe.tx.workspace_members[_].delete()])}catch(g){throw s.value=g.message||"Failed to remove member",g}finally{n.value=!1}},O=k=>{t.value=k,localStorage.setItem("currentWorkspaceId",k||"")};Be(()=>e.isAuthenticated,async k=>{k?await a():(i.value={workspaces:[],workspace_members:[]},t.value=null,localStorage.removeItem("currentWorkspaceId"))});const I=async()=>{if(e.isAuthenticated){await a();const k=localStorage.getItem("currentWorkspaceId");k&&l.value.some(_=>_.id===k)&&(t.value=k)}},C=async k=>{if(e.isAuthenticated)if(await a(),k&&l.value.some(_=>_.id===k))t.value=k,localStorage.setItem("currentWorkspaceId",k);else{const _=localStorage.getItem("currentWorkspaceId");_&&l.value.some(g=>g.id===_)&&(t.value=_)}},E=async k=>{if(!e.user)throw new Error("Must be authenticated");try{n.value=!0,s.value=null;const{data:_}=await fe.queryOnce({ingredients:{$:{where:{"$user.id":e.user.id}}},recipes:{$:{where:{"$user.id":e.user.id}}}}),g=((_==null?void 0:_.ingredients)||[]).filter(P=>!P.workspaceId),w=((_==null?void 0:_.recipes)||[]).filter(P=>!P.workspaceId),V=[];for(const P of g)V.push(fe.tx.ingredients[P.id].update({workspaceId:k}));for(const P of w)V.push(fe.tx.recipes[P.id].update({workspaceId:k}));V.length>0&&await fe.transact(V)}catch(_){throw s.value=_.message||"Failed to migrate data",_}finally{n.value=!1}},L=()=>{s.value=null};return{currentWorkspaceId:t,currentWorkspace:u,workspaces:l,isWorkspaceMode:c,isLoading:te(()=>r.value||n.value),error:te(()=>o.value||s.value),createWorkspace:p,updateWorkspace:h,deleteWorkspace:y,inviteToWorkspace:$,acceptInvite:M,getWorkspaceMembers:T,removeMember:A,switchToWorkspace:O,initializeWorkspace:I,migrateDataToWorkspace:E,clearError:L,loadWorkspaces:a,initializeFromUrl:C,getUserRole:f}}),Le=Fn({visible:!1,title:"",percentage:0,subtitle:"",current:0,total:0});function vs(){return{progressState:Le,startImport:(i,r)=>{Le.visible=!0,Le.title=i,Le.total=r,Le.current=0,Le.percentage=0,Le.subtitle=`0 of ${r} items`},updateProgress:(i,r)=>{Le.current=i,Le.percentage=i/Le.total*100,r?Le.subtitle=`${i} of ${Le.total} items - ${r}`:Le.subtitle=`${i} of ${Le.total} items`},completeImport:i=>{Le.percentage=100,Le.subtitle=i||`Completed ${Le.total} items`,setTimeout(()=>{Le.visible=!1},1500)},hideProgress:()=>{Le.visible=!1}}}const Ys={大冰:5,"4x4冰":3,小冰:0,no冰:0},Ss=ui("recipes",()=>{const e=ks(),t=yi(),n=z([]),s=z(!1),i=z(null),r=z(!1),o=z([]),a=te(()=>{var C;return(C=e.user)!=null&&C.id?t.isWorkspaceMode&&t.currentWorkspaceId?{where:{workspaceId:t.currentWorkspaceId}}:{where:{$user:e.user.id}}:{}}),{isLoading:l,error:u,data:c}=fe.useQuery(te(()=>({recipes:{$:a.value,recipeIngredients:{}}})));Be(()=>c.value,()=>{e.isAuthenticated&&c.value&&f()},{deep:!0});const f=()=>{var C;(C=c.value)!=null&&C.recipes&&(n.value=c.value.recipes.map(E=>{const L=[],k=[];return E.recipeIngredients&&E.recipeIngredients.forEach(_=>{const g={id:typeof _.id=="string"?parseInt(_.id)||Date.now():_.id,ingredientId:_.ingredientId,amount:_.amount,name:_.name,unit:_.unit,unitPrice:_.unitPrice};_.type==="garnish"?k.push(g):L.push(g)}),{id:typeof E.id=="string"?parseInt(E.id)||Date.now():E.id,name:E.name,bartenderName:E.bartenderName,glass:E.glass,ice:E.ice,method:E.method,ingredients:L,garnishes:k,totalCost:E.totalCost,status:E.status}}))},p=()=>{const C=localStorage.getItem("recipes");C&&(n.value=JSON.parse(C).map(E=>{const L=E;return{...L,status:L.status||"complete"}}),h())},h=()=>{localStorage.setItem("recipes",JSON.stringify(n.value))},y=async C=>{if(!(!e.isAuthenticated||!e.user))try{const E=new Date().toISOString(),L=crypto.randomUUID(),k=fe.tx.recipes[L].update({name:C.name,bartenderName:C.bartenderName,glass:C.glass,ice:C.ice,method:C.method,totalCost:C.totalCost,status:C.status,createdAt:E,updatedAt:E,workspaceId:t.currentWorkspaceId||null}),_=t.isWorkspaceMode&&t.currentWorkspaceId?k.link({$user:e.user.id,workspace:t.currentWorkspaceId}):k.link({$user:e.user.id});await fe.transact([_,...C.ingredients.map(g=>fe.tx.recipe_ingredients[crypto.randomUUID()].update({ingredientId:g.ingredientId,amount:g.amount,name:g.name,unit:g.unit,unitPrice:g.unitPrice,type:"ingredient"}).link({recipe:L})),...C.garnishes.map(g=>fe.tx.recipe_ingredients[crypto.randomUUID()].update({ingredientId:g.ingredientId,amount:g.amount,name:g.name,unit:g.unit,unitPrice:g.unitPrice,type:"garnish"}).link({recipe:L}))])}catch(E){throw i.value=E.message||"Failed to save to database",console.error("Failed to save recipe to InstantDB:",E),E}},b=async()=>{const C=localStorage.getItem("recipes");if(C&&e.isAuthenticated)try{const E=JSON.parse(C);if(E.length>0)return o.value=E,r.value=!0,new Promise(L=>{const k=Be(r,_=>{_||(k(),L())})})}catch(E){console.error("Failed to parse local recipes data:",E)}},$=async()=>{const{startImport:C,updateProgress:E,completeImport:L}=vs();if(o.value.length>0){C("Migrating recipes to InstantDB",o.value.length);try{for(let k=0;k<o.value.length;k++){const _=o.value[k];await y(_),E(k+1,_.name)}L("Migration completed successfully!")}catch(k){console.error("Failed to migrate recipes to InstantDB:",k),L("Migration completed with some errors")}}localStorage.removeItem("recipes"),o.value=[],r.value=!1},M=()=>{localStorage.removeItem("recipes"),o.value=[],r.value=!1};Be(()=>e.isAuthenticated,async(C,E)=>{C&&!E?(await b(),f()):!C&&E&&(n.value=[],localStorage.removeItem("recipes"))},{immediate:!1}),e.isAuthenticated?b().then(()=>{f()}):p();function T(C){const E={...C,id:Date.now(),status:C.status||"complete"};n.value.push(E),h(),e.isAuthenticated&&y(E)}function A(C){const E=n.value.findIndex(L=>L.id===C.id);E!==-1&&(n.value[E].status==="complete"&&C.status==="draft"&&(C.status="complete"),n.value[E]=C,h(),e.isAuthenticated&&y(C))}function O(C){n.value=n.value.filter(E=>E.id!==C),h(),e.isAuthenticated&&fe.transact(fe.tx.recipes[C].delete())}const I=async C=>{const{startImport:E,updateProgress:L,completeImport:k}=vs();if(n.value=C,e.isAuthenticated&&C.length>0){E("Importing recipes to InstantDB",C.length);try{for(let _=0;_<C.length;_++){const g=C[_];await y(g),L(_+1,g.name)}k("All recipes imported successfully!")}catch(_){console.error("Error importing recipes:",_),k("Import completed with some errors")}}else h()};return{recipes:n,isLoading:te(()=>l.value||s.value),error:te(()=>{var C;return((C=u.value)==null?void 0:C.message)||i.value}),addRecipe:T,updateRecipe:A,removeRecipe:O,loadSavedRecipes:p,saveRecipes:h,importData:I,showMigrationModal:r,migrationData:o,handleMigrationMerge:$,handleMigrationDiscard:M}}),oo=["基酒","利口酒","裝飾","果汁果泥","苦精","酸","甜","調味料","其他"],Sn=ui("ingredients",()=>{const e=ks(),t=yi(),n=z([]),s=z(!1),i=z(null),r=z(!1),o=z([]),a=te(()=>{var g;return(g=e.user)!=null&&g.id?t.isWorkspaceMode&&t.currentWorkspaceId?{where:{workspaceId:t.currentWorkspaceId}}:{where:{$user:e.user.id}}:{}}),{isLoading:l,error:u,data:c}=fe.useQuery(te(()=>({ingredients:{$:a.value,compoundIngredients:{}}}))),f=()=>{var g;(g=c.value)!=null&&g.ingredients&&(n.value=c.value.ingredients.map(w=>{var P;const V={id:typeof w.id=="string"?parseInt(w.id)||Date.now():w.id,name:w.name,category:w.category,type:w.type,unitPrice:w.unitPrice,totalPrice:w.totalPrice};return w.type==="複合材料"?{...V,type:"複合材料",mainUnit:w.mainUnit,ingredients:((P=w.compoundIngredients)==null?void 0:P.map(R=>({ingredientId:R.ingredientId,amount:R.amount})))||[],totalAmount:w.totalAmount??0,instructions:w.instructions||""}:{...V,type:"單一材料",amount:w.amount??0,unit:w.unit}}))},p=()=>{const g=localStorage.getItem("ingredients");if(g){const w=JSON.parse(g);n.value=w.map(V=>{const P=V;let R=P.category;return R==="糖"&&(R="甜"),R==="香料"&&(R="調味料"),P.type==="複合材料"?{id:P.id,name:P.name,category:R,type:"複合材料",mainUnit:P.mainUnit,ingredients:P.ingredients,totalAmount:P.totalAmount,totalPrice:P.totalPrice,unitPrice:P.unitPrice,instructions:P.instructions}:{id:P.id,name:P.name,category:R,type:"單一材料",amount:P.amount,unit:P.unit,totalPrice:P.totalPrice,unitPrice:P.unitPrice}}),h()}},h=()=>{localStorage.setItem("ingredients",JSON.stringify(n.value))},y=async g=>{if(!(!e.isAuthenticated||!e.user))try{const w=new Date().toISOString(),V={name:g.name,category:g.category,type:g.type,unitPrice:g.unitPrice,totalPrice:g.totalPrice,updatedAt:w,workspaceId:t.currentWorkspaceId||null},P=crypto.randomUUID();if(g.type==="單一材料"){const R=fe.tx.ingredients[P].update({...V,amount:g.amount,unit:g.unit,createdAt:w});t.isWorkspaceMode&&t.currentWorkspaceId?await fe.transact(R.link({$user:e.user.id,workspace:t.currentWorkspaceId})):await fe.transact(R.link({$user:e.user.id}))}else{const R=fe.tx.ingredients[P].update({...V,mainUnit:g.mainUnit,totalAmount:g.totalAmount,instructions:g.instructions,createdAt:w}),Z=t.isWorkspaceMode&&t.currentWorkspaceId?R.link({$user:e.user.id,workspace:t.currentWorkspaceId}):R.link({$user:e.user.id});await fe.transact([Z,...g.ingredients.map(B=>fe.tx.compound_ingredients[crypto.randomUUID()].update({ingredientId:B.ingredientId,amount:B.amount}).link({ingredient:P}))])}}catch(w){throw i.value=w.message||"Failed to save to database",console.error("Failed to save ingredient to InstantDB:",w),w}},b=async()=>{const g=localStorage.getItem("ingredients");if(g&&e.isAuthenticated)try{const w=JSON.parse(g);if(w.length>0)return o.value=w,r.value=!0,new Promise(V=>{const P=Be(r,R=>{R||(P(),V())})})}catch(w){console.error("Failed to parse local ingredients data:",w)}},$=async()=>{const{startImport:g,updateProgress:w,completeImport:V}=vs();if(o.value.length>0){g("Migrating ingredients to InstantDB",o.value.length);try{for(let P=0;P<o.value.length;P++){const R=o.value[P];await y(R),w(P+1,R.name)}V("Migration completed successfully!")}catch(P){console.error("Failed to migrate ingredients to InstantDB:",P),V("Migration completed with some errors")}}localStorage.removeItem("ingredients"),o.value=[],r.value=!1},M=()=>{localStorage.removeItem("ingredients"),o.value=[],r.value=!1},T=()=>{n.value.length>0&&localStorage.setItem("ingredients",JSON.stringify(n.value))};Be(()=>e.isAuthenticated,async(g,w)=>{g&&!w?(await b(),f()):!g&&w&&(T(),p())},{immediate:!1}),e.isAuthenticated?f():p();const A=g=>{let w=0,V=0;g.ingredients.forEach(({ingredientId:Z,amount:B})=>{const ie=n.value.find(Pe=>Pe.id===Z);!ie||ie.type!=="單一材料"||(ie.unit===g.mainUnit&&(w+=B),V+=ie.unitPrice*B)});const P=g.totalAmount||w,R=P>0?V/P:0;return{totalAmount:P,totalPrice:V,unitPrice:R}};function O(g){const w=g.totalPrice/g.amount,V={id:Date.now(),type:"單一材料",...g,unitPrice:w};n.value.push(V),h(),e.isAuthenticated&&y(V)}function I(g){const{totalAmount:w,totalPrice:V,unitPrice:P}=A({...g}),R={id:Date.now(),type:"複合材料",...g,totalAmount:w,totalPrice:V,unitPrice:P,instructions:g.instructions};n.value.push(R),h(),e.isAuthenticated&&y(R)}function C(g){const w=n.value.findIndex(V=>V.id===g.id);if(w!==-1){if(g.type==="複合材料"){const V=A(g);g.totalAmount=V.totalAmount,g.totalPrice=V.totalPrice,g.unitPrice=V.unitPrice}else g.unitPrice=g.totalPrice/g.amount;n.value[w]=g,h(),e.isAuthenticated&&y(g)}}function E(g){if(Ss().recipes.some(R=>R.ingredients.some(Z=>Z.ingredientId===g)||R.garnishes.some(Z=>Z.ingredientId===g)))throw new Error("Cannot delete ingredient that is used in recipes");if(n.value.some(R=>R.type==="複合材料"&&R.ingredients.some(Z=>Z.ingredientId===g)))throw new Error("Cannot delete ingredient that is used in compound ingredients");n.value=n.value.filter(R=>R.id!==g),h(),e.isAuthenticated&&fe.transact(fe.tx.ingredients[g].delete())}const L=te(()=>[...n.value].sort((g,w)=>g.name.localeCompare(w.name))),k=te(()=>g=>n.value.find(w=>w.id===g)),_=async g=>{const{startImport:w,updateProgress:V,completeImport:P}=vs();if(n.value=g,e.isAuthenticated&&g.length>0){w("Importing ingredients to InstantDB",g.length);try{for(let R=0;R<g.length;R++){const Z=g[R];await y(Z),V(R+1,Z.name)}P("All ingredients imported successfully!")}catch(R){console.error("Error importing ingredients:",R),P("Import completed with some errors")}}else h()};return Be(()=>e.isAuthenticated,async(g,w)=>{g&&!w?(await b(),f()):!g&&w&&(n.value=[],localStorage.removeItem("ingredients"))},{immediate:!1}),Be(()=>c.value,()=>{e.isAuthenticated&&f()},{deep:!0}),e.isAuthenticated?b().then(()=>{f()}):p(),{ingredients:n,isLoading:te(()=>l.value||s.value),error:te(()=>{var g;return((g=u.value)==null?void 0:g.message)||i.value}),sortedIngredients:L,getIngredientById:k,addSingleIngredient:O,addCompoundIngredient:I,updateIngredient:C,removeIngredient:E,loadSavedIngredients:p,saveIngredients:h,importData:_,showMigrationModal:r,migrationData:o,handleMigrationMerge:$,handleMigrationDiscard:M}}),wg={class:"data-import-export"},kg={class:"link-group"},Sg={class:"import-link"},Ig={key:0,class:"notification"},Og=Fe({__name:"DataImportExport",setup(e){const t=Sn(),n=Ss(),s=z(!1),i=z(""),r=()=>{const a={ingredients:t.ingredients,recipes:n.recipes,version:"1.0",exportDate:new Date().toISOString()},l=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),u=URL.createObjectURL(l),c=document.createElement("a");c.href=u,c.download=`chocolate-list-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),i.value="資料已成功匯出",s.value=!0,setTimeout(()=>{s.value=!1},3e3)},o=async a=>{var f;const l=a.target;if(!((f=l.files)!=null&&f.length))return;const u=l.files[0],c=new FileReader;c.onload=async p=>{var h;try{const y=JSON.parse((h=p.target)==null?void 0:h.result);if(!y.ingredients||!y.recipes||!Array.isArray(y.ingredients)||!Array.isArray(y.recipes))throw new Error("無效的資料格式");await t.importData(y.ingredients),await n.importData(y.recipes),i.value="資料已成功匯入",s.value=!0,setTimeout(()=>{s.value=!1},3e3),l.value=""}catch(y){console.error("Import error:",y),i.value=y instanceof Error?`匯入失敗：${y.message}`:"匯入失敗：無效的資料格式",s.value=!0,setTimeout(()=>{s.value=!1},3e3)}},c.readAsText(u)};return(a,l)=>(D(),W("div",wg,[d("div",kg,[d("a",{href:"#",class:"export-link",onClick:lt(r,["prevent"])}," 匯出資料 "),d("label",Sg,[l[0]||(l[0]=Te(" 匯入資料 ")),d("input",{type:"file",accept:".json",onChange:o,class:"file-input"},null,32)])]),s.value?(D(),W("div",Ig,q(i.value),1)):pe("",!0)]))}}),ze=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},$g=ze(Og,[["__scopeId","data-v-829bda11"]]),Cg={class:"footer"},Pg={class:"footer-content"},xg=Fe({__name:"Footer",setup(e){return(t,n)=>(D(),W("footer",Cg,[d("div",Pg,[Ce($g)])]))}}),Eg=ze(xg,[["__scopeId","data-v-bfdab2af"]]),Ag={class:"auth-container"},Rg={class:"auth-card"},Mg={key:0,class:"loading"},Tg={key:1,class:"error"},jg={key:2,class:"authenticated"},Dg={key:3,class:"email-step"},Ug={key:4,class:"code-step"},Lg=Fe({__name:"AuthLogin",setup(e){const t=ks(),n=z(null),s=r=>{r.preventDefault();const a=r.target.querySelector('input[type="email"]').value;t.sendMagicCode(a)},i=r=>{r.preventDefault();const a=r.target.querySelector('input[type="text"]').value;t.signInWithMagicCode(t.sentEmail,a)};return(r,o)=>{var a;return D(),W("div",Ag,[d("div",Rg,[se(t).isLoading?(D(),W("div",Mg,"Loading...")):se(t).error?(D(),W("div",Tg,[Te(q(se(t).error)+" ",1),d("button",{onClick:o[0]||(o[0]=l=>se(t).clearError()),class:"retry-btn"},"Try Again")])):se(t).isAuthenticated?(D(),W("div",jg,[d("h2",null,"Welcome, "+q((a=se(t).user)==null?void 0:a.email)+"!",1),d("button",{onClick:o[1]||(o[1]=l=>se(t).signOut()),class:"sign-out-btn"},"Sign Out")])):se(t).sentEmail?(D(),W("div",Ug,[d("form",{onSubmit:i},[o[5]||(o[5]=d("h2",null,"Enter your code",-1)),d("p",null,[o[3]||(o[3]=Te(" We sent an email to ")),d("strong",null,q(se(t).sentEmail),1),o[4]||(o[4]=Te(". Check your email and paste the code you see. "))]),d("input",{ref_key:"inputRef",ref:n,type:"text",placeholder:"123456...",required:"",autofocus:"",class:"code-input"},null,512),o[6]||(o[6]=d("button",{type:"submit",class:"submit-btn"},"Verify Code",-1))],32)])):(D(),W("div",Dg,[d("form",{onSubmit:s},o[2]||(o[2]=[d("h2",null,"Let's log you in",-1),d("p",null,"Enter your email, and we'll send you a verification code.",-1),d("input",{type:"email",placeholder:"Enter your email",required:"",autofocus:"",class:"email-input"},null,-1),d("button",{type:"submit",class:"submit-btn"},"Send Code",-1)]),32)]))])])}}}),Ng=ze(Lg,[["__scopeId","data-v-575ba400"]]),Fg={class:"modal-content"},Wg={class:"options"},qg={class:"option"},Vg={class:"option-description"},Hg={class:"option"},Bg={class:"option-description"},zg=Fe({__name:"MigrationModal",props:{show:{type:Boolean},itemCount:{},itemType:{}},emits:["merge","discard"],setup(e,{emit:t}){const n=t,s=()=>{n("merge")},i=()=>{n("discard")};return(r,o)=>r.show?(D(),W("div",{key:0,class:"modal-overlay",onClick:i},[d("div",{class:"modal",onClick:o[0]||(o[0]=lt(()=>{},["stop"]))},[o[5]||(o[5]=d("div",{class:"modal-header"},[d("h3",null,"Local Data Found")],-1)),d("div",Fg,[d("p",null,[o[1]||(o[1]=Te(" You have ")),d("strong",null,q(r.itemCount),1),Te(" "+q(r.itemType)+" stored locally. ",1)]),o[4]||(o[4]=d("p",null,"What would you like to do with this data?",-1)),d("div",Wg,[d("div",qg,[o[2]||(o[2]=d("strong",null,"Merge with online data",-1)),d("p",Vg,"Add your local "+q(r.itemType)+" to your cloud storage",1)]),d("div",Hg,[o[3]||(o[3]=d("strong",null,"Use only online data",-1)),d("p",Bg,"Discard local "+q(r.itemType)+" and use only cloud data",1)])])]),d("div",{class:"modal-footer"},[d("button",{class:"btn btn-secondary",onClick:i},"Use Online Only"),d("button",{class:"btn btn-primary",onClick:s},"Merge Data")])])])):pe("",!0)}}),Aa=ze(zg,[["__scopeId","data-v-9f4b8e3b"]]),Kg={key:0,class:"progress-toast"},Qg={class:"progress-content"},Jg={class:"progress-text"},Gg={class:"progress-title"},Yg={class:"progress-percentage"},Xg={class:"progress-bar-container"},Zg={key:0,class:"progress-subtitle"},em=Fe({__name:"ProgressToast",props:{visible:{type:Boolean},title:{},percentage:{},subtitle:{}},setup(e){return(t,n)=>t.visible?(D(),W("div",Kg,[d("div",Qg,[d("div",Jg,[d("span",Gg,q(t.title),1),d("span",Yg,q(Math.round(t.percentage))+"%",1)]),d("div",Xg,[d("div",{class:"progress-bar",style:ti({width:`${t.percentage}%`})},null,4)]),t.subtitle?(D(),W("div",Zg,q(t.subtitle),1)):pe("",!0)])])):pe("",!0)}}),tm=ze(em,[["__scopeId","data-v-52d40554"]]),nm={class:"dialog-content"},sm={class:"form-group"},im={class:"form-group"},rm={class:"form-actions"},om=["disabled"],am={key:0,class:"pending-invites"},lm={class:"invite-list"},cm={class:"invite-info"},um={class:"invite-email"},dm={class:"invite-details"},fm={class:"invite-role"},pm={class:"invite-expires"},hm={class:"invite-actions"},vm=["onClick"],gm=["onClick"],mm={key:1,class:"current-members"},ym={class:"member-list"},_m={class:"member-info"},bm={class:"member-email"},wm={class:"member-role"},km={key:0,class:"member-actions"},Sm=["onClick","disabled"],Im={key:0,class:"success-message"},Om={key:1,class:"error-message"},$m=Fe({__name:"WorkspaceInviteDialog",props:{isOpen:{type:Boolean},workspaceId:{}},emits:["close"],setup(e,{emit:t}){const n=e,s=t,i=yi(),{isLoading:r,error:o,inviteToWorkspace:a,getWorkspaceMembers:l,removeMember:u,clearError:c}=i,f=z({email:"",role:"editor"}),p=z([]),h=z([]),y=z(""),b=()=>{s("close"),f.value={email:"",role:"editor"},y.value="",c()},$=async()=>{if(n.workspaceId)try{const E=await a(n.workspaceId,f.value.email.trim(),f.value.role);y.value=`Invitation sent! Token: ${E}`,f.value={email:"",role:"editor"},await I()}catch(E){console.error("Failed to send invitation:",E)}},M=async E=>{try{await navigator.clipboard.writeText(E),y.value="Invitation token copied to clipboard!",setTimeout(()=>{y.value=""},3e3)}catch(L){console.error("Failed to copy token:",L)}},T=async E=>{console.log("Revoking invite:",E)},A=async E=>{if(n.workspaceId&&confirm("Are you sure you want to remove this member?"))try{await u(n.workspaceId,E),await O()}catch(L){console.error("Failed to remove member:",L)}},O=async()=>{if(n.workspaceId)try{const E=await l(n.workspaceId);p.value=E}catch(E){console.error("Failed to load members:",E)}},I=async()=>{n.workspaceId&&(h.value=[])},C=E=>new Date(E).toLocaleDateString();return Be(()=>n.isOpen,E=>{E&&n.workspaceId&&(O(),I())}),Wn(()=>{n.isOpen&&n.workspaceId&&(O(),I())}),(E,L)=>E.isOpen?(D(),W("div",{key:0,class:"dialog-overlay",onClick:b},[d("div",{class:"dialog",onClick:L[3]||(L[3]=lt(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[L[4]||(L[4]=d("h3",null,"Invite Members",-1)),d("button",{class:"btn-icon",onClick:b},"×")]),d("div",nm,[d("form",{onSubmit:lt($,["prevent"]),class:"invite-form"},[d("div",sm,[L[5]||(L[5]=d("label",{for:"invite-email"},"Email Address *",-1)),ye(d("input",{id:"invite-email","onUpdate:modelValue":L[0]||(L[0]=k=>f.value.email=k),type:"email",required:"",placeholder:"Enter email address"},null,512),[[Me,f.value.email]])]),d("div",im,[L[7]||(L[7]=d("label",{for:"invite-role"},"Role *",-1)),ye(d("select",{id:"invite-role","onUpdate:modelValue":L[1]||(L[1]=k=>f.value.role=k),required:""},L[6]||(L[6]=[d("option",{value:"editor"},"Editor - Can create and edit content",-1),d("option",{value:"viewer"},"Viewer - Can only view content",-1)]),512),[[cn,f.value.role]])]),d("div",rm,[d("button",{type:"submit",class:"btn-primary",disabled:se(r)||!f.value.email.trim()},q(se(r)?"Sending...":"Send Invitation"),9,om)])],32),h.value.length>0?(D(),W("div",am,[L[8]||(L[8]=d("h4",null,"Pending Invitations",-1)),d("div",lm,[(D(!0),W(ge,null,Ae(h.value,k=>(D(),W("div",{key:k.id,class:"invite-item"},[d("div",cm,[d("div",um,q(k.email),1),d("div",dm,[d("span",fm,q(k.role),1),d("span",pm," Expires "+q(C(k.expiresAt)),1)])]),d("div",hm,[d("button",{class:"btn-copy",onClick:_=>M(k.token),title:"Copy invitation token"}," Copy Token ",8,vm),d("button",{class:"btn-danger-small",onClick:_=>T(k.id),title:"Revoke invitation"}," Revoke ",8,gm)])]))),128))])])):pe("",!0),p.value.length>0?(D(),W("div",mm,[L[9]||(L[9]=d("h4",null,"Current Members",-1)),d("div",ym,[(D(!0),W(ge,null,Ae(p.value,k=>(D(),W("div",{key:k.id,class:"member-item"},[d("div",_m,[d("div",bm,q(k.$user.email),1),d("div",wm,q(k.role),1)]),k.role!=="owner"?(D(),W("div",km,[d("button",{class:"btn-danger-small",onClick:_=>A(k.id),title:"Remove member",disabled:se(r)}," Remove ",8,Sm)])):pe("",!0)]))),128))])])):pe("",!0)]),y.value?(D(),W("div",Im,q(y.value),1)):pe("",!0),se(o)?(D(),W("div",Om,[Te(q(se(o))+" ",1),d("button",{onClick:L[2]||(L[2]=(...k)=>se(c)&&se(c)(...k))},"×")])):pe("",!0)])])):pe("",!0)}}),Cm=ze($m,[["__scopeId","data-v-eb14f58f"]]),Pm={class:"app"},xm={class:"header-content"},Em={class:"nav-links"},Am={key:0,class:"workspace-dropdown"},Rm={class:"workspace-name"},Mm={key:0,class:"workspace-menu"},Tm={class:"workspace-section"},jm=["onClick"],Dm={class:"workspace-option-name"},Um={class:"workspace-option-role"},Lm={class:"workspace-actions"},Nm={key:0,class:"user-info"},Fm={class:"user-email"},Wm={class:"main-container"},qm={key:0,class:"loading-state"},Vm={key:1},Hm={key:0,class:"offline-banner"},Bm={class:"offline-message"},zm={class:"form-group"},Km={class:"form-group"},Qm={class:"form-group"},Jm={class:"dialog-actions"},Gm=["disabled"],Ym={class:"form-group"},Xm={class:"dialog-actions"},Zm=["disabled"],ey={class:"dialog-content"},ty={class:"delete-warning"},ny={class:"warning-content"},sy={class:"warning-message"},iy={class:"dialog-actions"},ry=["disabled"],oy=Fe({__name:"App",setup(e){const t=pp(),n=fp(),s=ks(),i=Sn(),r=Ss(),o=yi(),a=z(!1),l=z(!1),u=z(!1),c=z(!1),f=z(!1),p=z(!1),h=z({name:"",description:""}),y=z(!1),b=z(""),$=z(null),{progressState:M}=vs(),T=te(()=>o.workspaces),A=te(()=>o.currentWorkspace),O=te(()=>o.currentWorkspaceId),{switchToWorkspace:I,createWorkspace:C,deleteWorkspace:E,acceptInvite:L,migrateDataToWorkspace:k,initializeFromUrl:_,getUserRole:g}=o,w=te(()=>{var ee;return((ee=A.value)==null?void 0:ee.name)||"Personal Workspace"}),V=()=>{I(null),l.value=!1;const ee={...t.query};delete ee.workspace,n.push({path:t.path,query:ee}).catch(()=>{})},P=ee=>{I(ee),l.value=!1;const F={...t.query,workspace:ee};n.push({path:t.path,query:F}).catch(()=>{})},R=async()=>{try{const ee=await C(h.value.name.trim(),h.value.description.trim());if(y.value&&(ee!=null&&ee.id)&&await k(ee.id),ce(),ee!=null&&ee.id){I(ee.id);const F={...t.query,workspace:ee.id};n.push({path:t.path,query:F}).catch(()=>{})}}catch(ee){console.error("Failed to create workspace:",ee)}},Z=async()=>{try{const ee=await L(b.value.trim());if(xe(),ee!=null&&ee.id){I(ee.id);const F={...t.query,workspace:ee.id};n.push({path:t.path,query:F}).catch(()=>{})}}catch(ee){console.error("Failed to accept invitation:",ee)}},B=(ee,F)=>{$.value={id:ee,name:F},p.value=!0,l.value=!1},ie=async()=>{if($.value)try{if(await E($.value.id),p.value=!1,$.value=null,O.value===null){const ee={...t.query};delete ee.workspace,n.push({path:t.path,query:ee}).catch(()=>{})}}catch(ee){console.error("Failed to delete workspace:",ee)}},Pe=()=>{p.value=!1,$.value=null},ce=()=>{u.value=!1,h.value={name:"",description:""},y.value=!1},xe=()=>{c.value=!1,b.value=""},Ue=ee=>{ee.target.closest(".workspace-dropdown")||(l.value=!1)};return Be(()=>t.query.workspace,async ee=>{const F=ee;F!==O.value&&s.isAuthenticated&&await _(F)},{immediate:!1}),Be(()=>s.isAuthenticated,async ee=>{if(!ee&&t.query.workspace){const F={...t.query};delete F.workspace,n.replace({path:t.path,query:F}).catch(()=>{})}}),Wn(async()=>{document.addEventListener("click",Ue);const ee=t.query.workspace;s.isAuthenticated?await _(ee):await o.initializeWorkspace()}),Lr(()=>{document.removeEventListener("click",Ue)}),(ee,F)=>{var Dt,qe;return D(),W("div",Pm,[d("header",null,[d("div",xm,[F[23]||(F[23]=d("h1",null,"酒譜資料庫",-1)),d("nav",null,[d("div",Em,[Ce(se(tr),{to:"/",class:"nav-link"},{default:Vi(()=>F[18]||(F[18]=[Te("酒譜一覽")])),_:1,__:[18]}),Ce(se(tr),{to:"/ingredients",class:"nav-link"},{default:Vi(()=>F[19]||(F[19]=[Te("材料一覽")])),_:1,__:[19]}),se(s).isAuthenticated?(D(),W("div",Am,[d("button",{class:"workspace-trigger",onClick:F[0]||(F[0]=x=>l.value=!l.value)},[d("span",Rm,q(w.value),1),F[20]||(F[20]=d("span",{class:"dropdown-arrow"},"▼",-1))]),l.value?(D(),W("div",Mm,[d("div",Tm,[F[22]||(F[22]=d("div",{class:"workspace-section-title"},"Workspaces",-1)),d("div",{class:bt(["workspace-option",{active:!O.value}]),onClick:V},F[21]||(F[21]=[d("span",{class:"workspace-option-name"},"Personal Workspace",-1),d("span",{class:"workspace-option-role"},"Owner",-1)]),2),(D(!0),W(ge,null,Ae(T.value,x=>(D(),W("div",{key:x.id,class:bt(["workspace-option",{active:O.value===x.id}]),onClick:X=>P(x.id)},[d("span",Dm,q(x.name),1),d("span",Um,q(se(g)(x.id)||"Member"),1)],10,jm))),128))]),d("div",Lm,[d("button",{class:"workspace-action-btn",onClick:F[1]||(F[1]=x=>u.value=!0)}," ➕ Create Workspace "),d("button",{class:"workspace-action-btn",onClick:F[2]||(F[2]=x=>c.value=!0)}," 🔗 Join Workspace "),O.value?(D(),W("button",{key:0,class:"workspace-action-btn",onClick:F[3]||(F[3]=x=>f.value=!0)}," 📧 Invite Members ")):pe("",!0),O.value&&se(g)(O.value)==="owner"?(D(),W("button",{key:1,class:"workspace-action-btn workspace-delete-btn",onClick:F[4]||(F[4]=x=>B(O.value,w.value))}," 🗑️ Delete Workspace ")):pe("",!0)])])):pe("",!0)])):pe("",!0)]),se(s).isAuthenticated?(D(),W("div",Nm,[d("span",Fm,q((Dt=se(s).user)==null?void 0:Dt.email),1),d("button",{onClick:F[5]||(F[5]=x=>se(s).signOut()),class:"sign-out-btn"},"Sign Out")])):pe("",!0)])])]),d("div",Wm,[se(s).isLoading?(D(),W("div",qm,F[24]||(F[24]=[d("div",{class:"loading-spinner"},null,-1),d("p",null,"Loading...",-1)]))):(D(),W("div",Vm,[se(s).isAuthenticated?pe("",!0):(D(),W("div",Hm,[d("div",Bm,[F[25]||(F[25]=d("span",null,"📴 離線模式 - 資料僅儲存在本地端",-1)),d("button",{onClick:F[6]||(F[6]=x=>a.value=!0),class:"auth-suggestion-btn"}," 登入以同步資料 ")])])),a.value&&!se(s).isAuthenticated?(D(),W("div",{key:1,class:"auth-overlay",onClick:F[9]||(F[9]=x=>a.value=!1)},[d("div",{class:"auth-dialog",onClick:F[8]||(F[8]=lt(()=>{},["stop"]))},[d("button",{class:"close-auth",onClick:F[7]||(F[7]=x=>a.value=!1)},"×"),Ce(Ng)])])):pe("",!0),Ce(se(sc))]))]),Ce(Aa,{show:se(i).showMigrationModal,"item-count":se(i).migrationData.length,"item-type":"ingredients",onMerge:se(i).handleMigrationMerge,onDiscard:se(i).handleMigrationDiscard},null,8,["show","item-count","onMerge","onDiscard"]),Ce(Aa,{show:se(r).showMigrationModal,"item-count":se(r).migrationData.length,"item-type":"recipes",onMerge:se(r).handleMigrationMerge,onDiscard:se(r).handleMigrationDiscard},null,8,["show","item-count","onMerge","onDiscard"]),Ce(tm,{visible:se(M).visible,title:se(M).title,percentage:se(M).percentage,subtitle:se(M).subtitle},null,8,["visible","title","percentage","subtitle"]),u.value?(D(),W("div",{key:0,class:"dialog-overlay",onClick:ce},[d("div",{class:"dialog",onClick:F[13]||(F[13]=lt(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[F[26]||(F[26]=d("h3",null,"Create New Workspace",-1)),d("button",{class:"btn-icon",onClick:ce},"×")]),d("form",{onSubmit:lt(R,["prevent"]),class:"dialog-content"},[d("div",zm,[F[27]||(F[27]=d("label",{for:"workspace-name"},"Workspace Name *",-1)),ye(d("input",{id:"workspace-name","onUpdate:modelValue":F[10]||(F[10]=x=>h.value.name=x),type:"text",required:"",placeholder:"Enter workspace name"},null,512),[[Me,h.value.name]])]),d("div",Km,[F[28]||(F[28]=d("label",{for:"workspace-description"},"Description",-1)),ye(d("textarea",{id:"workspace-description","onUpdate:modelValue":F[11]||(F[11]=x=>h.value.description=x),placeholder:"Optional workspace description",rows:"3"},null,512),[[Me,h.value.description]])]),d("div",Qm,[d("label",null,[ye(d("input",{type:"checkbox","onUpdate:modelValue":F[12]||(F[12]=x=>y.value=x)},null,512),[[Qd,y.value]]),F[29]||(F[29]=Te(" Transfer my personal data to this workspace "))]),F[30]||(F[30]=d("p",{class:"form-help"}," This will move your existing ingredients and recipes to the new workspace ",-1))]),d("div",Jm,[d("button",{type:"button",class:"btn-secondary",onClick:ce},"Cancel"),d("button",{type:"submit",class:"btn-primary",disabled:!h.value.name.trim()}," Create Workspace ",8,Gm)])],32)])])):pe("",!0),c.value?(D(),W("div",{key:1,class:"dialog-overlay",onClick:xe},[d("div",{class:"dialog",onClick:F[15]||(F[15]=lt(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[F[31]||(F[31]=d("h3",null,"Join Workspace",-1)),d("button",{class:"btn-icon",onClick:xe},"×")]),d("form",{onSubmit:lt(Z,["prevent"]),class:"dialog-content"},[d("div",Ym,[F[32]||(F[32]=d("label",{for:"invite-token"},"Invitation Token *",-1)),ye(d("input",{id:"invite-token","onUpdate:modelValue":F[14]||(F[14]=x=>b.value=x),type:"text",required:"",placeholder:"Enter invitation token"},null,512),[[Me,b.value]]),F[33]||(F[33]=d("p",{class:"form-help"},"Ask a workspace member for an invitation token",-1))]),d("div",Xm,[d("button",{type:"button",class:"btn-secondary",onClick:xe},"Cancel"),d("button",{type:"submit",class:"btn-primary",disabled:!b.value.trim()}," Join Workspace ",8,Zm)])],32)])])):pe("",!0),Ce(Cm,{"is-open":f.value,"workspace-id":O.value,onClose:F[16]||(F[16]=x=>f.value=!1)},null,8,["is-open","workspace-id"]),p.value?(D(),W("div",{key:2,class:"dialog-overlay",onClick:Pe},[d("div",{class:"dialog delete-dialog",onClick:F[17]||(F[17]=lt(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[F[34]||(F[34]=d("h3",null,"Delete Workspace",-1)),d("button",{class:"btn-icon",onClick:Pe},"×")]),d("div",ey,[d("div",ty,[F[39]||(F[39]=d("div",{class:"warning-icon"},"⚠️",-1)),d("div",ny,[F[37]||(F[37]=d("p",{class:"warning-title"},"This action cannot be undone",-1)),d("p",sy,[F[35]||(F[35]=Te(" Are you sure you want to delete ")),d("strong",null,'"'+q((qe=$.value)==null?void 0:qe.name)+'"',1),F[36]||(F[36]=Te("? "))]),F[38]||(F[38]=d("p",{class:"warning-details"}," All workspace data including recipes, ingredients, and member access will be permanently removed. ",-1))])])]),d("div",iy,[d("button",{type:"button",class:"btn-secondary",onClick:Pe},"Cancel"),d("button",{type:"button",class:"btn-danger",onClick:ie,disabled:se(o).isLoading},q(se(o).isLoading?"Deleting...":"Delete Workspace"),9,ry)])])])):pe("",!0),Ce(Eg)])}}}),ay=ze(oy,[["__scopeId","data-v-17f206d8"]]),ly={class:"dialog-overlay"},cy={class:"dialog"},uy={class:"dialog-header"},dy={class:"header-content"},fy={class:"bartender"},py={class:"dialog-content"},hy={class:"section"},vy={class:"content-card"},gy={class:"ingredients-list"},my={class:"ingredient-name"},yy={class:"ingredient-amount"},_y={class:"section"},by={class:"content-card"},wy={class:"method-value"},ky={class:"section"},Sy={class:"content-card"},Iy={class:"presentation-list"},Oy={class:"detail-item"},$y={class:"detail-item"},Cy={class:"detail-item"},Py={class:"garnishes-list"},xy={class:"dialog-footer"},Ey={class:"total-cost"},Ay={class:"total-cost-value"},Ry={class:"button-group"},My=Fe({__name:"RecipeDetailDialog",props:{recipe:{}},emits:["close","edit","delete"],setup(e,{emit:t}){const n=t;return(s,i)=>(D(),W("div",ly,[d("div",cy,[d("div",uy,[d("div",dy,[d("h2",null,q(s.recipe.name),1),d("div",fy,q(s.recipe.bartenderName),1)]),d("button",{class:"close-btn",onClick:i[0]||(i[0]=r=>n("close"))},"✕")]),d("div",py,[d("div",hy,[i[3]||(i[3]=d("h3",null,"酒體材料",-1)),d("div",vy,[d("div",gy,[(D(!0),W(ge,null,Ae(s.recipe.ingredients,r=>(D(),W("div",{key:r.id,class:"ingredient-item"},[d("span",my,q(r.name),1),d("span",yy,q(r.amount)+" "+q(r.unit),1)]))),128))])])]),d("div",_y,[i[4]||(i[4]=d("h3",null,"作法",-1)),d("div",by,[d("div",wy,q(s.recipe.method),1)])]),d("div",ky,[i[8]||(i[8]=d("h3",null,"呈現",-1)),d("div",Sy,[d("div",Iy,[d("div",Oy,[i[5]||(i[5]=d("span",{class:"label"},"杯子",-1)),d("span",null,q(s.recipe.glass),1)]),d("div",$y,[i[6]||(i[6]=d("span",{class:"label"},"冰塊",-1)),d("span",null,q(s.recipe.ice),1)]),d("div",Cy,[i[7]||(i[7]=d("span",{class:"label"},"裝飾物",-1)),d("div",Py,[(D(!0),W(ge,null,Ae(s.recipe.garnishes,r=>(D(),W("div",{key:r.id,class:"garnish-item"},q(r.name)+" "+q(r.amount)+" "+q(r.unit),1))),128))])])])])])]),d("div",xy,[d("div",Ey,[i[9]||(i[9]=d("span",{class:"total-cost-label"},"總成本：",-1)),d("span",Ay,"$"+q(s.recipe.totalCost.toFixed(2)),1)]),d("div",Ry,[d("button",{class:"edit-btn",onClick:i[1]||(i[1]=r=>n("edit",s.recipe))},"修改內容"),d("button",{class:"delete-btn",onClick:i[2]||(i[2]=r=>n("delete",s.recipe.id))},"刪除酒譜")])])])]))}}),Ty=ze(My,[["__scopeId","data-v-03f4856b"]]),jy={class:"ingredient-input"},Dy={class:"input-group"},Uy={class:"search-container"},Ly={key:0,class:"dropdown"},Ny=["onClick"],Fy={class:"ingredient-name"},Wy={class:"ingredient-type"},qy={class:"amount-input"},Vy=["placeholder"],Hy={key:0,class:"unit"},By={key:0,class:"subtotal"},zy=Fe({__name:"IngredientInput",props:{ingredients:{},initialIngredient:{},initialAmount:{},showDelete:{type:Boolean}},emits:["update","remove"],setup(e,{emit:t}){var h;const n=e,s=t,i=z(n.initialIngredient||null),r=z(n.initialAmount||0),o=z(!1),a=z(((h=i.value)==null?void 0:h.name)||""),l=te(()=>{if(!a.value)return n.ingredients;const y=a.value.toLowerCase();return n.ingredients.filter(b=>b.name.toLowerCase().includes(y))}),u=y=>y.type==="單一材料"?y.unit:y.mainUnit,c=y=>{i.value=y,o.value=!1,a.value=y.name,s("update",{ingredient:y,amount:r.value})},f=y=>{const b=y.target,$=parseFloat(b.value);r.value=$,i.value&&s("update",{ingredient:i.value,amount:$})},p=te(()=>!i.value||!r.value?0:i.value.unitPrice*r.value);return(y,b)=>(D(),W("div",jy,[d("div",Dy,[d("div",Uy,[ye(d("input",{"onUpdate:modelValue":b[0]||(b[0]=$=>a.value=$),onFocus:b[1]||(b[1]=$=>o.value=!0),type:"text",placeholder:"選擇材料"},null,544),[[Me,a.value]]),o.value?(D(),W("div",Ly,[(D(!0),W(ge,null,Ae(l.value,$=>(D(),W("div",{key:$.id,class:"dropdown-item",onClick:M=>c($)},[d("span",Fy,q($.name),1),d("span",Wy,q($.type),1)],8,Ny))),128))])):pe("",!0)]),d("div",qy,[ye(d("input",{"onUpdate:modelValue":b[2]||(b[2]=$=>r.value=$),type:"number",min:"0",step:"1",onInput:b[3]||(b[3]=$=>f($)),placeholder:i.value?"輸入"+u(i.value)+"數":"數量"},null,40,Vy),[[Me,r.value,void 0,{number:!0}]]),i.value?(D(),W("span",Hy,q(u(i.value)),1)):pe("",!0)]),n.showDelete?(D(),W("button",{key:0,type:"button",class:"remove-btn",onClick:b[4]||(b[4]=$=>s("remove"))}," ✕ ")):pe("",!0)]),i.value&&r.value>0?(D(),W("div",By," 小計: $"+q(p.value.toFixed(2)),1)):pe("",!0)]))}}),wr=ze(zy,[["__scopeId","data-v-79df9427"]]),Ky={class:"dialog-overlay"},Qy={class:"dialog"},Jy={class:"dialog-header"},Gy={class:"dialog-content"},Yy={class:"form-section"},Xy={class:"form-card"},Zy={class:"form-group"},e_={class:"form-group"},t_={class:"form-section"},n_={class:"form-card"},s_={class:"ingredients-list"},i_={class:"form-section"},r_={class:"form-card"},o_={class:"form-group"},a_=["value"],l_={class:"form-section"},c_={class:"form-card"},u_={class:"form-group"},d_={class:"form-group"},f_={class:"ice-options"},p_=["value","onUpdate:modelValue"],h_={class:"radio-text"},v_={class:"form-group"},g_={class:"garnishes-list"},m_={class:"dialog-footer"},y_={class:"cost-display"},__={class:"cost-amount"},b_={class:"button-group"},w_=Fe({__name:"RecipeForm",props:{ingredients:{},initialRecipe:{},mode:{}},emits:["save","cancel"],setup(e,{emit:t}){var A,O,I,C,E,L;const n=e,s=t,i=z({name:((A=n.initialRecipe)==null?void 0:A.name)||"",bartenderName:((O=n.initialRecipe)==null?void 0:O.bartenderName)||"",glass:((I=n.initialRecipe)==null?void 0:I.glass)||"",ice:((C=n.initialRecipe)==null?void 0:C.ice)||"no冰",method:((E=n.initialRecipe)==null?void 0:E.method)||"shake",ingredients:[],garnishes:[],totalCost:0,status:((L=n.initialRecipe)==null?void 0:L.status)||"draft"}),r=z([]),o=z([]),a=te(()=>n.ingredients.filter(k=>k.category==="裝飾"));Wn(()=>{var k;n.initialRecipe&&n.mode==="edit"&&(r.value=n.initialRecipe.ingredients.map(_=>{const g=n.ingredients.find(w=>w.id===_.ingredientId);return{id:_.id,ingredient:g||null,amount:_.amount}}),o.value=((k=n.initialRecipe.garnishes)==null?void 0:k.map(_=>{const g=n.ingredients.find(w=>w.id===_.ingredientId);return{id:_.id,ingredient:g||null,amount:_.amount}}))||[]),r.value.length===0&&r.value.push({id:Date.now(),ingredient:null,amount:0}),o.value.length===0&&o.value.push({id:Date.now()+1,ingredient:null,amount:0})});const l=["shake","double strain shake","stir","blend","Co2","tap","rolling"],u=Object.keys(Ys),c=te(()=>{const k=r.value.reduce((w,V)=>!V.ingredient||!V.amount?w:w+V.amount*V.ingredient.unitPrice,0),_=o.value.reduce((w,V)=>!V.ingredient||!V.amount?w:w+V.amount*V.ingredient.unitPrice,0),g=i.value.ice?Ys[i.value.ice]:0;return k+_+g}),f=()=>{r.value.push({id:Date.now(),ingredient:null,amount:0})},p=k=>{r.value=r.value.filter(_=>_.id!==k)},h=(k,_)=>{const g=r.value.find(w=>w.id===k);g&&(g.ingredient=_.ingredient,g.amount=_.amount)},y=()=>{o.value.push({id:Date.now(),ingredient:null,amount:0})},b=k=>{o.value=o.value.filter(_=>_.id!==k)},$=(k,_)=>{const g=o.value.find(w=>w.id===k);g&&(g.ingredient=_.ingredient,g.amount=_.amount)},M=k=>k.type==="單一材料"?k.unit:k.mainUnit,T=(k="draft")=>{var V,P;if(!i.value.name||!i.value.bartenderName)return;const _=r.value.filter(R=>R.ingredient&&R.amount).map(R=>({id:R.id,ingredientId:R.ingredient.id,name:R.ingredient.name,amount:R.amount,unit:M(R.ingredient),unitPrice:R.ingredient.unitPrice})),g=o.value.filter(R=>R.ingredient&&R.amount).map(R=>({id:R.id,ingredientId:R.ingredient.id,name:R.ingredient.name,amount:R.amount,unit:M(R.ingredient),unitPrice:R.ingredient.unitPrice}));if(k==="complete"&&_.length===0)return;const w=((V=n.initialRecipe)==null?void 0:V.status)==="complete"?"complete":k;s("save",{...i.value,id:((P=n.initialRecipe)==null?void 0:P.id)||Date.now(),ingredients:_,garnishes:g,totalCost:c.value,status:w})};return(k,_)=>{var g,w,V;return D(),W("div",Ky,[d("div",Qy,[d("div",Jy,[d("h2",null,q(k.mode==="create"?"新增酒譜":"修改酒譜"),1),d("button",{class:"close-btn",onClick:_[0]||(_[0]=P=>s("cancel"))},"✕")]),d("div",Gy,[d("section",Yy,[_[9]||(_[9]=d("h3",null,"基本資訊",-1)),d("div",Xy,[d("div",Zy,[_[7]||(_[7]=d("label",null,"酒名",-1)),ye(d("input",{"onUpdate:modelValue":_[1]||(_[1]=P=>i.value.name=P),type:"text",placeholder:"請輸入酒名"},null,512),[[Me,i.value.name]])]),d("div",e_,[_[8]||(_[8]=d("label",null,"調酒師名",-1)),ye(d("input",{"onUpdate:modelValue":_[2]||(_[2]=P=>i.value.bartenderName=P),type:"text",placeholder:"請輸入調酒師名"},null,512),[[Me,i.value.bartenderName]])])])]),d("section",t_,[_[11]||(_[11]=d("h3",null,"酒體材料",-1)),d("div",n_,[d("div",s_,[(D(!0),W(ge,null,Ae(r.value,P=>(D(),xt(wr,{key:P.id,ingredients:k.ingredients,"show-delete":r.value.length>1,"initial-ingredient":P.ingredient,"initial-amount":P.amount,onUpdate:R=>h(P.id,R),onRemove:R=>p(P.id)},null,8,["ingredients","show-delete","initial-ingredient","initial-amount","onUpdate","onRemove"]))),128))]),d("button",{class:"add-more-btn",onClick:f,type:"button"},_[10]||(_[10]=[d("span",{class:"plus-icon"},"+",-1),Te(" 新增其他材料 ")]))])]),d("section",i_,[_[13]||(_[13]=d("h3",null,"作法",-1)),d("div",r_,[d("div",o_,[_[12]||(_[12]=d("label",null,"調製方式",-1)),ye(d("select",{"onUpdate:modelValue":_[3]||(_[3]=P=>i.value.method=P),class:"method-select"},[(D(),W(ge,null,Ae(l,P=>d("option",{key:P,value:P},q(P),9,a_)),64))],512),[[cn,i.value.method]])])])]),d("section",l_,[_[18]||(_[18]=d("h3",null,"呈現",-1)),d("div",c_,[d("div",u_,[_[14]||(_[14]=d("label",null,"杯子",-1)),ye(d("input",{"onUpdate:modelValue":_[4]||(_[4]=P=>i.value.glass=P),type:"text",placeholder:"請輸入杯子種類"},null,512),[[Me,i.value.glass]])]),d("div",d_,[_[15]||(_[15]=d("label",null,"冰塊",-1)),d("div",f_,[(D(!0),W(ge,null,Ae(se(u),P=>(D(),W("label",{class:"radio-label",key:P},[ye(d("input",{type:"radio",value:P,"onUpdate:modelValue":R=>i.value.ice=R,name:"ice-type"},null,8,p_),[[Jd,i.value.ice]]),d("span",h_,q(P),1)]))),128))])]),d("div",v_,[_[17]||(_[17]=d("label",null,"裝飾物",-1)),d("div",g_,[(D(!0),W(ge,null,Ae(o.value,P=>(D(),xt(wr,{key:P.id,ingredients:a.value,"show-delete":o.value.length>1,"initial-ingredient":P.ingredient,"initial-amount":P.amount,onUpdate:R=>$(P.id,R),onRemove:R=>b(P.id)},null,8,["ingredients","show-delete","initial-ingredient","initial-amount","onUpdate","onRemove"]))),128))]),d("button",{class:"add-more-btn",onClick:y,type:"button"},_[16]||(_[16]=[d("span",{class:"plus-icon"},"+",-1),Te(" 新增其他裝飾物 ")]))])])])]),d("div",m_,[d("div",y_,[_[19]||(_[19]=Te(" 成本 ")),d("span",__,"$"+q(c.value.toFixed(2)),1)]),d("div",b_,[k.mode==="create"||k.mode==="edit"&&((g=k.initialRecipe)==null?void 0:g.status)==="draft"?(D(),W("button",{key:0,class:"draft-btn",onClick:_[5]||(_[5]=P=>T("draft"))},q((k.mode==="edit"&&((w=k.initialRecipe)==null?void 0:w.status)==="draft","暫存")),1)):pe("",!0),d("button",{class:"submit-btn",onClick:_[6]||(_[6]=P=>T("complete"))},q(k.mode==="edit"&&((V=k.initialRecipe)==null?void 0:V.status)==="draft"?"完成酒譜":k.mode==="create"?"新增":"更新"),1)])])])])}}}),Ra=ze(w_,[["__scopeId","data-v-0007d765"]]),k_={class:"recipe-list"},S_={class:"header"},I_={class:"tab-container"},O_={class:"tabs"},$_={class:"badge"},C_={class:"badge"},P_={key:0,class:"empty-state"},x_={key:0,class:"recipes-grid"},E_=["onClick"],A_={class:"recipe-info"},R_={class:"recipe-main-info"},M_={class:"recipe-name"},T_={class:"bartender-tag"},j_={class:"recipe-cost"},D_={class:"cost-value"},U_={key:1,class:"empty-state"},L_=Fe({__name:"RecipeList",setup(e){const t=Ss(),n=Sn(),{recipes:s}=Tn(t),{ingredients:i}=Tn(n),r=z(!1),o=z(!1),a=z(!1),l=z(null),u=z(!1),c=z(""),f=z("complete"),p=te(()=>s.value.filter(I=>I.status===f.value)),h=te(()=>({draft:s.value.filter(I=>I.status==="draft").length,complete:s.value.filter(I=>I.status==="complete").length})),y=()=>{r.value=!1},b=I=>{I.status==="draft"?M(I):(l.value=I,o.value=!0)},$=()=>{o.value=!1,l.value=null},M=I=>{l.value=I,a.value=!0,o.value=!1},T=I=>{if(I.id&&s.value.find(C=>C.id===I.id)){const C=s.value.findIndex(E=>E.id===I.id);C!==-1&&(s.value[C]=I,t.saveRecipes(),c.value=`${I.name}的內容已被更新`)}else t.addRecipe(I),c.value=`${I.name}已成功加入資料庫`;u.value=!0,setTimeout(()=>{u.value=!1},3e3),y(),O()},A=I=>{t.removeRecipe(I),$()},O=()=>{a.value=!1,l.value=null};return(I,C)=>(D(),W("div",k_,[d("div",S_,[C[9]||(C[9]=d("h2",null,"酒譜一覽",-1)),d("button",{class:"add-btn",onClick:C[0]||(C[0]=E=>r.value=!0)},C[8]||(C[8]=[d("span",{class:"plus-icon"},"+",-1),Te(" 新增酒譜 ")]))]),d("div",I_,[d("div",O_,[d("button",{class:bt(["tab-btn",{active:f.value==="complete"}]),onClick:C[1]||(C[1]=E=>f.value="complete")},[C[10]||(C[10]=Te(" 完成區 ")),d("span",$_,q(h.value.complete),1)],2),d("button",{class:bt(["tab-btn",{active:f.value==="draft"}]),onClick:C[2]||(C[2]=E=>f.value="draft")},[C[11]||(C[11]=Te(" 暫存區 ")),d("span",C_,q(h.value.draft),1)],2)])]),se(s).length===0?(D(),W("div",P_,[C[12]||(C[12]=d("p",null,"尚未新增任何酒譜",-1)),d("button",{class:"add-recipe-btn",onClick:C[3]||(C[3]=E=>r.value=!0)},"立即新增第一個酒譜")])):(D(),W(ge,{key:1},[p.value.length>0?(D(),W("div",x_,[(D(!0),W(ge,null,Ae(p.value,E=>(D(),W("div",{key:E.id,class:"recipe-card",onClick:L=>b(E)},[d("div",A_,[d("div",R_,[d("span",M_,q(E.name),1),d("span",T_,q(E.bartenderName),1)]),d("div",j_,[C[13]||(C[13]=d("span",{class:"cost-label"},"成本",-1)),d("span",D_,"$"+q(E.totalCost.toFixed(2)),1)])])],8,E_))),128))])):(D(),W("div",U_,[C[14]||(C[14]=d("p",null,"此分類中尚無酒譜",-1)),d("button",{class:"add-recipe-btn",onClick:C[4]||(C[4]=E=>r.value=!0)},"新增酒譜")]))],64)),o.value&&l.value?(D(),xt(Ty,{key:2,recipe:l.value,onClose:$,onEdit:M,onDelete:A},null,8,["recipe"])):pe("",!0),r.value?(D(),W("div",{key:3,class:"dialog-overlay",onClick:y},[d("div",{class:"dialog",onClick:C[5]||(C[5]=lt(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[C[15]||(C[15]=d("h2",null,"新增酒譜",-1)),d("button",{class:"close-btn",onClick:y},"✕")]),Ce(Ra,{ingredients:se(i),mode:"create",onSave:T,onCancel:y},null,8,["ingredients"])])])):pe("",!0),a.value&&l.value?(D(),W("div",{key:4,class:"dialog-overlay",onClick:O},[d("div",{class:"dialog",onClick:C[6]||(C[6]=lt(()=>{},["stop"]))},[d("div",{class:"dialog-header"},[C[16]||(C[16]=d("h2",null,"修改酒譜",-1)),d("button",{class:"close-btn",onClick:O},"✕")]),Ce(Ra,{ingredients:se(i),"initial-recipe":l.value,mode:"edit",onSave:T,onCancel:O},null,8,["ingredients","initial-recipe"])])])):pe("",!0),u.value?(D(),W("div",{key:5,class:"notification",onClick:C[7]||(C[7]=E=>u.value=!1)},q(c.value),1)):pe("",!0)]))}}),N_=ze(L_,[["__scopeId","data-v-1d88c135"]]),F_={class:"recipe-creator"},W_={class:"basic-info"},q_={class:"form-group"},V_={class:"form-group"},H_={class:"ingredients-section"},B_={class:"ingredient-selector"},z_={class:"form-group ingredient-search"},K_={class:"dropdown-container"},Q_={key:0,class:"dropdown-list"},J_=["onClick"],G_={class:"form-group amount-input"},Y_={class:"form-group unit-select"},X_=["value"],Z_=["disabled"],eb={class:"selected-ingredients"},tb={key:0},nb=["onClick"],sb={key:1},ib={class:"style-section"},rb={class:"form-group"},ob={class:"form-group"},ab=["value"],lb={class:"form-group"},cb={class:"sticky-footer"},ub={class:"total-cost"},db=["disabled"],fb=Fe({__name:"RecipeCreator",setup(e){const t=Sn(),n=Ss(),{ingredients:s}=Tn(t),i=["ml","g","dash","份"],r=Object.keys(Ys),o=z({name:"",bartenderName:"",glass:"",ice:"",method:"shake",garnishes:[],ingredients:[]}),a=z(""),l=z(!1),u=z(null),c=z(""),f=z(i[0]),p=te(()=>s.value.filter(A=>A.name.toLowerCase().includes(a.value.toLowerCase()))),h=te(()=>{const A=o.value.ingredients.reduce((I,C)=>I+C.unitPrice*C.amount,0),O=o.value.ice?Ys[o.value.ice]:0;return A+O}),y=A=>A.type==="單一材料"?A.unit:A.mainUnit,b=()=>{if(!u.value||!c.value)return;const A=s.value.find(I=>I.id===u.value);if(!A)return;const O=y(A);o.value.ingredients.push({id:Date.now(),ingredientId:A.id,amount:parseFloat(c.value),name:A.name,unit:O,unitPrice:A.unitPrice}),u.value=null,c.value="",a.value="",l.value=!1},$=A=>{o.value.ingredients=o.value.ingredients.filter(O=>O.id!==A)},M=A=>{u.value=A.id,l.value=!1,a.value=A.name},T=()=>{!o.value.name||o.value.ingredients.length===0||(n.addRecipe({name:o.value.name,bartenderName:o.value.bartenderName,glass:o.value.glass,ice:o.value.ice,method:o.value.method,ingredients:[...o.value.ingredients],garnishes:[...o.value.garnishes],totalCost:h.value}),o.value={name:"",bartenderName:"",glass:"",ice:"",method:"shake",garnishes:[],ingredients:[]})};return(A,O)=>(D(),W("div",F_,[O[21]||(O[21]=d("h2",null,"新增酒譜",-1)),d("form",{onSubmit:lt(T,["prevent"]),class:"recipe-form"},[d("div",W_,[O[11]||(O[11]=d("h3",null,"基本資訊",-1)),d("div",q_,[O[9]||(O[9]=d("label",{for:"recipeName"},"酒名：",-1)),ye(d("input",{id:"recipeName","onUpdate:modelValue":O[0]||(O[0]=I=>o.value.name=I),type:"text",required:"",placeholder:"請輸入姓名"},null,512),[[Me,o.value.name]])]),d("div",V_,[O[10]||(O[10]=d("label",{for:"bartenderName"},"調酒師名：",-1)),ye(d("input",{id:"bartenderName","onUpdate:modelValue":O[1]||(O[1]=I=>o.value.bartenderName=I),type:"text",required:"",placeholder:"請輸入姓名"},null,512),[[Me,o.value.bartenderName]])])]),d("div",H_,[O[14]||(O[14]=d("h3",null,"酒體材料",-1)),d("div",B_,[d("div",z_,[O[12]||(O[12]=d("label",null,"材料：",-1)),d("div",K_,[ye(d("input",{"onUpdate:modelValue":O[2]||(O[2]=I=>a.value=I),onFocus:O[3]||(O[3]=I=>l.value=!0),type:"text",placeholder:"請選擇材料"},null,544),[[Me,a.value]]),l.value?(D(),W("div",Q_,[(D(!0),W(ge,null,Ae(p.value,I=>(D(),W("div",{key:I.id,class:bt(["dropdown-item",{selected:u.value===I.id}]),onClick:C=>M(I)},q(I.name),11,J_))),128))])):pe("",!0)])]),d("div",G_,[ye(d("input",{"onUpdate:modelValue":O[4]||(O[4]=I=>c.value=I),type:"number",step:"0.01",min:"0",placeholder:"輸入數量"},null,512),[[Me,c.value]])]),d("div",Y_,[ye(d("select",{"onUpdate:modelValue":O[5]||(O[5]=I=>f.value=I)},[(D(),W(ge,null,Ae(i,I=>d("option",{key:I,value:I},q(I),9,X_)),64))],512),[[cn,f.value]])]),d("button",{type:"button",onClick:b,disabled:!u.value||!c.value,class:"add-ingredient-btn"}," 新增材料 ",8,Z_)]),d("div",eb,[o.value.ingredients.length?(D(),W("table",tb,[O[13]||(O[13]=d("thead",null,[d("tr",null,[d("th",null,"材料"),d("th",null,"數量"),d("th",null,"成本"),d("th",null,"操作")])],-1)),d("tbody",null,[(D(!0),W(ge,null,Ae(o.value.ingredients,I=>(D(),W("tr",{key:I.id},[d("td",null,q(I.name),1),d("td",null,q(I.amount)+" "+q(I.unit),1),d("td",null,"$"+q((I.amount*I.unitPrice).toFixed(2)),1),d("td",null,[d("button",{onClick:C=>$(I.id),class:"delete-btn",type:"button"}," 刪除 ",8,nb)])]))),128))])])):(D(),W("p",sb,"No ingredients added to recipe yet."))])]),d("div",ib,[O[19]||(O[19]=d("h3",null,"造型",-1)),d("div",rb,[O[15]||(O[15]=d("label",{for:"glass"},"杯子：",-1)),ye(d("input",{id:"glass","onUpdate:modelValue":O[6]||(O[6]=I=>o.value.glass=I),type:"text",required:""},null,512),[[Me,o.value.glass]])]),d("div",ob,[O[17]||(O[17]=d("label",{for:"ice"},"冰塊：",-1)),ye(d("select",{id:"ice","onUpdate:modelValue":O[7]||(O[7]=I=>o.value.ice=I),required:""},[O[16]||(O[16]=d("option",{value:""},"請選擇冰塊大小",-1)),(D(!0),W(ge,null,Ae(se(r),I=>(D(),W("option",{key:I,value:I},q(I),9,ab))),128))],512),[[cn,o.value.ice]])]),d("div",lb,[O[18]||(O[18]=d("label",{for:"garnish"},"裝飾物：",-1)),ye(d("input",{id:"garnish","onUpdate:modelValue":O[8]||(O[8]=I=>o.value.garnishes[0].name=I),type:"text"},null,512),[[Me,o.value.garnishes[0].name]])])]),d("div",cb,[d("div",ub,[O[20]||(O[20]=Te(" 成本：")),d("strong",null,"$"+q(h.value.toFixed(2)),1)]),d("button",{type:"submit",class:"save-recipe-btn",disabled:!o.value.name||o.value.ingredients.length===0}," 新增酒譜 ",8,db)])],32)]))}}),pb=ze(fb,[["__scopeId","data-v-38310c4e"]]),hb={class:"dialog-overlay"},vb={class:"dialog"},gb={class:"dialog-header"},mb={class:"dialog-content"},yb={class:"form-group"},_b={class:"form-group"},bb=["value"],wb={class:"form-group"},kb={class:"amount-unit-group"},Sb=["value"],Ib={class:"form-group"},Ob={class:"price-input"},$b={class:"dialog-footer"},Cb={class:"cost-info"},Pb={class:"info-item"},xb={class:"highlight-value"},Eb={class:"button-group"},Ab=["disabled"],Rb=Fe({__name:"SingleIngredientForm",props:{initialIngredient:{},mode:{}},emits:["save","cancel"],setup(e,{emit:t}){var u,c,f,p,h;const n=e,s=t,i=z({name:((u=n.initialIngredient)==null?void 0:u.name)||"",unit:((c=n.initialIngredient)==null?void 0:c.unit)||"ml",amount:((f=n.initialIngredient)==null?void 0:f.amount)||0,totalPrice:((p=n.initialIngredient)==null?void 0:p.totalPrice)||0,category:((h=n.initialIngredient)==null?void 0:h.category)||"其他"}),r=["ml","g","dash","份"],o=oo,a=te(()=>!i.value.amount||!i.value.totalPrice?0:Math.round(i.value.totalPrice/i.value.amount*100)/100),l=()=>{var y;!i.value.name||!i.value.amount||!i.value.totalPrice||s("save",{...i.value,type:"單一材料",id:((y=n.initialIngredient)==null?void 0:y.id)||Date.now(),unitPrice:a.value})};return(y,b)=>(D(),W("div",hb,[d("div",vb,[d("div",gb,[d("h2",null,q(y.mode==="create"?"新增單一材料":"編輯單一材料"),1),d("button",{class:"close-btn",onClick:b[0]||(b[0]=$=>s("cancel"))},"✕")]),d("div",mb,[d("div",yb,[b[7]||(b[7]=d("label",null,"名稱",-1)),ye(d("input",{"onUpdate:modelValue":b[1]||(b[1]=$=>i.value.name=$),type:"text",required:""},null,512),[[Me,i.value.name]])]),d("div",_b,[b[8]||(b[8]=d("label",null,"分類",-1)),ye(d("select",{"onUpdate:modelValue":b[2]||(b[2]=$=>i.value.category=$)},[(D(!0),W(ge,null,Ae(se(o),$=>(D(),W("option",{key:$,value:$},q($),9,bb))),128))],512),[[cn,i.value.category]])]),d("div",wb,[b[9]||(b[9]=d("label",null,"數量與單位",-1)),d("div",kb,[ye(d("input",{"onUpdate:modelValue":b[3]||(b[3]=$=>i.value.amount=$),type:"number",min:"0",step:"1",required:""},null,512),[[Me,i.value.amount,void 0,{number:!0}]]),ye(d("select",{"onUpdate:modelValue":b[4]||(b[4]=$=>i.value.unit=$)},[(D(),W(ge,null,Ae(r,$=>d("option",{key:$,value:$},q($),9,Sb)),64))],512),[[cn,i.value.unit]])])]),d("div",Ib,[b[11]||(b[11]=d("label",null,"總價",-1)),d("div",Ob,[b[10]||(b[10]=d("span",{class:"currency"},"$",-1)),ye(d("input",{"onUpdate:modelValue":b[5]||(b[5]=$=>i.value.totalPrice=$),type:"number",min:"0",step:"0.1",required:""},null,512),[[Me,i.value.totalPrice,void 0,{number:!0}]])])])]),d("div",$b,[d("div",Cb,[d("div",Pb,[b[12]||(b[12]=d("span",{class:"label"},"成本",-1)),d("span",xb,"$"+q(a.value.toFixed(2))+"/"+q(i.value.unit),1)])]),d("div",Eb,[d("button",{class:"cancel-btn",onClick:b[6]||(b[6]=$=>s("cancel"))},"取消"),d("button",{class:"save-btn",onClick:l,disabled:!i.value.name||!i.value.amount||!i.value.totalPrice},q(y.mode==="create"?"新增材料":"儲存變更"),9,Ab)])])])]))}}),Ma=ze(Rb,[["__scopeId","data-v-a040f99f"]]),Mb={class:"dialog-overlay"},Tb={class:"dialog"},jb={class:"dialog-header"},Db={class:"dialog-content"},Ub={class:"section"},Lb={class:"form-section"},Nb={class:"form-group"},Fb={class:"form-group"},Wb=["value"],qb={class:"form-group"},Vb=["value"],Hb={class:"form-group"},Bb={class:"amount-input"},zb=["placeholder"],Kb={class:"unit"},Qb={key:0,class:"help-text"},Jb={class:"section"},Gb={class:"form-section"},Yb={class:"ingredients-list"},Xb={class:"section"},Zb={class:"form-section"},ew={class:"form-group"},tw={class:"dialog-footer"},nw={class:"cost-info"},sw={class:"info-item"},iw={class:"highlight-value"},rw={class:"info-item"},ow={class:"value"},aw={class:"button-group"},lw=["disabled"],cw=Fe({__name:"CompoundIngredientForm",props:{initialIngredient:{},mode:{}},emits:["save","cancel"],setup(e,{emit:t}){var O,I,C,E,L,k;const n=e,s=t,i=Sn(),{ingredients:r}=Tn(i),o=te(()=>r.value),a=z({name:((O=n.initialIngredient)==null?void 0:O.name)||"",mainUnit:((I=n.initialIngredient)==null?void 0:I.mainUnit)||"ml",category:((C=n.initialIngredient)==null?void 0:C.category)||"其他",ingredients:((E=n.initialIngredient)==null?void 0:E.ingredients)||[],instructions:((L=n.initialIngredient)==null?void 0:L.instructions)||""}),l=["ml","g","dash","份"],u=oo,c=z([{id:Date.now(),ingredient:null,amount:0}]),f=z(((k=n.initialIngredient)==null?void 0:k.totalAmount)||0);n.initialIngredient&&n.mode==="edit"&&(c.value=n.initialIngredient.ingredients.map(_=>{const g=o.value.find(w=>w.id===_.ingredientId);return{id:_.ingredientId,ingredient:g||null,amount:_.amount}}),c.value.length===0&&c.value.push({id:Date.now(),ingredient:null,amount:0}));const p=te(()=>c.value.reduce((_,g)=>!g.ingredient||!g.amount||(g.ingredient.type==="單一材料"?g.ingredient.unit:g.ingredient.mainUnit)!==a.value.mainUnit?_:_+g.amount,0)),h=te(()=>f.value||p.value),y=te(()=>c.value.reduce((_,g)=>!g.ingredient||!g.amount?_:_+g.amount*g.ingredient.unitPrice,0)),b=te(()=>!h.value||!y.value?0:y.value/h.value),$=()=>{c.value.push({id:Date.now(),ingredient:null,amount:0})},M=_=>{c.value=c.value.filter(g=>g.id!==_)},T=(_,g)=>{const w=c.value.find(V=>V.id===_);w&&(w.ingredient=g.ingredient,w.amount=g.amount)},A=()=>{var g;if(!a.value.name)return;const _=c.value.filter(w=>w.ingredient&&w.amount).map(w=>({ingredientId:w.ingredient.id,amount:w.amount}));_.length!==0&&s("save",{...a.value,type:"複合材料",id:((g=n.initialIngredient)==null?void 0:g.id)||Date.now(),ingredients:_,totalAmount:h.value,totalPrice:y.value,unitPrice:b.value})};return(_,g)=>(D(),W("div",Mb,[d("div",Tb,[d("div",jb,[d("h2",null,q(_.mode==="create"?"新增複合材料":"編輯複合材料"),1),d("button",{class:"close-btn",onClick:g[0]||(g[0]=w=>s("cancel"))},"✕")]),d("div",Db,[d("div",Ub,[g[11]||(g[11]=d("h3",{class:"section-title"},"基本資料",-1)),d("div",Lb,[d("div",Nb,[g[7]||(g[7]=d("label",null,"名稱",-1)),ye(d("input",{"onUpdate:modelValue":g[1]||(g[1]=w=>a.value.name=w),type:"text",required:""},null,512),[[Me,a.value.name]])]),d("div",Fb,[g[8]||(g[8]=d("label",null,"分類",-1)),ye(d("select",{"onUpdate:modelValue":g[2]||(g[2]=w=>a.value.category=w)},[(D(!0),W(ge,null,Ae(se(u),w=>(D(),W("option",{key:w,value:w},q(w),9,Wb))),128))],512),[[cn,a.value.category]])]),d("div",qb,[g[9]||(g[9]=d("label",null,"主要單位",-1)),ye(d("select",{"onUpdate:modelValue":g[3]||(g[3]=w=>a.value.mainUnit=w)},[(D(),W(ge,null,Ae(l,w=>d("option",{key:w,value:w},q(w),9,Vb)),64))],512),[[cn,a.value.mainUnit]])]),d("div",Hb,[g[10]||(g[10]=d("label",null,"總量（若與材料總和不同）",-1)),d("div",Bb,[ye(d("input",{"onUpdate:modelValue":g[4]||(g[4]=w=>f.value=w),type:"number",min:"0",step:"0.1",placeholder:"輸入總"+a.value.mainUnit+"數"},null,8,zb),[[Me,f.value,void 0,{number:!0}]]),d("span",Kb,q(a.value.mainUnit),1)]),p.value?(D(),W("div",Qb," 材料總和: "+q(p.value.toFixed(2))+q(a.value.mainUnit),1)):pe("",!0)])])]),d("div",Jb,[g[12]||(g[12]=d("h3",{class:"section-title"},"材料清單",-1)),d("div",Gb,[d("div",Yb,[(D(!0),W(ge,null,Ae(c.value,w=>(D(),W("div",{key:w.id,class:"ingredient-input"},[Ce(wr,{ingredients:o.value,"show-delete":c.value.length>1,"initial-ingredient":w.ingredient,"initial-amount":w.amount,onUpdate:V=>T(w.id,V),onRemove:()=>M(w.id)},null,8,["ingredients","show-delete","initial-ingredient","initial-amount","onUpdate","onRemove"])]))),128)),d("button",{type:"button",class:"add-ingredient-btn",onClick:$}," + 新增其他材料 ")])])]),d("div",Xb,[g[13]||(g[13]=d("h3",{class:"section-title"},"作法",-1)),d("div",Zb,[d("div",ew,[ye(d("textarea",{"onUpdate:modelValue":g[5]||(g[5]=w=>a.value.instructions=w),rows:"4",placeholder:"請輸入製作步驟..."},null,512),[[Me,a.value.instructions]])])])])]),d("div",tw,[d("div",nw,[d("div",sw,[g[14]||(g[14]=d("span",{class:"label"},"總量",-1)),d("span",iw,q(h.value.toFixed(2))+q(a.value.mainUnit),1)]),d("div",rw,[g[15]||(g[15]=d("span",{class:"label"},"平均成本",-1)),d("span",ow,"$"+q(b.value.toFixed(2))+"/"+q(a.value.mainUnit),1)])]),d("div",aw,[d("button",{class:"cancel-btn",onClick:g[6]||(g[6]=w=>s("cancel"))},"取消"),d("button",{class:"save-btn",onClick:A,disabled:!a.value.name||!c.value.some(w=>w.ingredient&&w.amount)},q(_.mode==="create"?"新增複合材料":"儲存變更"),9,lw)])])])]))}}),Ta=ze(cw,[["__scopeId","data-v-84624a2f"]]),uw={class:"dialog-overlay"},dw={class:"dialog"},fw={class:"dialog-header"},pw={class:"header-content"},hw={class:"dialog-content"},vw={class:"detail-section"},gw={class:"detail-row"},mw={class:"value"},yw={class:"detail-row"},_w={class:"value"},bw={class:"detail-row"},ww={class:"value"},kw={class:"detail-row"},Sw={class:"value"},Iw={class:"dialog-actions"},Ow=Fe({__name:"SingleIngredientDetailDialog",props:{ingredient:{}},emits:["close","delete","edit"],setup(e,{emit:t}){const n=t;return(s,i)=>(D(),W("div",uw,[d("div",dw,[d("div",fw,[d("div",pw,[d("h2",null,q(s.ingredient.name),1),i[3]||(i[3]=d("span",{class:"type-pill"},"單一材料",-1))]),d("button",{class:"close-btn",onClick:i[0]||(i[0]=r=>n("close"))},"✕")]),d("div",hw,[d("div",vw,[d("div",gw,[i[4]||(i[4]=d("span",{class:"label"},"分類",-1)),d("span",mw,q(s.ingredient.category),1)]),d("div",yw,[i[5]||(i[5]=d("span",{class:"label"},"數量",-1)),d("span",_w,q(s.ingredient.amount)+" "+q(s.ingredient.unit),1)]),d("div",bw,[i[6]||(i[6]=d("span",{class:"label"},"單價",-1)),d("span",ww,"$"+q(s.ingredient.totalPrice),1)]),d("div",kw,[i[7]||(i[7]=d("span",{class:"label"},"成本",-1)),d("span",Sw,"$"+q(s.ingredient.unitPrice)+"/"+q(s.ingredient.unit),1)])]),d("div",Iw,[d("button",{class:"edit-btn",onClick:i[1]||(i[1]=r=>n("edit",s.ingredient))},"修改材料"),d("button",{class:"delete-btn",onClick:i[2]||(i[2]=r=>n("delete",s.ingredient.id))},"刪除材料")])])])]))}}),$w=ze(Ow,[["__scopeId","data-v-b3d0c8a6"]]),Cw={class:"dialog-overlay"},Pw={class:"dialog"},xw={class:"dialog-header"},Ew={class:"header-content"},Aw={class:"dialog-content"},Rw={class:"ingredients-list"},Mw={class:"ingredient-name"},Tw={class:"ingredient-amount"},jw={key:0,class:"section"},Dw={class:"instructions-content"},Uw={class:"section"},Lw={class:"presentation-details"},Nw={class:"detail-row"},Fw={class:"value"},Ww={class:"detail-row"},qw={class:"value"},Vw={class:"detail-row"},Hw={class:"value"},Bw={class:"dialog-actions"},zw=Fe({__name:"CompoundIngredientDetailDialog",props:{ingredient:{}},emits:["close","delete","edit"],setup(e,{emit:t}){const n=e,s=t,i=Sn(),{ingredients:r}=Tn(i),o=te(()=>n.ingredient.ingredients.map(a=>{const l=r.value.find(u=>u.id===a.ingredientId);return(l==null?void 0:l.type)==="單一材料"?{name:l.name,amount:a.amount,unit:l.unit,totalPrice:a.amount/l.amount*l.totalPrice}:null}).filter(a=>a!==null));return(a,l)=>(D(),W("div",Cw,[d("div",Pw,[d("div",xw,[d("div",Ew,[d("h2",null,q(a.ingredient.name),1),l[3]||(l[3]=d("span",{class:"type-pill"},"複合材料",-1))]),d("button",{class:"close-btn",onClick:l[0]||(l[0]=u=>s("close"))},"✕")]),d("div",Aw,[l[9]||(l[9]=d("h4",{class:"section-title"},"材料清單",-1)),d("div",Rw,[(D(!0),W(ge,null,Ae(o.value,u=>(D(),W("div",{key:u.name,class:"ingredient-row"},[d("span",Mw,q(u.name),1),d("span",Tw,q(u.amount)+" "+q(u.unit),1)]))),128))]),a.ingredient.instructions?(D(),W("div",jw,[l[4]||(l[4]=d("h4",{class:"section-title"},"作法",-1)),d("div",Dw,q(a.ingredient.instructions),1)])):pe("",!0),d("div",Uw,[l[8]||(l[8]=d("h4",{class:"section-title"},"其他資訊",-1)),d("div",Lw,[d("div",Nw,[l[5]||(l[5]=d("span",{class:"label"},"分類",-1)),d("span",Fw,q(a.ingredient.category),1)]),d("div",Ww,[l[6]||(l[6]=d("span",{class:"label"},"主要單位",-1)),d("span",qw,q(a.ingredient.mainUnit),1)]),d("div",Vw,[l[7]||(l[7]=d("span",{class:"label"},"成本",-1)),d("span",Hw,"$"+q(a.ingredient.unitPrice.toFixed(2))+"/"+q(a.ingredient.mainUnit),1)])])]),d("div",Bw,[d("button",{class:"edit-btn",onClick:l[1]||(l[1]=u=>s("edit",a.ingredient))},"修改材料"),d("button",{class:"delete-btn",onClick:l[2]||(l[2]=u=>s("delete",a.ingredient.id))},"刪除材料")])])])]))}}),Kw=ze(zw,[["__scopeId","data-v-186aea68"]]),Qw={class:"ingredients-manager"},Jw={class:"header"},Gw={class:"button-group"},Yw={class:"search-bar"},Xw={class:"category-tabs"},Zw=["onClick"],e0={class:"ingredients-grid"},t0=["onClick"],n0={class:"ingredient-name"},s0={class:"ingredient-details"},i0={class:"type-tag"},r0={class:"unit-price"},o0={key:0,class:"pagination"},a0=["disabled"],l0=["onClick","disabled"],c0=["disabled"],Li=20,u0=Fe({__name:"IngredientsManager",setup(e){const t=Sn(),{ingredients:n}=Tn(t);Wn(()=>{t.loadSavedIngredients()});const s=z(null),i=z(!1),r=z(!1),o=z(!1),a=z(!1),l=z(!1),u=z(""),c=z({name:"",category:"基酒",amount:0,unit:"ml",totalPrice:0}),f=z({id:0,name:"",category:"基酒",type:"單一材料",amount:0,unit:"ml",totalPrice:0,unitPrice:0}),p=z(""),h=z("全部"),y=z(1),b=te(()=>{let P=n.value;if(h.value!=="全部"&&(P=P.filter(R=>R.category===h.value)),p.value){const R=p.value.toLowerCase();P=P.filter(Z=>Z.name.toLowerCase().includes(R))}return P}),$=te(()=>{const P=(y.value-1)*Li,R=P+Li;return b.value.slice(P,R)}),M=te(()=>Math.ceil(b.value.length/Li)),T=te(()=>{const P=M.value,R=y.value,Z=[];if(Z.push(1),P<=5)for(let B=2;B<=P;B++)Z.push(B);else{R>3&&Z.push("...");for(let B=Math.max(2,R-1);B<=Math.min(R+1,P-1);B++)Z.push(B);R<P-2&&Z.push("..."),P>1&&Z.push(P)}return Z}),A=P=>{y.value=P,window.scrollTo({top:0,behavior:"smooth"})},O=P=>P.type==="單一材料"?P.unit:P.mainUnit,I=P=>{if(P.type==="單一材料"){const{id:R,type:Z,unitPrice:B,...ie}=P;t.addSingleIngredient(ie)}else{const{id:R,type:Z,totalAmount:B,totalPrice:ie,unitPrice:Pe,...ce}=P;t.addCompoundIngredient(ce)}u.value=`${P.name}已成功加入材料資料庫`,l.value=!0,setTimeout(()=>{l.value=!1},3e3),r.value=!1,o.value=!1},C=P=>{try{t.removeIngredient(P),i.value=!1,u.value="材料已成功刪除",l.value=!0,setTimeout(()=>{l.value=!1},3e3)}catch(R){R instanceof Error&&(u.value=R.message,l.value=!0,setTimeout(()=>{l.value=!1},3e3))}},E=P=>{s.value=P,i.value=!0},L=()=>{s.value=null,i.value=!1},k=()=>{r.value=!1,c.value={name:"",category:"基酒",amount:0,unit:"ml",totalPrice:0}},_=()=>{a.value=!1,f.value={id:0,name:"",category:"基酒",type:"單一材料",amount:0,unit:"ml",totalPrice:0,unitPrice:0}},g=P=>{if(P.type==="單一材料"){if(!P.name||!P.amount||!P.totalPrice)return}else if(!P.name)return;t.updateIngredient(P),u.value=`${P.name}已成功更新`,l.value=!0,setTimeout(()=>{l.value=!1},3e3),_()},w=()=>{o.value=!1},V=P=>{s.value=P,i.value=!1,a.value=!0};return(P,R)=>{var Z,B,ie,Pe;return D(),W("div",Qw,[d("div",Jw,[R[9]||(R[9]=d("h2",null,"材料一覽",-1)),d("div",Gw,[d("button",{class:"add-btn",onClick:R[0]||(R[0]=ce=>o.value=!0)},R[7]||(R[7]=[d("span",{class:"plus-icon"},"+",-1),Te(" 新增複合材料 ")])),d("button",{class:"add-btn",onClick:R[1]||(R[1]=ce=>r.value=!0)},R[8]||(R[8]=[d("span",{class:"plus-icon"},"+",-1),Te(" 新增單一材料 ")]))])]),d("div",Yw,[ye(d("input",{type:"text","onUpdate:modelValue":R[2]||(R[2]=ce=>p.value=ce),placeholder:"搜尋材料...",class:"search-input"},null,512),[[Me,p.value]])]),d("div",Xw,[d("button",{class:bt(["tab-btn",{active:h.value==="全部"}]),onClick:R[3]||(R[3]=ce=>h.value="全部")}," 全部 ",2),(D(!0),W(ge,null,Ae(se(oo),ce=>(D(),W("button",{key:ce,class:bt(["tab-btn",{active:h.value===ce}]),onClick:xe=>h.value=ce},q(ce),11,Zw))),128))]),d("div",e0,[(D(!0),W(ge,null,Ae($.value,ce=>(D(),W("div",{key:ce.id,class:"ingredient-item",onClick:xe=>E(ce)},[d("h3",n0,q(ce.name),1),d("div",s0,[d("span",i0,q(ce.type),1),d("span",r0," $"+q(ce.unitPrice.toFixed(2))+"/"+q(O(ce)),1)])],8,t0))),128))]),M.value>1?(D(),W("div",o0,[d("button",{class:"page-btn nav-btn",disabled:y.value===1,onClick:R[4]||(R[4]=ce=>A(y.value-1)),"aria-label":"Previous page"}," ← ",8,a0),(D(!0),W(ge,null,Ae(T.value,ce=>(D(),W("button",{key:ce,class:bt(["page-btn",{active:y.value===ce,ellipsis:ce==="..."}]),onClick:xe=>ce!=="..."&&A(ce),disabled:ce==="..."},q(ce),11,l0))),128)),d("button",{class:"page-btn nav-btn",disabled:y.value===M.value,onClick:R[5]||(R[5]=ce=>A(y.value+1)),"aria-label":"Next page"}," → ",8,c0)])):pe("",!0),r.value?(D(),xt(Ma,{key:1,mode:"create",onSave:I,onCancel:k})):pe("",!0),o.value?(D(),xt(Ta,{key:2,mode:"create",onSave:I,onCancel:w})):pe("",!0),((Z=s.value)==null?void 0:Z.type)==="單一材料"&&i.value?(D(),xt($w,{key:3,ingredient:s.value,onClose:L,onDelete:C,onEdit:V},null,8,["ingredient"])):pe("",!0),((B=s.value)==null?void 0:B.type)==="複合材料"&&i.value?(D(),xt(Kw,{key:4,ingredient:s.value,onClose:L,onDelete:C,onEdit:V},null,8,["ingredient"])):pe("",!0),a.value&&((ie=s.value)==null?void 0:ie.type)==="單一材料"?(D(),xt(Ma,{key:5,"initial-ingredient":s.value,mode:"edit",onSave:g,onCancel:_},null,8,["initial-ingredient"])):pe("",!0),a.value&&((Pe=s.value)==null?void 0:Pe.type)==="複合材料"?(D(),xt(Ta,{key:6,"initial-ingredient":s.value,mode:"edit",onSave:g,onCancel:_},null,8,["initial-ingredient"])):pe("",!0),l.value?(D(),W("div",{key:7,class:"notification",onClick:R[6]||(R[6]=ce=>l.value=!1)},q(u.value),1)):pe("",!0)])}}}),d0=ze(u0,[["__scopeId","data-v-586adf7d"]]),f0=up({history:Wf("/"),routes:[{path:"/",name:"home",component:N_,props:e=>({workspace:e.query.workspace})},{path:"/recipes/new",name:"new-recipe",component:pb,props:e=>({workspace:e.query.workspace})},{path:"/ingredients",name:"ingredients",component:d0,props:e=>({workspace:e.query.workspace})}]}),ao=ef(ay);ao.use(sf());ao.use(f0);ao.mount("#app");
