var Ac=Object.defineProperty;var Rc=(e,t,n)=>t in e?Ac(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>Rc(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yr(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const _e={},Pn=[],Pt=()=>{},kc=()=>!1,Js=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),br=e=>e.startsWith("onUpdate:"),Ke=Object.assign,wr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Mc=Object.prototype.hasOwnProperty,ge=(e,t)=>Mc.call(e,t),te=Array.isArray,$n=e=>hs(e)==="[object Map]",Gs=e=>hs(e)==="[object Set]",oo=e=>hs(e)==="[object Date]",ae=e=>typeof e=="function",Ae=e=>typeof e=="string",xt=e=>typeof e=="symbol",be=e=>e!==null&&typeof e=="object",Al=e=>(be(e)||ae(e))&&ae(e.then)&&ae(e.catch),Rl=Object.prototype.toString,hs=e=>Rl.call(e),Tc=e=>hs(e).slice(8,-1),kl=e=>hs(e)==="[object Object]",Sr=e=>Ae(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Kn=yr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ys=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},jc=/-(\w)/g,nn=Ys(e=>e.replace(jc,(t,n)=>n?n.toUpperCase():"")),Dc=/\B([A-Z])/g,mn=Ys(e=>e.replace(Dc,"-$1").toLowerCase()),Ml=Ys(e=>e.charAt(0).toUpperCase()+e.slice(1)),vi=Ys(e=>e?`on${Ml(e)}`:""),tn=(e,t)=>!Object.is(e,t),Es=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Di=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Ds=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let lo;const Xs=()=>lo||(lo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Zs(e){if(te(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Ae(s)?Fc(s):Zs(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(Ae(e)||be(e))return e}const Uc=/;(?![^(]*\))/g,Lc=/:([^]+)/,Nc=/\/\*[^]*?\*\//g;function Fc(e){const t={};return e.replace(Nc,"").split(Uc).forEach(n=>{if(n){const s=n.split(Lc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Lt(e){let t="";if(Ae(e))t=e;else if(te(e))for(let n=0;n<e.length;n++){const s=Lt(e[n]);s&&(t+=s+" ")}else if(be(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const qc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Vc=yr(qc);function Tl(e){return!!e||e===""}function Bc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=xn(e[s],t[s]);return n}function xn(e,t){if(e===t)return!0;let n=oo(e),s=oo(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=xt(e),s=xt(t),n||s)return e===t;if(n=te(e),s=te(t),n||s)return n&&s?Bc(e,t):!1;if(n=be(e),s=be(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const l=e.hasOwnProperty(o),a=t.hasOwnProperty(o);if(l&&!a||!l&&a||!xn(e[o],t[o]))return!1}}return String(e)===String(t)}function Hc(e,t){return e.findIndex(n=>xn(n,t))}const jl=e=>!!(e&&e.__v_isRef===!0),L=e=>Ae(e)?e:e==null?"":te(e)||be(e)&&(e.toString===Rl||!ae(e.toString))?jl(e)?L(e.value):JSON.stringify(e,Dl,2):String(e),Dl=(e,t)=>jl(t)?Dl(e,t.value):$n(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[mi(s,r)+" =>"]=i,n),{})}:Gs(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mi(n))}:xt(t)?mi(t):be(t)&&!te(t)&&!kl(t)?String(t):t,mi=(e,t="")=>{var n;return xt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ve;class Ul{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ve,!t&&Ve&&(this.index=(Ve.scopes||(Ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ve;try{return Ve=this,t()}finally{Ve=n}}}on(){++this._on===1&&(this.prevScope=Ve,Ve=this)}off(){this._on>0&&--this._on===0&&(Ve=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Ll(e){return new Ul(e)}function Or(){return Ve}function Nl(e,t=!1){Ve&&Ve.cleanups.push(e)}let Se;const _i=new WeakSet;class Fl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ve&&Ve.active&&Ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,_i.has(this)&&(_i.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Vl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ao(this),Bl(this);const t=Se,n=vt;Se=this,vt=!0;try{return this.fn()}finally{Hl(this),Se=t,vt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Pr(t);this.deps=this.depsTail=void 0,ao(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?_i.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ui(this)&&this.run()}get dirty(){return Ui(this)}}let ql=0,zn,Qn;function Vl(e,t=!1){if(e.flags|=8,t){e.next=Qn,Qn=e;return}e.next=zn,zn=e}function Ir(){ql++}function Cr(){if(--ql>0)return;if(Qn){let t=Qn;for(Qn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;zn;){let t=zn;for(zn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Bl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Hl(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Pr(s),Wc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function Ui(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===is)||(e.globalVersion=is,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ui(e))))return;e.flags|=2;const t=e.dep,n=Se,s=vt;Se=e,vt=!0;try{Bl(e);const i=e.fn(e._value);(t.version===0||tn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{Se=n,vt=s,Hl(e),e.flags&=-3}}function Pr(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Pr(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Wc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let vt=!0;const Kl=[];function Bt(){Kl.push(vt),vt=!1}function Ht(){const e=Kl.pop();vt=e===void 0?!0:e}function ao(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Se;Se=void 0;try{t()}finally{Se=n}}}let is=0;class Kc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $r{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Se||!vt||Se===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Se)n=this.activeLink=new Kc(Se,this),Se.deps?(n.prevDep=Se.depsTail,Se.depsTail.nextDep=n,Se.depsTail=n):Se.deps=Se.depsTail=n,zl(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Se.depsTail,n.nextDep=void 0,Se.depsTail.nextDep=n,Se.depsTail=n,Se.deps===n&&(Se.deps=s)}return n}trigger(t){this.version++,is++,this.notify(t)}notify(t){Ir();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Cr()}}}function zl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)zl(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Us=new WeakMap,dn=Symbol(""),Li=Symbol(""),rs=Symbol("");function He(e,t,n){if(vt&&Se){let s=Us.get(e);s||Us.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new $r),i.map=s,i.key=n),i.track()}}function Dt(e,t,n,s,i,r){const o=Us.get(e);if(!o){is++;return}const l=a=>{a&&a.trigger()};if(Ir(),t==="clear")o.forEach(l);else{const a=te(e),u=a&&Sr(n);if(a&&n==="length"){const c=Number(s);o.forEach((d,p)=>{(p==="length"||p===rs||!xt(p)&&p>=c)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(rs)),t){case"add":a?u&&l(o.get("length")):(l(o.get(dn)),$n(e)&&l(o.get(Li)));break;case"delete":a||(l(o.get(dn)),$n(e)&&l(o.get(Li)));break;case"set":$n(e)&&l(o.get(dn));break}}Cr()}function zc(e,t){const n=Us.get(e);return n&&n.get(t)}function wn(e){const t=fe(e);return t===e?t:(He(t,"iterate",rs),pt(e)?t:t.map(Fe))}function ei(e){return He(e=fe(e),"iterate",rs),e}const Qc={__proto__:null,[Symbol.iterator](){return yi(this,Symbol.iterator,Fe)},concat(...e){return wn(this).concat(...e.map(t=>te(t)?wn(t):t))},entries(){return yi(this,"entries",e=>(e[1]=Fe(e[1]),e))},every(e,t){return kt(this,"every",e,t,void 0,arguments)},filter(e,t){return kt(this,"filter",e,t,n=>n.map(Fe),arguments)},find(e,t){return kt(this,"find",e,t,Fe,arguments)},findIndex(e,t){return kt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return kt(this,"findLast",e,t,Fe,arguments)},findLastIndex(e,t){return kt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return kt(this,"forEach",e,t,void 0,arguments)},includes(...e){return bi(this,"includes",e)},indexOf(...e){return bi(this,"indexOf",e)},join(e){return wn(this).join(e)},lastIndexOf(...e){return bi(this,"lastIndexOf",e)},map(e,t){return kt(this,"map",e,t,void 0,arguments)},pop(){return Fn(this,"pop")},push(...e){return Fn(this,"push",e)},reduce(e,...t){return co(this,"reduce",e,t)},reduceRight(e,...t){return co(this,"reduceRight",e,t)},shift(){return Fn(this,"shift")},some(e,t){return kt(this,"some",e,t,void 0,arguments)},splice(...e){return Fn(this,"splice",e)},toReversed(){return wn(this).toReversed()},toSorted(e){return wn(this).toSorted(e)},toSpliced(...e){return wn(this).toSpliced(...e)},unshift(...e){return Fn(this,"unshift",e)},values(){return yi(this,"values",Fe)}};function yi(e,t,n){const s=ei(e),i=s[t]();return s!==e&&!pt(e)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=n(r.value)),r}),i}const Jc=Array.prototype;function kt(e,t,n,s,i,r){const o=ei(e),l=o!==e&&!pt(e),a=o[t];if(a!==Jc[t]){const d=a.apply(e,r);return l?Fe(d):d}let u=n;o!==e&&(l?u=function(d,p){return n.call(this,Fe(d),p,e)}:n.length>2&&(u=function(d,p){return n.call(this,d,p,e)}));const c=a.call(o,u,s);return l&&i?i(c):c}function co(e,t,n,s){const i=ei(e);let r=n;return i!==e&&(pt(e)?n.length>3&&(r=function(o,l,a){return n.call(this,o,l,a,e)}):r=function(o,l,a){return n.call(this,o,Fe(l),a,e)}),i[t](r,...s)}function bi(e,t,n){const s=fe(e);He(s,"iterate",rs);const i=s[t](...n);return(i===-1||i===!1)&&Ar(n[0])?(n[0]=fe(n[0]),s[t](...n)):i}function Fn(e,t,n=[]){Bt(),Ir();const s=fe(e)[t].apply(e,n);return Cr(),Ht(),s}const Gc=yr("__proto__,__v_isRef,__isVue"),Ql=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(xt));function Yc(e){xt(e)||(e=String(e));const t=fe(this);return He(t,"has",e),t.hasOwnProperty(e)}class Jl{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?lu:Zl:r?Xl:Yl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=te(t);if(!i){let a;if(o&&(a=Qc[n]))return a;if(n==="hasOwnProperty")return Yc}const l=Reflect.get(t,n,Pe(t)?t:s);return(xt(n)?Ql.has(n):Gc(n))||(i||He(t,"get",n),r)?l:Pe(l)?o&&Sr(n)?l:l.value:be(l)?i?ta(l):Ln(l):l}}class Gl extends Jl{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const a=sn(r);if(!pt(s)&&!sn(s)&&(r=fe(r),s=fe(s)),!te(t)&&Pe(r)&&!Pe(s))return a?!1:(r.value=s,!0)}const o=te(t)&&Sr(n)?Number(n)<t.length:ge(t,n),l=Reflect.set(t,n,s,Pe(t)?t:i);return t===fe(i)&&(o?tn(s,r)&&Dt(t,"set",n,s):Dt(t,"add",n,s)),l}deleteProperty(t,n){const s=ge(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Dt(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!xt(n)||!Ql.has(n))&&He(t,"has",n),s}ownKeys(t){return He(t,"iterate",te(t)?"length":dn),Reflect.ownKeys(t)}}class Xc extends Jl{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Zc=new Gl,eu=new Xc,tu=new Gl(!0);const Ni=e=>e,ws=e=>Reflect.getPrototypeOf(e);function nu(e,t,n){return function(...s){const i=this.__v_raw,r=fe(i),o=$n(r),l=e==="entries"||e===Symbol.iterator&&o,a=e==="keys"&&o,u=i[e](...s),c=n?Ni:t?Ls:Fe;return!t&&He(r,"iterate",a?Li:dn),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:l?[c(d[0]),c(d[1])]:c(d),done:p}},[Symbol.iterator](){return this}}}}function Ss(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function su(e,t){const n={get(i){const r=this.__v_raw,o=fe(r),l=fe(i);e||(tn(i,l)&&He(o,"get",i),He(o,"get",l));const{has:a}=ws(o),u=t?Ni:e?Ls:Fe;if(a.call(o,i))return u(r.get(i));if(a.call(o,l))return u(r.get(l));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!e&&He(fe(i),"iterate",dn),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=fe(r),l=fe(i);return e||(tn(i,l)&&He(o,"has",i),He(o,"has",l)),i===l?r.has(i):r.has(i)||r.has(l)},forEach(i,r){const o=this,l=o.__v_raw,a=fe(l),u=t?Ni:e?Ls:Fe;return!e&&He(a,"iterate",dn),l.forEach((c,d)=>i.call(r,u(c),u(d),o))}};return Ke(n,e?{add:Ss("add"),set:Ss("set"),delete:Ss("delete"),clear:Ss("clear")}:{add(i){!t&&!pt(i)&&!sn(i)&&(i=fe(i));const r=fe(this);return ws(r).has.call(r,i)||(r.add(i),Dt(r,"add",i,i)),this},set(i,r){!t&&!pt(r)&&!sn(r)&&(r=fe(r));const o=fe(this),{has:l,get:a}=ws(o);let u=l.call(o,i);u||(i=fe(i),u=l.call(o,i));const c=a.call(o,i);return o.set(i,r),u?tn(r,c)&&Dt(o,"set",i,r):Dt(o,"add",i,r),this},delete(i){const r=fe(this),{has:o,get:l}=ws(r);let a=o.call(r,i);a||(i=fe(i),a=o.call(r,i)),l&&l.call(r,i);const u=r.delete(i);return a&&Dt(r,"delete",i,void 0),u},clear(){const i=fe(this),r=i.size!==0,o=i.clear();return r&&Dt(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=nu(i,e,t)}),n}function Er(e,t){const n=su(e,t);return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(ge(n,i)&&i in s?n:s,i,r)}const iu={get:Er(!1,!1)},ru={get:Er(!1,!0)},ou={get:Er(!0,!1)};const Yl=new WeakMap,Xl=new WeakMap,Zl=new WeakMap,lu=new WeakMap;function au(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cu(e){return e.__v_skip||!Object.isExtensible(e)?0:au(Tc(e))}function Ln(e){return sn(e)?e:xr(e,!1,Zc,iu,Yl)}function ea(e){return xr(e,!1,tu,ru,Xl)}function ta(e){return xr(e,!0,eu,ou,Zl)}function xr(e,t,n,s,i){if(!be(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=cu(e);if(r===0)return e;const o=i.get(e);if(o)return o;const l=new Proxy(e,r===2?s:n);return i.set(e,l),l}function Nt(e){return sn(e)?Nt(e.__v_raw):!!(e&&e.__v_isReactive)}function sn(e){return!!(e&&e.__v_isReadonly)}function pt(e){return!!(e&&e.__v_isShallow)}function Ar(e){return e?!!e.__v_raw:!1}function fe(e){const t=e&&e.__v_raw;return t?fe(t):e}function Rr(e){return!ge(e,"__v_skip")&&Object.isExtensible(e)&&Di(e,"__v_skip",!0),e}const Fe=e=>be(e)?Ln(e):e,Ls=e=>be(e)?ta(e):e;function Pe(e){return e?e.__v_isRef===!0:!1}function Y(e){return na(e,!1)}function Ft(e){return na(e,!0)}function na(e,t){return Pe(e)?e:new uu(e,t)}class uu{constructor(t,n){this.dep=new $r,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:fe(t),this._value=n?t:Fe(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||pt(t)||sn(t);t=s?t:fe(t),tn(t,n)&&(this._rawValue=t,this._value=s?t:Fe(t),this.dep.trigger())}}function oe(e){return Pe(e)?e.value:e}function Te(e){return ae(e)?e():oe(e)}const du={get:(e,t,n)=>t==="__v_raw"?e:oe(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Pe(i)&&!Pe(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function sa(e){return Nt(e)?e:new Proxy(e,du)}function fu(e){const t=te(e)?new Array(e.length):{};for(const n in e)t[n]=ia(e,n);return t}class pu{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return zc(fe(this._object),this._key)}}class hu{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function gu(e,t,n){return Pe(e)?e:ae(e)?new hu(e):be(e)&&arguments.length>1?ia(e,t,n):Y(e)}function ia(e,t,n){const s=e[t];return Pe(s)?s:new pu(e,t,n)}class vu{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new $r(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Se!==this)return Vl(this,!0),!0}get value(){const t=this.dep.track();return Wl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function mu(e,t,n=!1){let s,i;return ae(e)?s=e:(s=e.get,i=e.set),new vu(s,i,n)}const Os={},Ns=new WeakMap;let an;function _u(e,t=!1,n=an){if(n){let s=Ns.get(n);s||Ns.set(n,s=[]),s.push(e)}}function yu(e,t,n=_e){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:l,call:a}=n,u=C=>i?C:pt(C)||i===!1||i===0?Ut(C,1):Ut(C);let c,d,p,h,_=!1,y=!1;if(Pe(e)?(d=()=>e.value,_=pt(e)):Nt(e)?(d=()=>u(e),_=!0):te(e)?(y=!0,_=e.some(C=>Nt(C)||pt(C)),d=()=>e.map(C=>{if(Pe(C))return C.value;if(Nt(C))return u(C);if(ae(C))return a?a(C,2):C()})):ae(e)?t?d=a?()=>a(e,2):e:d=()=>{if(p){Bt();try{p()}finally{Ht()}}const C=an;an=c;try{return a?a(e,3,[h]):e(h)}finally{an=C}}:d=Pt,t&&i){const C=d,w=i===!0?1/0:i;d=()=>Ut(C(),w)}const I=Or(),M=()=>{c.stop(),I&&I.active&&wr(I.effects,c)};if(r&&t){const C=t;t=(...w)=>{C(...w),M()}}let E=y?new Array(e.length).fill(Os):Os;const O=C=>{if(!(!(c.flags&1)||!c.dirty&&!C))if(t){const w=c.run();if(i||_||(y?w.some((P,N)=>tn(P,E[N])):tn(w,E))){p&&p();const P=an;an=c;try{const N=[w,E===Os?void 0:y&&E[0]===Os?[]:E,h];E=w,a?a(t,3,N):t(...N)}finally{an=P}}}else c.run()};return l&&l(O),c=new Fl(d),c.scheduler=o?()=>o(O,!1):O,h=C=>_u(C,!1,c),p=c.onStop=()=>{const C=Ns.get(c);if(C){if(a)a(C,4);else for(const w of C)w();Ns.delete(c)}},t?s?O(!0):E=c.run():o?o(O.bind(null,!0),!0):c.run(),M.pause=c.pause.bind(c),M.resume=c.resume.bind(c),M.stop=M,M}function Ut(e,t=1/0,n){if(t<=0||!be(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Pe(e))Ut(e.value,t,n);else if(te(e))for(let s=0;s<e.length;s++)Ut(e[s],t,n);else if(Gs(e)||$n(e))e.forEach(s=>{Ut(s,t,n)});else if(kl(e)){for(const s in e)Ut(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ut(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gs(e,t,n,s){try{return s?e(...s):e()}catch(i){ti(i,t,n)}}function At(e,t,n,s){if(ae(e)){const i=gs(e,t,n,s);return i&&Al(i)&&i.catch(r=>{ti(r,t,n)}),i}if(te(e)){const i=[];for(let r=0;r<e.length;r++)i.push(At(e[r],t,n,s));return i}}function ti(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||_e;if(t){let l=t.parent;const a=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const c=l.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,a,u)===!1)return}l=l.parent}if(r){Bt(),gs(r,null,10,[e,a,u]),Ht();return}}bu(e,n,i,s,o)}function bu(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Je=[];let Ot=-1;const En=[];let Yt=null,On=0;const ra=Promise.resolve();let Fs=null;function ni(e){const t=Fs||ra;return e?t.then(this?e.bind(this):e):t}function wu(e){let t=Ot+1,n=Je.length;for(;t<n;){const s=t+n>>>1,i=Je[s],r=os(i);r<e||r===e&&i.flags&2?t=s+1:n=s}return t}function kr(e){if(!(e.flags&1)){const t=os(e),n=Je[Je.length-1];!n||!(e.flags&2)&&t>=os(n)?Je.push(e):Je.splice(wu(t),0,e),e.flags|=1,oa()}}function oa(){Fs||(Fs=ra.then(aa))}function Su(e){te(e)?En.push(...e):Yt&&e.id===-1?Yt.splice(On+1,0,e):e.flags&1||(En.push(e),e.flags|=1),oa()}function uo(e,t,n=Ot+1){for(;n<Je.length;n++){const s=Je[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Je.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function la(e){if(En.length){const t=[...new Set(En)].sort((n,s)=>os(n)-os(s));if(En.length=0,Yt){Yt.push(...t);return}for(Yt=t,On=0;On<Yt.length;On++){const n=Yt[On];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Yt=null,On=0}}const os=e=>e.id==null?e.flags&2?-1:1/0:e.id;function aa(e){try{for(Ot=0;Ot<Je.length;Ot++){const t=Je[Ot];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),gs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ot<Je.length;Ot++){const t=Je[Ot];t&&(t.flags&=-2)}Ot=-1,Je.length=0,la(),Fs=null,(Je.length||En.length)&&aa()}}let at=null,ca=null;function qs(e){const t=at;return at=e,ca=e&&e.type.__scopeId||null,t}function Fi(e,t=at,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&bo(-1);const r=qs(t);let o;try{o=e(...i)}finally{qs(r),s._d&&bo(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Oe(e,t){if(at===null)return e;const n=li(at),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,l,a=_e]=t[i];r&&(ae(r)&&(r={mounted:r,updated:r}),r.deep&&Ut(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:l,modifiers:a}))}return e}function on(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const l=i[o];r&&(l.oldValue=r[o].value);let a=l.dir[s];a&&(Bt(),At(a,n,8,[e.el,l,e,t]),Ht())}}const Ou=Symbol("_vte"),Iu=e=>e.__isTeleport;function Mr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Mr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Le(e,t){return ae(e)?Ke({name:e.name},t,{setup:e}):e}function ua(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Jn(e,t,n,s,i=!1){if(te(e)){e.forEach((_,y)=>Jn(_,t&&(te(t)?t[y]:t),n,s,i));return}if(Gn(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Jn(e,t,n,s.component.subTree);return}const r=s.shapeFlag&4?li(s.component):s.el,o=i?null:r,{i:l,r:a}=e,u=t&&t.r,c=l.refs===_e?l.refs={}:l.refs,d=l.setupState,p=fe(d),h=d===_e?()=>!1:_=>ge(p,_);if(u!=null&&u!==a&&(Ae(u)?(c[u]=null,h(u)&&(d[u]=null)):Pe(u)&&(u.value=null)),ae(a))gs(a,l,12,[o,c]);else{const _=Ae(a),y=Pe(a);if(_||y){const I=()=>{if(e.f){const M=_?h(a)?d[a]:c[a]:a.value;i?te(M)&&wr(M,r):te(M)?M.includes(r)||M.push(r):_?(c[a]=[r],h(a)&&(d[a]=c[a])):(a.value=[r],e.k&&(c[e.k]=a.value))}else _?(c[a]=o,h(a)&&(d[a]=o)):y&&(a.value=o,e.k&&(c[e.k]=o))};o?(I.id=-1,ot(I,n)):I()}}}Xs().requestIdleCallback;Xs().cancelIdleCallback;const Gn=e=>!!e.type.__asyncLoader,da=e=>e.type.__isKeepAlive;function Cu(e,t){fa(e,"a",t)}function Pu(e,t){fa(e,"da",t)}function fa(e,t,n=We){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(si(t,s,n),n){let i=n.parent;for(;i&&i.parent;)da(i.parent.vnode)&&$u(s,t,n,i),i=i.parent}}function $u(e,t,n,s){const i=si(t,e,s,!0);pa(()=>{wr(s[t],i)},n)}function si(e,t,n=We,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Bt();const l=vs(n),a=At(t,n,e,o);return l(),Ht(),a});return s?i.unshift(r):i.push(r),r}}const zt=e=>(t,n=We)=>{(!as||e==="sp")&&si(e,(...s)=>t(...s),n)},Eu=zt("bm"),ii=zt("m"),xu=zt("bu"),Au=zt("u"),Ru=zt("bum"),pa=zt("um"),ku=zt("sp"),Mu=zt("rtg"),Tu=zt("rtc");function ju(e,t=We){si("ec",e,t)}const Du=Symbol.for("v-ndc");function Ee(e,t,n,s){let i;const r=n,o=te(e);if(o||Ae(e)){const l=o&&Nt(e);let a=!1,u=!1;l&&(a=!pt(e),u=sn(e),e=ei(e)),i=new Array(e.length);for(let c=0,d=e.length;c<d;c++)i[c]=t(a?u?Ls(Fe(e[c])):Fe(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){i=new Array(e);for(let l=0;l<e;l++)i[l]=t(l+1,l,void 0,r)}else if(be(e))if(e[Symbol.iterator])i=Array.from(e,(l,a)=>t(l,a,void 0,r));else{const l=Object.keys(e);i=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];i[a]=t(e[c],c,a,r)}}else i=[];return i}const qi=e=>e?ka(e)?li(e):qi(e.parent):null,Yn=Ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>qi(e.parent),$root:e=>qi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ga(e),$forceUpdate:e=>e.f||(e.f=()=>{kr(e.update)}),$nextTick:e=>e.n||(e.n=ni.bind(e.proxy)),$watch:e=>id.bind(e)}),wi=(e,t)=>e!==_e&&!e.__isScriptSetup&&ge(e,t),Uu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:l,appContext:a}=e;let u;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(wi(s,t))return o[t]=1,s[t];if(i!==_e&&ge(i,t))return o[t]=2,i[t];if((u=e.propsOptions[0])&&ge(u,t))return o[t]=3,r[t];if(n!==_e&&ge(n,t))return o[t]=4,n[t];Vi&&(o[t]=0)}}const c=Yn[t];let d,p;if(c)return t==="$attrs"&&He(e.attrs,"get",""),c(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==_e&&ge(n,t))return o[t]=4,n[t];if(p=a.config.globalProperties,ge(p,t))return p[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return wi(i,t)?(i[t]=n,!0):s!==_e&&ge(s,t)?(s[t]=n,!0):ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let l;return!!n[o]||e!==_e&&ge(e,o)||wi(t,o)||(l=r[0])&&ge(l,o)||ge(s,o)||ge(Yn,o)||ge(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ge(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function fo(e){return te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Vi=!0;function Lu(e){const t=ga(e),n=e.proxy,s=e.ctx;Vi=!1,t.beforeCreate&&po(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:l,provide:a,inject:u,created:c,beforeMount:d,mounted:p,beforeUpdate:h,updated:_,activated:y,deactivated:I,beforeDestroy:M,beforeUnmount:E,destroyed:O,unmounted:C,render:w,renderTracked:P,renderTriggered:N,errorCaptured:V,serverPrefetch:j,expose:m,inheritAttrs:S,components:k,directives:F,filters:$}=t;if(u&&Nu(u,s,null),o)for(const B in o){const ne=o[B];ae(ne)&&(s[B]=ne.bind(n))}if(i){const B=i.call(n,n);be(B)&&(e.data=Ln(B))}if(Vi=!0,r)for(const B in r){const ne=r[B],Re=ae(ne)?ne.bind(n,n):ae(ne.get)?ne.get.bind(n,n):Pt,le=!ae(ne)&&ae(ne.set)?ne.set.bind(n):Pt,xe=se({get:Re,set:le});Object.defineProperty(s,B,{enumerable:!0,configurable:!0,get:()=>xe.value,set:qe=>xe.value=qe})}if(l)for(const B in l)ha(l[B],s,n,B);if(a){const B=ae(a)?a.call(n):a;Reflect.ownKeys(B).forEach(ne=>{xs(ne,B[ne])})}c&&po(c,e,"c");function ie(B,ne){te(ne)?ne.forEach(Re=>B(Re.bind(n))):ne&&B(ne.bind(n))}if(ie(Eu,d),ie(ii,p),ie(xu,h),ie(Au,_),ie(Cu,y),ie(Pu,I),ie(ju,V),ie(Tu,P),ie(Mu,N),ie(Ru,E),ie(pa,C),ie(ku,j),te(m))if(m.length){const B=e.exposed||(e.exposed={});m.forEach(ne=>{Object.defineProperty(B,ne,{get:()=>n[ne],set:Re=>n[ne]=Re})})}else e.exposed||(e.exposed={});w&&e.render===Pt&&(e.render=w),S!=null&&(e.inheritAttrs=S),k&&(e.components=k),F&&(e.directives=F),j&&ua(e)}function Nu(e,t,n=Pt){te(e)&&(e=Bi(e));for(const s in e){const i=e[s];let r;be(i)?"default"in i?r=$t(i.from||s,i.default,!0):r=$t(i.from||s):r=$t(i),Pe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function po(e,t,n){At(te(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function ha(e,t,n,s){let i=s.includes(".")?$a(n,s):()=>n[s];if(Ae(e)){const r=t[e];ae(r)&&st(i,r)}else if(ae(e))st(i,e.bind(n));else if(be(e))if(te(e))e.forEach(r=>ha(r,t,n,s));else{const r=ae(e.handler)?e.handler.bind(n):t[e.handler];ae(r)&&st(i,r,e)}}function ga(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,l=r.get(t);let a;return l?a=l:!i.length&&!n&&!s?a=t:(a={},i.length&&i.forEach(u=>Vs(a,u,o,!0)),Vs(a,t,o)),be(t)&&r.set(t,a),a}function Vs(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&Vs(e,r,n,!0),i&&i.forEach(o=>Vs(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const l=Fu[o]||n&&n[o];e[o]=l?l(e[o],t[o]):t[o]}return e}const Fu={data:ho,props:go,emits:go,methods:Bn,computed:Bn,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:Bn,directives:Bn,watch:Vu,provide:ho,inject:qu};function ho(e,t){return t?e?function(){return Ke(ae(e)?e.call(this,this):e,ae(t)?t.call(this,this):t)}:t:e}function qu(e,t){return Bn(Bi(e),Bi(t))}function Bi(e){if(te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Qe(e,t){return e?[...new Set([].concat(e,t))]:t}function Bn(e,t){return e?Ke(Object.create(null),e,t):t}function go(e,t){return e?te(e)&&te(t)?[...new Set([...e,...t])]:Ke(Object.create(null),fo(e),fo(t??{})):t}function Vu(e,t){if(!e)return t;if(!t)return e;const n=Ke(Object.create(null),e);for(const s in t)n[s]=Qe(e[s],t[s]);return n}function va(){return{app:null,config:{isNativeTag:kc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Bu=0;function Hu(e,t){return function(s,i=null){ae(s)||(s=Ke({},s)),i!=null&&!be(i)&&(i=null);const r=va(),o=new WeakSet,l=[];let a=!1;const u=r.app={_uid:Bu++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:Id,get config(){return r.config},set config(c){},use(c,...d){return o.has(c)||(c&&ae(c.install)?(o.add(c),c.install(u,...d)):ae(c)&&(o.add(c),c(u,...d))),u},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),u},component(c,d){return d?(r.components[c]=d,u):r.components[c]},directive(c,d){return d?(r.directives[c]=d,u):r.directives[c]},mount(c,d,p){if(!a){const h=u._ceVNode||Ce(s,i);return h.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),e(h,c,p),a=!0,u._container=c,c.__vue_app__=u,li(h.component)}},onUnmount(c){l.push(c)},unmount(){a&&(At(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return r.provides[c]=d,u},runWithContext(c){const d=fn;fn=u;try{return c()}finally{fn=d}}};return u}}let fn=null;function xs(e,t){if(We){let n=We.provides;const s=We.parent&&We.parent.provides;s===n&&(n=We.provides=Object.create(s)),n[e]=t}}function $t(e,t,n=!1){const s=We||at;if(s||fn){let i=fn?fn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&ae(t)?t.call(s&&s.proxy):t}}function Wu(){return!!(We||at||fn)}const ma={},_a=()=>Object.create(ma),ya=e=>Object.getPrototypeOf(e)===ma;function Ku(e,t,n,s=!1){const i={},r=_a();e.propsDefaults=Object.create(null),ba(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:ea(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function zu(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,l=fe(i),[a]=e.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let p=c[d];if(ri(e.emitsOptions,p))continue;const h=t[p];if(a)if(ge(r,p))h!==r[p]&&(r[p]=h,u=!0);else{const _=nn(p);i[_]=Hi(a,l,_,h,e,!1)}else h!==r[p]&&(r[p]=h,u=!0)}}}else{ba(e,t,i,r)&&(u=!0);let c;for(const d in l)(!t||!ge(t,d)&&((c=mn(d))===d||!ge(t,c)))&&(a?n&&(n[d]!==void 0||n[c]!==void 0)&&(i[d]=Hi(a,l,d,void 0,e,!0)):delete i[d]);if(r!==l)for(const d in r)(!t||!ge(t,d))&&(delete r[d],u=!0)}u&&Dt(e.attrs,"set","")}function ba(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,l;if(t)for(let a in t){if(Kn(a))continue;const u=t[a];let c;i&&ge(i,c=nn(a))?!r||!r.includes(c)?n[c]=u:(l||(l={}))[c]=u:ri(e.emitsOptions,a)||(!(a in s)||u!==s[a])&&(s[a]=u,o=!0)}if(r){const a=fe(n),u=l||_e;for(let c=0;c<r.length;c++){const d=r[c];n[d]=Hi(i,a,d,u[d],e,!ge(u,d))}}return o}function Hi(e,t,n,s,i,r){const o=e[n];if(o!=null){const l=ge(o,"default");if(l&&s===void 0){const a=o.default;if(o.type!==Function&&!o.skipFactory&&ae(a)){const{propsDefaults:u}=i;if(n in u)s=u[n];else{const c=vs(i);s=u[n]=a.call(null,t),c()}}else s=a;i.ce&&i.ce._setProp(n,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===mn(n))&&(s=!0))}return s}const Qu=new WeakMap;function wa(e,t,n=!1){const s=n?Qu:t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},l=[];let a=!1;if(!ae(e)){const c=d=>{a=!0;const[p,h]=wa(d,t,!0);Ke(o,p),h&&l.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!a)return be(e)&&s.set(e,Pn),Pn;if(te(r))for(let c=0;c<r.length;c++){const d=nn(r[c]);vo(d)&&(o[d]=_e)}else if(r)for(const c in r){const d=nn(c);if(vo(d)){const p=r[c],h=o[d]=te(p)||ae(p)?{type:p}:Ke({},p),_=h.type;let y=!1,I=!0;if(te(_))for(let M=0;M<_.length;++M){const E=_[M],O=ae(E)&&E.name;if(O==="Boolean"){y=!0;break}else O==="String"&&(I=!1)}else y=ae(_)&&_.name==="Boolean";h[0]=y,h[1]=I,(y||ge(h,"default"))&&l.push(d)}}const u=[o,l];return be(e)&&s.set(e,u),u}function vo(e){return e[0]!=="$"&&!Kn(e)}const Tr=e=>e[0]==="_"||e==="$stable",jr=e=>te(e)?e.map(Ct):[Ct(e)],Ju=(e,t,n)=>{if(t._n)return t;const s=Fi((...i)=>jr(t(...i)),n);return s._c=!1,s},Sa=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Tr(i))continue;const r=e[i];if(ae(r))t[i]=Ju(i,r,s);else if(r!=null){const o=jr(r);t[i]=()=>o}}},Oa=(e,t)=>{const n=jr(t);e.slots.default=()=>n},Ia=(e,t,n)=>{for(const s in t)(n||!Tr(s))&&(e[s]=t[s])},Gu=(e,t,n)=>{const s=e.slots=_a();if(e.vnode.shapeFlag&32){const i=t.__;i&&Di(s,"__",i,!0);const r=t._;r?(Ia(s,t,n),n&&Di(s,"_",r,!0)):Sa(t,s)}else t&&Oa(e,t)},Yu=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=_e;if(s.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:Ia(i,t,n):(r=!t.$stable,Sa(t,i)),o=t}else t&&(Oa(e,t),o={default:1});if(r)for(const l in i)!Tr(l)&&o[l]==null&&delete i[l]},ot=dd;function Xu(e){return Zu(e)}function Zu(e,t){const n=Xs();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:l,createComment:a,setText:u,setElementText:c,parentNode:d,nextSibling:p,setScopeId:h=Pt,insertStaticContent:_}=e,y=(g,v,b,A=null,T=null,R=null,Q=void 0,K=null,W=!!v.dynamicChildren)=>{if(g===v)return;g&&!qn(g,v)&&(A=x(g),qe(g,T,R,!0),g=null),v.patchFlag===-2&&(W=!1,v.dynamicChildren=null);const{type:U,ref:ee,shapeFlag:J}=v;switch(U){case oi:I(g,v,b,A);break;case rn:M(g,v,b,A);break;case Oi:g==null&&E(v,b,A,Q);break;case pe:k(g,v,b,A,T,R,Q,K,W);break;default:J&1?w(g,v,b,A,T,R,Q,K,W):J&6?F(g,v,b,A,T,R,Q,K,W):(J&64||J&128)&&U.process(g,v,b,A,T,R,Q,K,W,X)}ee!=null&&T?Jn(ee,g&&g.ref,R,v||g,!v):ee==null&&g&&g.ref!=null&&Jn(g.ref,null,R,g,!0)},I=(g,v,b,A)=>{if(g==null)s(v.el=l(v.children),b,A);else{const T=v.el=g.el;v.children!==g.children&&u(T,v.children)}},M=(g,v,b,A)=>{g==null?s(v.el=a(v.children||""),b,A):v.el=g.el},E=(g,v,b,A)=>{[g.el,g.anchor]=_(g.children,v,b,A,g.el,g.anchor)},O=({el:g,anchor:v},b,A)=>{let T;for(;g&&g!==v;)T=p(g),s(g,b,A),g=T;s(v,b,A)},C=({el:g,anchor:v})=>{let b;for(;g&&g!==v;)b=p(g),i(g),g=b;i(v)},w=(g,v,b,A,T,R,Q,K,W)=>{v.type==="svg"?Q="svg":v.type==="math"&&(Q="mathml"),g==null?P(v,b,A,T,R,Q,K,W):j(g,v,T,R,Q,K,W)},P=(g,v,b,A,T,R,Q,K)=>{let W,U;const{props:ee,shapeFlag:J,transition:Z,dirs:re}=g;if(W=g.el=o(g.type,R,ee&&ee.is,ee),J&8?c(W,g.children):J&16&&V(g.children,W,null,A,T,Si(g,R),Q,K),re&&on(g,null,A,"created"),N(W,g,g.scopeId,Q,A),ee){for(const we in ee)we!=="value"&&!Kn(we)&&r(W,we,null,ee[we],R,A);"value"in ee&&r(W,"value",null,ee.value,R),(U=ee.onVnodeBeforeMount)&&St(U,A,g)}re&&on(g,null,A,"beforeMount");const de=ed(T,Z);de&&Z.beforeEnter(W),s(W,v,b),((U=ee&&ee.onVnodeMounted)||de||re)&&ot(()=>{U&&St(U,A,g),de&&Z.enter(W),re&&on(g,null,A,"mounted")},T)},N=(g,v,b,A,T)=>{if(b&&h(g,b),A)for(let R=0;R<A.length;R++)h(g,A[R]);if(T){let R=T.subTree;if(v===R||xa(R.type)&&(R.ssContent===v||R.ssFallback===v)){const Q=T.vnode;N(g,Q,Q.scopeId,Q.slotScopeIds,T.parent)}}},V=(g,v,b,A,T,R,Q,K,W=0)=>{for(let U=W;U<g.length;U++){const ee=g[U]=K?Xt(g[U]):Ct(g[U]);y(null,ee,v,b,A,T,R,Q,K)}},j=(g,v,b,A,T,R,Q)=>{const K=v.el=g.el;let{patchFlag:W,dynamicChildren:U,dirs:ee}=v;W|=g.patchFlag&16;const J=g.props||_e,Z=v.props||_e;let re;if(b&&ln(b,!1),(re=Z.onVnodeBeforeUpdate)&&St(re,b,v,g),ee&&on(v,g,b,"beforeUpdate"),b&&ln(b,!0),(J.innerHTML&&Z.innerHTML==null||J.textContent&&Z.textContent==null)&&c(K,""),U?m(g.dynamicChildren,U,K,b,A,Si(v,T),R):Q||ne(g,v,K,null,b,A,Si(v,T),R,!1),W>0){if(W&16)S(K,J,Z,b,T);else if(W&2&&J.class!==Z.class&&r(K,"class",null,Z.class,T),W&4&&r(K,"style",J.style,Z.style,T),W&8){const de=v.dynamicProps;for(let we=0;we<de.length;we++){const ve=de[we],et=J[ve],tt=Z[ve];(tt!==et||ve==="value")&&r(K,ve,et,tt,T,b)}}W&1&&g.children!==v.children&&c(K,v.children)}else!Q&&U==null&&S(K,J,Z,b,T);((re=Z.onVnodeUpdated)||ee)&&ot(()=>{re&&St(re,b,v,g),ee&&on(v,g,b,"updated")},A)},m=(g,v,b,A,T,R,Q)=>{for(let K=0;K<v.length;K++){const W=g[K],U=v[K],ee=W.el&&(W.type===pe||!qn(W,U)||W.shapeFlag&198)?d(W.el):b;y(W,U,ee,null,A,T,R,Q,!0)}},S=(g,v,b,A,T)=>{if(v!==b){if(v!==_e)for(const R in v)!Kn(R)&&!(R in b)&&r(g,R,v[R],null,T,A);for(const R in b){if(Kn(R))continue;const Q=b[R],K=v[R];Q!==K&&R!=="value"&&r(g,R,K,Q,T,A)}"value"in b&&r(g,"value",v.value,b.value,T)}},k=(g,v,b,A,T,R,Q,K,W)=>{const U=v.el=g?g.el:l(""),ee=v.anchor=g?g.anchor:l("");let{patchFlag:J,dynamicChildren:Z,slotScopeIds:re}=v;re&&(K=K?K.concat(re):re),g==null?(s(U,b,A),s(ee,b,A),V(v.children||[],b,ee,T,R,Q,K,W)):J>0&&J&64&&Z&&g.dynamicChildren?(m(g.dynamicChildren,Z,b,T,R,Q,K),(v.key!=null||T&&v===T.subTree)&&Ca(g,v,!0)):ne(g,v,b,ee,T,R,Q,K,W)},F=(g,v,b,A,T,R,Q,K,W)=>{v.slotScopeIds=K,g==null?v.shapeFlag&512?T.ctx.activate(v,b,A,Q,W):$(v,b,A,T,R,Q,W):q(g,v,W)},$=(g,v,b,A,T,R,Q)=>{const K=g.component=_d(g,A,T);if(da(g)&&(K.ctx.renderer=X),yd(K,!1,Q),K.asyncDep){if(T&&T.registerDep(K,ie,Q),!g.el){const W=K.subTree=Ce(rn);M(null,W,v,b)}}else ie(K,g,v,b,T,R,Q)},q=(g,v,b)=>{const A=v.component=g.component;if(cd(g,v,b))if(A.asyncDep&&!A.asyncResolved){B(A,v,b);return}else A.next=v,A.update();else v.el=g.el,A.vnode=v},ie=(g,v,b,A,T,R,Q)=>{const K=()=>{if(g.isMounted){let{next:J,bu:Z,u:re,parent:de,vnode:we}=g;{const bt=Pa(g);if(bt){J&&(J.el=we.el,B(g,J,Q)),bt.asyncDep.then(()=>{g.isUnmounted||K()});return}}let ve=J,et;ln(g,!1),J?(J.el=we.el,B(g,J,Q)):J=we,Z&&Es(Z),(et=J.props&&J.props.onVnodeBeforeUpdate)&&St(et,de,J,we),ln(g,!0);const tt=_o(g),yt=g.subTree;g.subTree=tt,y(yt,tt,d(yt.el),x(yt),g,T,R),J.el=tt.el,ve===null&&ud(g,tt.el),re&&ot(re,T),(et=J.props&&J.props.onVnodeUpdated)&&ot(()=>St(et,de,J,we),T)}else{let J;const{el:Z,props:re}=v,{bm:de,m:we,parent:ve,root:et,type:tt}=g,yt=Gn(v);ln(g,!1),de&&Es(de),!yt&&(J=re&&re.onVnodeBeforeMount)&&St(J,ve,v),ln(g,!0);{et.ce&&et.ce._def.shadowRoot!==!1&&et.ce._injectChildStyle(tt);const bt=g.subTree=_o(g);y(null,bt,b,A,g,T,R),v.el=bt.el}if(we&&ot(we,T),!yt&&(J=re&&re.onVnodeMounted)){const bt=v;ot(()=>St(J,ve,bt),T)}(v.shapeFlag&256||ve&&Gn(ve.vnode)&&ve.vnode.shapeFlag&256)&&g.a&&ot(g.a,T),g.isMounted=!0,v=b=A=null}};g.scope.on();const W=g.effect=new Fl(K);g.scope.off();const U=g.update=W.run.bind(W),ee=g.job=W.runIfDirty.bind(W);ee.i=g,ee.id=g.uid,W.scheduler=()=>kr(ee),ln(g,!0),U()},B=(g,v,b)=>{v.component=g;const A=g.vnode.props;g.vnode=v,g.next=null,zu(g,v.props,A,b),Yu(g,v.children,b),Bt(),uo(g),Ht()},ne=(g,v,b,A,T,R,Q,K,W=!1)=>{const U=g&&g.children,ee=g?g.shapeFlag:0,J=v.children,{patchFlag:Z,shapeFlag:re}=v;if(Z>0){if(Z&128){le(U,J,b,A,T,R,Q,K,W);return}else if(Z&256){Re(U,J,b,A,T,R,Q,K,W);return}}re&8?(ee&16&&Ze(U,T,R),J!==U&&c(b,J)):ee&16?re&16?le(U,J,b,A,T,R,Q,K,W):Ze(U,T,R,!0):(ee&8&&c(b,""),re&16&&V(J,b,A,T,R,Q,K,W))},Re=(g,v,b,A,T,R,Q,K,W)=>{g=g||Pn,v=v||Pn;const U=g.length,ee=v.length,J=Math.min(U,ee);let Z;for(Z=0;Z<J;Z++){const re=v[Z]=W?Xt(v[Z]):Ct(v[Z]);y(g[Z],re,b,null,T,R,Q,K,W)}U>ee?Ze(g,T,R,!0,!1,J):V(v,b,A,T,R,Q,K,W,J)},le=(g,v,b,A,T,R,Q,K,W)=>{let U=0;const ee=v.length;let J=g.length-1,Z=ee-1;for(;U<=J&&U<=Z;){const re=g[U],de=v[U]=W?Xt(v[U]):Ct(v[U]);if(qn(re,de))y(re,de,b,null,T,R,Q,K,W);else break;U++}for(;U<=J&&U<=Z;){const re=g[J],de=v[Z]=W?Xt(v[Z]):Ct(v[Z]);if(qn(re,de))y(re,de,b,null,T,R,Q,K,W);else break;J--,Z--}if(U>J){if(U<=Z){const re=Z+1,de=re<ee?v[re].el:A;for(;U<=Z;)y(null,v[U]=W?Xt(v[U]):Ct(v[U]),b,de,T,R,Q,K,W),U++}}else if(U>Z)for(;U<=J;)qe(g[U],T,R,!0),U++;else{const re=U,de=U,we=new Map;for(U=de;U<=Z;U++){const rt=v[U]=W?Xt(v[U]):Ct(v[U]);rt.key!=null&&we.set(rt.key,U)}let ve,et=0;const tt=Z-de+1;let yt=!1,bt=0;const Nn=new Array(tt);for(U=0;U<tt;U++)Nn[U]=0;for(U=re;U<=J;U++){const rt=g[U];if(et>=tt){qe(rt,T,R,!0);continue}let wt;if(rt.key!=null)wt=we.get(rt.key);else for(ve=de;ve<=Z;ve++)if(Nn[ve-de]===0&&qn(rt,v[ve])){wt=ve;break}wt===void 0?qe(rt,T,R,!0):(Nn[wt-de]=U+1,wt>=bt?bt=wt:yt=!0,y(rt,v[wt],b,null,T,R,Q,K,W),et++)}const io=yt?td(Nn):Pn;for(ve=io.length-1,U=tt-1;U>=0;U--){const rt=de+U,wt=v[rt],ro=rt+1<ee?v[rt+1].el:A;Nn[U]===0?y(null,wt,b,ro,T,R,Q,K,W):yt&&(ve<0||U!==io[ve]?xe(wt,b,ro,2):ve--)}}},xe=(g,v,b,A,T=null)=>{const{el:R,type:Q,transition:K,children:W,shapeFlag:U}=g;if(U&6){xe(g.component.subTree,v,b,A);return}if(U&128){g.suspense.move(v,b,A);return}if(U&64){Q.move(g,v,b,X);return}if(Q===pe){s(R,v,b);for(let J=0;J<W.length;J++)xe(W[J],v,b,A);s(g.anchor,v,b);return}if(Q===Oi){O(g,v,b);return}if(A!==2&&U&1&&K)if(A===0)K.beforeEnter(R),s(R,v,b),ot(()=>K.enter(R),T);else{const{leave:J,delayLeave:Z,afterLeave:re}=K,de=()=>{g.ctx.isUnmounted?i(R):s(R,v,b)},we=()=>{J(R,()=>{de(),re&&re()})};Z?Z(R,de,we):we()}else s(R,v,b)},qe=(g,v,b,A=!1,T=!1)=>{const{type:R,props:Q,ref:K,children:W,dynamicChildren:U,shapeFlag:ee,patchFlag:J,dirs:Z,cacheIndex:re}=g;if(J===-2&&(T=!1),K!=null&&(Bt(),Jn(K,null,b,g,!0),Ht()),re!=null&&(v.renderCache[re]=void 0),ee&256){v.ctx.deactivate(g);return}const de=ee&1&&Z,we=!Gn(g);let ve;if(we&&(ve=Q&&Q.onVnodeBeforeUnmount)&&St(ve,v,g),ee&6)bn(g.component,b,A);else{if(ee&128){g.suspense.unmount(b,A);return}de&&on(g,null,v,"beforeUnmount"),ee&64?g.type.remove(g,v,b,X,A):U&&!U.hasOnce&&(R!==pe||J>0&&J&64)?Ze(U,v,b,!1,!0):(R===pe&&J&384||!T&&ee&16)&&Ze(W,v,b),A&&Xe(g)}(we&&(ve=Q&&Q.onVnodeUnmounted)||de)&&ot(()=>{ve&&St(ve,v,g),de&&on(g,null,v,"unmounted")},b)},Xe=g=>{const{type:v,el:b,anchor:A,transition:T}=g;if(v===pe){Qt(b,A);return}if(v===Oi){C(g);return}const R=()=>{i(b),T&&!T.persisted&&T.afterLeave&&T.afterLeave()};if(g.shapeFlag&1&&T&&!T.persisted){const{leave:Q,delayLeave:K}=T,W=()=>Q(b,R);K?K(g.el,R,W):W()}else R()},Qt=(g,v)=>{let b;for(;g!==v;)b=p(g),i(g),g=b;i(v)},bn=(g,v,b)=>{const{bum:A,scope:T,job:R,subTree:Q,um:K,m:W,a:U,parent:ee,slots:{__:J}}=g;mo(W),mo(U),A&&Es(A),ee&&te(J)&&J.forEach(Z=>{ee.renderCache[Z]=void 0}),T.stop(),R&&(R.flags|=8,qe(Q,g,v,b)),K&&ot(K,v),ot(()=>{g.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},Ze=(g,v,b,A=!1,T=!1,R=0)=>{for(let Q=R;Q<g.length;Q++)qe(g[Q],v,b,A,T)},x=g=>{if(g.shapeFlag&6)return x(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const v=p(g.anchor||g.el),b=v&&v[Ou];return b?p(b):v};let G=!1;const z=(g,v,b)=>{g==null?v._vnode&&qe(v._vnode,null,null,!0):y(v._vnode||null,g,v,null,null,null,b),v._vnode=g,G||(G=!0,uo(),la(),G=!1)},X={p:y,um:qe,m:xe,r:Xe,mt:$,mc:V,pc:ne,pbc:m,n:x,o:e};return{render:z,hydrate:void 0,createApp:Hu(z)}}function Si({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ln({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ed(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ca(e,t,n=!1){const s=e.children,i=t.children;if(te(s)&&te(i))for(let r=0;r<s.length;r++){const o=s[r];let l=i[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=i[r]=Xt(i[r]),l.el=o.el),!n&&l.patchFlag!==-2&&Ca(o,l)),l.type===oi&&(l.el=o.el),l.type===rn&&!l.el&&(l.el=o.el)}}function td(e){const t=e.slice(),n=[0];let s,i,r,o,l;const a=e.length;for(s=0;s<a;s++){const u=e[s];if(u!==0){if(i=n[n.length-1],e[i]<u){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)l=r+o>>1,e[n[l]]<u?r=l+1:o=l;u<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function Pa(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Pa(t)}function mo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const nd=Symbol.for("v-scx"),sd=()=>$t(nd);function hn(e,t){return Dr(e,null,t)}function st(e,t,n){return Dr(e,t,n)}function Dr(e,t,n=_e){const{immediate:s,deep:i,flush:r,once:o}=n,l=Ke({},n),a=t&&s||!t&&r!=="post";let u;if(as){if(r==="sync"){const h=sd();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!a){const h=()=>{};return h.stop=Pt,h.resume=Pt,h.pause=Pt,h}}const c=We;l.call=(h,_,y)=>At(h,c,_,y);let d=!1;r==="post"?l.scheduler=h=>{ot(h,c&&c.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(h,_)=>{_?h():kr(h)}),l.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const p=yu(e,t,l);return as&&(u?u.push(p):a&&p()),p}function id(e,t,n){const s=this.proxy,i=Ae(e)?e.includes(".")?$a(s,e):()=>s[e]:e.bind(s,s);let r;ae(t)?r=t:(r=t.handler,n=t);const o=vs(this),l=Dr(i,r.bind(s),n);return o(),l}function $a(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const rd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${nn(t)}Modifiers`]||e[`${mn(t)}Modifiers`];function od(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||_e;let i=n;const r=t.startsWith("update:"),o=r&&rd(s,t.slice(7));o&&(o.trim&&(i=n.map(c=>Ae(c)?c.trim():c)),o.number&&(i=n.map(Ds)));let l,a=s[l=vi(t)]||s[l=vi(nn(t))];!a&&r&&(a=s[l=vi(mn(t))]),a&&At(a,e,6,i);const u=s[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,At(u,e,6,i)}}function Ea(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},l=!1;if(!ae(e)){const a=u=>{const c=Ea(u,t,!0);c&&(l=!0,Ke(o,c))};!n&&t.mixins.length&&t.mixins.forEach(a),e.extends&&a(e.extends),e.mixins&&e.mixins.forEach(a)}return!r&&!l?(be(e)&&s.set(e,null),null):(te(r)?r.forEach(a=>o[a]=null):Ke(o,r),be(e)&&s.set(e,o),o)}function ri(e,t){return!e||!Js(t)?!1:(t=t.slice(2).replace(/Once$/,""),ge(e,t[0].toLowerCase()+t.slice(1))||ge(e,mn(t))||ge(e,t))}function _o(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:l,emit:a,render:u,renderCache:c,props:d,data:p,setupState:h,ctx:_,inheritAttrs:y}=e,I=qs(e);let M,E;try{if(n.shapeFlag&4){const C=i||s,w=C;M=Ct(u.call(w,C,c,d,h,p,_)),E=l}else{const C=t;M=Ct(C.length>1?C(d,{attrs:l,slots:o,emit:a}):C(d,null)),E=t.props?l:ld(l)}}catch(C){Xn.length=0,ti(C,e,1),M=Ce(rn)}let O=M;if(E&&y!==!1){const C=Object.keys(E),{shapeFlag:w}=O;C.length&&w&7&&(r&&C.some(br)&&(E=ad(E,r)),O=An(O,E,!1,!0))}return n.dirs&&(O=An(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(n.dirs):n.dirs),n.transition&&Mr(O,n.transition),M=O,qs(I),M}const ld=e=>{let t;for(const n in e)(n==="class"||n==="style"||Js(n))&&((t||(t={}))[n]=e[n]);return t},ad=(e,t)=>{const n={};for(const s in e)(!br(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function cd(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:l,patchFlag:a}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return s?yo(s,o,u):!!o;if(a&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const p=c[d];if(o[p]!==s[p]&&!ri(u,p))return!0}}}else return(i||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?yo(s,o,u):!0:!!o;return!1}function yo(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!ri(n,r))return!0}return!1}function ud({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const xa=e=>e.__isSuspense;function dd(e,t){t&&t.pendingBranch?te(e)?t.effects.push(...e):t.effects.push(e):Su(e)}const pe=Symbol.for("v-fgt"),oi=Symbol.for("v-txt"),rn=Symbol.for("v-cmt"),Oi=Symbol.for("v-stc"),Xn=[];let ct=null;function D(e=!1){Xn.push(ct=e?null:[])}function fd(){Xn.pop(),ct=Xn[Xn.length-1]||null}let ls=1;function bo(e,t=!1){ls+=e,e<0&&ct&&t&&(ct.hasOnce=!0)}function Aa(e){return e.dynamicChildren=ls>0?ct||Pn:null,fd(),ls>0&&ct&&ct.push(e),e}function H(e,t,n,s,i,r){return Aa(f(e,t,n,s,i,r,!0))}function It(e,t,n,s,i){return Aa(Ce(e,t,n,s,i,!0))}function Bs(e){return e?e.__v_isVNode===!0:!1}function qn(e,t){return e.type===t.type&&e.key===t.key}const Ra=({key:e})=>e??null,As=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ae(e)||Pe(e)||ae(e)?{i:at,r:e,k:t,f:!!n}:e:null);function f(e,t=null,n=null,s=0,i=null,r=e===pe?0:1,o=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ra(t),ref:t&&As(t),scopeId:ca,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:at};return l?(Ur(a,n),r&128&&e.normalize(a)):n&&(a.shapeFlag|=Ae(n)?8:16),ls>0&&!o&&ct&&(a.patchFlag>0||r&6)&&a.patchFlag!==32&&ct.push(a),a}const Ce=pd;function pd(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===Du)&&(e=rn),Bs(e)){const l=An(e,t,!0);return n&&Ur(l,n),ls>0&&!r&&ct&&(l.shapeFlag&6?ct[ct.indexOf(e)]=l:ct.push(l)),l.patchFlag=-2,l}if(Od(e)&&(e=e.__vccOpts),t){t=hd(t);let{class:l,style:a}=t;l&&!Ae(l)&&(t.class=Lt(l)),be(a)&&(Ar(a)&&!te(a)&&(a=Ke({},a)),t.style=Zs(a))}const o=Ae(e)?1:xa(e)?128:Iu(e)?64:be(e)?4:ae(e)?2:0;return f(e,t,n,s,i,o,r,!0)}function hd(e){return e?Ar(e)||ya(e)?Ke({},e):e:null}function An(e,t,n=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:l,transition:a}=e,u=t?gd(i||{},t):i,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ra(u),ref:t&&t.ref?n&&r?te(r)?r.concat(As(t)):[r,As(t)]:As(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pe?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:a,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&An(e.ssContent),ssFallback:e.ssFallback&&An(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return a&&s&&Mr(c,a.clone(c)),c}function Ue(e=" ",t=0){return Ce(oi,null,e,t)}function ye(e="",t=!1){return t?(D(),It(rn,null,e)):Ce(rn,null,e)}function Ct(e){return e==null||typeof e=="boolean"?Ce(rn):te(e)?Ce(pe,null,e.slice()):Bs(e)?Xt(e):Ce(oi,null,String(e))}function Xt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:An(e)}function Ur(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(te(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Ur(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!ya(t)?t._ctx=at:i===3&&at&&(at.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ae(t)?(t={default:t,_ctx:at},n=32):(t=String(t),s&64?(n=16,t=[Ue(t)]):n=8);e.children=t,e.shapeFlag|=n}function gd(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Lt([t.class,s.class]));else if(i==="style")t.style=Zs([t.style,s.style]);else if(Js(i)){const r=t[i],o=s[i];o&&r!==o&&!(te(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function St(e,t,n,s=null){At(e,t,7,[n,s])}const vd=va();let md=0;function _d(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||vd,r={uid:md++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ul(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wa(s,i),emitsOptions:Ea(s,i),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:s.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=od.bind(null,r),e.ce&&e.ce(r),r}let We=null,Hs,Wi;{const e=Xs(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};Hs=t("__VUE_INSTANCE_SETTERS__",n=>We=n),Wi=t("__VUE_SSR_SETTERS__",n=>as=n)}const vs=e=>{const t=We;return Hs(e),e.scope.on(),()=>{e.scope.off(),Hs(t)}},wo=()=>{We&&We.scope.off(),Hs(null)};function ka(e){return e.vnode.shapeFlag&4}let as=!1;function yd(e,t=!1,n=!1){t&&Wi(t);const{props:s,children:i}=e.vnode,r=ka(e);Ku(e,s,r,t),Gu(e,i,n||t);const o=r?bd(e,t):void 0;return t&&Wi(!1),o}function bd(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Uu);const{setup:s}=n;if(s){Bt();const i=e.setupContext=s.length>1?Sd(e):null,r=vs(e),o=gs(s,e,0,[e.props,i]),l=Al(o);if(Ht(),r(),(l||e.sp)&&!Gn(e)&&ua(e),l){if(o.then(wo,wo),t)return o.then(a=>{So(e,a)}).catch(a=>{ti(a,e,0)});e.asyncDep=o}else So(e,o)}else Ma(e)}function So(e,t,n){ae(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:be(t)&&(e.setupState=sa(t)),Ma(e)}function Ma(e,t,n){const s=e.type;e.render||(e.render=s.render||Pt);{const i=vs(e);Bt();try{Lu(e)}finally{Ht(),i()}}}const wd={get(e,t){return He(e,"get",""),e[t]}};function Sd(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,wd),slots:e.slots,emit:e.emit,expose:t}}function li(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(sa(Rr(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yn)return Yn[n](e)},has(t,n){return n in t||n in Yn}})):e.proxy}function Od(e){return ae(e)&&"__vccOpts"in e}const se=(e,t)=>mu(e,t,as);function Ta(e,t,n){const s=arguments.length;return s===2?be(t)&&!te(t)?Bs(t)?Ce(e,null,[t]):Ce(e,t):Ce(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Bs(n)&&(n=[n]),Ce(e,t,n))}const Id="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ki;const Oo=typeof window<"u"&&window.trustedTypes;if(Oo)try{Ki=Oo.createPolicy("vue",{createHTML:e=>e})}catch{}const ja=Ki?e=>Ki.createHTML(e):e=>e,Cd="http://www.w3.org/2000/svg",Pd="http://www.w3.org/1998/Math/MathML",jt=typeof document<"u"?document:null,Io=jt&&jt.createElement("template"),$d={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?jt.createElementNS(Cd,e):t==="mathml"?jt.createElementNS(Pd,e):n?jt.createElement(e,{is:n}):jt.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>jt.createTextNode(e),createComment:e=>jt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>jt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{Io.innerHTML=ja(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=Io.content;if(s==="svg"||s==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}t.insertBefore(l,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ed=Symbol("_vtc");function xd(e,t,n){const s=e[Ed];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Co=Symbol("_vod"),Ad=Symbol("_vsh"),Rd=Symbol(""),kd=/(^|;)\s*display\s*:/;function Md(e,t,n){const s=e.style,i=Ae(n);let r=!1;if(n&&!i){if(t)if(Ae(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&Rs(s,l,"")}else for(const o in t)n[o]==null&&Rs(s,o,"");for(const o in n)o==="display"&&(r=!0),Rs(s,o,n[o])}else if(i){if(t!==n){const o=s[Rd];o&&(n+=";"+o),s.cssText=n,r=kd.test(n)}}else t&&e.removeAttribute("style");Co in e&&(e[Co]=r?s.display:"",e[Ad]&&(s.display="none"))}const Po=/\s*!important$/;function Rs(e,t,n){if(te(n))n.forEach(s=>Rs(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Td(e,t);Po.test(n)?e.setProperty(mn(s),n.replace(Po,""),"important"):e[s]=n}}const $o=["Webkit","Moz","ms"],Ii={};function Td(e,t){const n=Ii[t];if(n)return n;let s=nn(t);if(s!=="filter"&&s in e)return Ii[t]=s;s=Ml(s);for(let i=0;i<$o.length;i++){const r=$o[i]+s;if(r in e)return Ii[t]=r}return t}const Eo="http://www.w3.org/1999/xlink";function xo(e,t,n,s,i,r=Vc(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Eo,t.slice(6,t.length)):e.setAttributeNS(Eo,t,n):n==null||r&&!Tl(n)?e.removeAttribute(t):e.setAttribute(t,r?"":xt(n)?String(n):n)}function Ao(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?ja(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,a=n==null?e.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in e))&&(e.value=a),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Tl(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function en(e,t,n,s){e.addEventListener(t,n,s)}function jd(e,t,n,s){e.removeEventListener(t,n,s)}const Ro=Symbol("_vei");function Dd(e,t,n,s,i=null){const r=e[Ro]||(e[Ro]={}),o=r[t];if(s&&o)o.value=s;else{const[l,a]=Ud(t);if(s){const u=r[t]=Fd(s,i);en(e,l,u,a)}else o&&(jd(e,l,o,a),r[t]=void 0)}}const ko=/(?:Once|Passive|Capture)$/;function Ud(e){let t;if(ko.test(e)){t={};let s;for(;s=e.match(ko);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):mn(e.slice(2)),t]}let Ci=0;const Ld=Promise.resolve(),Nd=()=>Ci||(Ld.then(()=>Ci=0),Ci=Date.now());function Fd(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;At(qd(s,n.value),t,5,[s])};return n.value=e,n.attached=Nd(),n}function qd(e,t){if(te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Mo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Vd=(e,t,n,s,i,r)=>{const o=i==="svg";t==="class"?xd(e,s,o):t==="style"?Md(e,n,s):Js(t)?br(t)||Dd(e,t,n,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Bd(e,t,s,o))?(Ao(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&xo(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ae(s))?Ao(e,nn(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),xo(e,t,s,o))};function Bd(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Mo(t)&&ae(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Mo(t)&&Ae(n)?!1:t in e}const Rn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return te(t)?n=>Es(t,n):t};function Hd(e){e.target.composing=!0}function To(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const qt=Symbol("_assign"),De={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[qt]=Rn(i);const r=s||i.props&&i.props.type==="number";en(e,t?"change":"input",o=>{if(o.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=Ds(l)),e[qt](l)}),n&&en(e,"change",()=>{e.value=e.value.trim()}),t||(en(e,"compositionstart",Hd),en(e,"compositionend",To),en(e,"change",To))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:r}},o){if(e[qt]=Rn(o),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ds(e.value):e.value,a=t??"";l!==a&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===a)||(e.value=a))}},Wd={created(e,{value:t},n){e.checked=xn(t,n.props.value),e[qt]=Rn(n),en(e,"change",()=>{e[qt](cs(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[qt]=Rn(s),t!==n&&(e.checked=xn(t,s.props.value))}},gn={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=Gs(t);en(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Ds(cs(o)):cs(o));e[qt](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,ni(()=>{e._assigning=!1})}),e[qt]=Rn(s)},mounted(e,{value:t}){jo(e,t)},beforeUpdate(e,t,n){e[qt]=Rn(n)},updated(e,{value:t}){e._assigning||jo(e,t)}};function jo(e,t){const n=e.multiple,s=te(t);if(!(n&&!s&&!Gs(t))){for(let i=0,r=e.options.length;i<r;i++){const o=e.options[i],l=cs(o);if(n)if(s){const a=typeof l;a==="string"||a==="number"?o.selected=t.some(u=>String(u)===String(l)):o.selected=Hc(t,l)>-1}else o.selected=t.has(l);else if(xn(cs(o),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function cs(e){return"_value"in e?e._value:e.value}const Kd=["ctrl","shift","alt","meta"],zd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Kd.some(n=>e[`${n}Key`]&&!t.includes(n))},kn=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const l=zd[t[o]];if(l&&l(i,t))return}return e(i,...r)})},Qd=Ke({patchProp:Vd},$d);let Do;function Jd(){return Do||(Do=Xu(Qd))}const Gd=(...e)=>{const t=Jd().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=Xd(s);if(!i)return;const r=t._component;!ae(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,Yd(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function Yd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Xd(e){return Ae(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Da;const ai=e=>Da=e,Ua=Symbol();function zi(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Zn;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Zn||(Zn={}));function Zd(){const e=Ll(!0),t=e.run(()=>Y({}));let n=[],s=[];const i=Rr({install(r){ai(i),i._a=r,r.provide(Ua,i),r.config.globalProperties.$pinia=i,s.forEach(o=>n.push(o)),s=[]},use(r){return this._a?n.push(r):s.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const La=()=>{};function Uo(e,t,n,s=La){e.push(t);const i=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),s())};return!n&&Or()&&Nl(i),i}function Sn(e,...t){e.slice().forEach(n=>{n(...t)})}const ef=e=>e(),Lo=Symbol(),Pi=Symbol();function Qi(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,s)=>e.set(s,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const s=t[n],i=e[n];zi(i)&&zi(s)&&e.hasOwnProperty(n)&&!Pe(s)&&!Nt(s)?e[n]=Qi(i,s):e[n]=s}return e}const tf=Symbol();function nf(e){return!zi(e)||!Object.prototype.hasOwnProperty.call(e,tf)}const{assign:Gt}=Object;function sf(e){return!!(Pe(e)&&e.effect)}function rf(e,t,n,s){const{state:i,actions:r,getters:o}=t,l=n.state.value[e];let a;function u(){l||(n.state.value[e]=i?i():{});const c=fu(n.state.value[e]);return Gt(c,r,Object.keys(o||{}).reduce((d,p)=>(d[p]=Rr(se(()=>{ai(n);const h=n._s.get(e);return o[p].call(h,h)})),d),{}))}return a=Na(e,u,t,n,s,!0),a}function Na(e,t,n={},s,i,r){let o;const l=Gt({actions:{}},n),a={deep:!0};let u,c,d=[],p=[],h;const _=s.state.value[e];!r&&!_&&(s.state.value[e]={}),Y({});let y;function I(V){let j;u=c=!1,typeof V=="function"?(V(s.state.value[e]),j={type:Zn.patchFunction,storeId:e,events:h}):(Qi(s.state.value[e],V),j={type:Zn.patchObject,payload:V,storeId:e,events:h});const m=y=Symbol();ni().then(()=>{y===m&&(u=!0)}),c=!0,Sn(d,j,s.state.value[e])}const M=r?function(){const{state:j}=n,m=j?j():{};this.$patch(S=>{Gt(S,m)})}:La;function E(){o.stop(),d=[],p=[],s._s.delete(e)}const O=(V,j="")=>{if(Lo in V)return V[Pi]=j,V;const m=function(){ai(s);const S=Array.from(arguments),k=[],F=[];function $(B){k.push(B)}function q(B){F.push(B)}Sn(p,{args:S,name:m[Pi],store:w,after:$,onError:q});let ie;try{ie=V.apply(this&&this.$id===e?this:w,S)}catch(B){throw Sn(F,B),B}return ie instanceof Promise?ie.then(B=>(Sn(k,B),B)).catch(B=>(Sn(F,B),Promise.reject(B))):(Sn(k,ie),ie)};return m[Lo]=!0,m[Pi]=j,m},C={_p:s,$id:e,$onAction:Uo.bind(null,p),$patch:I,$reset:M,$subscribe(V,j={}){const m=Uo(d,V,j.detached,()=>S()),S=o.run(()=>st(()=>s.state.value[e],k=>{(j.flush==="sync"?c:u)&&V({storeId:e,type:Zn.direct,events:h},k)},Gt({},a,j)));return m},$dispose:E},w=Ln(C);s._s.set(e,w);const N=(s._a&&s._a.runWithContext||ef)(()=>s._e.run(()=>(o=Ll()).run(()=>t({action:O}))));for(const V in N){const j=N[V];if(Pe(j)&&!sf(j)||Nt(j))r||(_&&nf(j)&&(Pe(j)?j.value=_[V]:Qi(j,_[V])),s.state.value[e][V]=j);else if(typeof j=="function"){const m=O(j,V);N[V]=m,l.actions[V]=j}}return Gt(w,N),Gt(fe(w),N),Object.defineProperty(w,"$state",{get:()=>s.state.value[e],set:V=>{I(j=>{Gt(j,V)})}}),s._p.forEach(V=>{Gt(w,o.run(()=>V({store:w,app:s._a,pinia:s,options:l})))}),_&&r&&n.hydrate&&n.hydrate(w.$state,_),u=!0,c=!0,w}/*! #__NO_SIDE_EFFECTS__ */function Lr(e,t,n){let s;const i=typeof t=="function";s=i?n:t;function r(o,l){const a=Wu();return o=o||(a?$t(Ua,null):null),o&&ai(o),o=Da,o._s.has(e)||(i?Na(e,t,s,o):rf(e,s,o)),o._s.get(e)}return r.$id=e,r}function Mn(e){const t=fe(e),n={};for(const s in t){const i=t[s];i.effect?n[s]=se({get:()=>e[s],set(r){e[s]=r}}):(Pe(i)||Nt(i))&&(n[s]=gu(e,s))}return n}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const In=typeof document<"u";function Fa(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function of(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Fa(e.default)}const he=Object.assign;function $i(e,t){const n={};for(const s in t){const i=t[s];n[s]=mt(i)?i.map(e):e(i)}return n}const es=()=>{},mt=Array.isArray,qa=/#/g,lf=/&/g,af=/\//g,cf=/=/g,uf=/\?/g,Va=/\+/g,df=/%5B/g,ff=/%5D/g,Ba=/%5E/g,pf=/%60/g,Ha=/%7B/g,hf=/%7C/g,Wa=/%7D/g,gf=/%20/g;function Nr(e){return encodeURI(""+e).replace(hf,"|").replace(df,"[").replace(ff,"]")}function vf(e){return Nr(e).replace(Ha,"{").replace(Wa,"}").replace(Ba,"^")}function Ji(e){return Nr(e).replace(Va,"%2B").replace(gf,"+").replace(qa,"%23").replace(lf,"%26").replace(pf,"`").replace(Ha,"{").replace(Wa,"}").replace(Ba,"^")}function mf(e){return Ji(e).replace(cf,"%3D")}function _f(e){return Nr(e).replace(qa,"%23").replace(uf,"%3F")}function yf(e){return e==null?"":_f(e).replace(af,"%2F")}function us(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const bf=/\/$/,wf=e=>e.replace(bf,"");function Ei(e,t,n="/"){let s,i={},r="",o="";const l=t.indexOf("#");let a=t.indexOf("?");return l<a&&l>=0&&(a=-1),a>-1&&(s=t.slice(0,a),r=t.slice(a+1,l>-1?l:t.length),i=e(r)),l>-1&&(s=s||t.slice(0,l),o=t.slice(l,t.length)),s=Cf(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:us(o)}}function Sf(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function No(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Of(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&Tn(t.matched[s],n.matched[i])&&Ka(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Tn(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ka(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!If(e[n],t[n]))return!1;return!0}function If(e,t){return mt(e)?Fo(e,t):mt(t)?Fo(t,e):e===t}function Fo(e,t){return mt(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Cf(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Jt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ds;(function(e){e.pop="pop",e.push="push"})(ds||(ds={}));var ts;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ts||(ts={}));function Pf(e){if(!e)if(In){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),wf(e)}const $f=/^[^#]+#/;function Ef(e,t){return e.replace($f,"#")+t}function xf(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const ci=()=>({left:window.scrollX,top:window.scrollY});function Af(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=xf(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function qo(e,t){return(history.state?history.state.position-t:-1)+e}const Gi=new Map;function Rf(e,t){Gi.set(e,t)}function kf(e){const t=Gi.get(e);return Gi.delete(e),t}let Mf=()=>location.protocol+"//"+location.host;function za(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let l=i.includes(e.slice(r))?e.slice(r).length:1,a=i.slice(l);return a[0]!=="/"&&(a="/"+a),No(a,"")}return No(n,e)+s+i}function Tf(e,t,n,s){let i=[],r=[],o=null;const l=({state:p})=>{const h=za(e,location),_=n.value,y=t.value;let I=0;if(p){if(n.value=h,t.value=p,o&&o===_){o=null;return}I=y?p.position-y.position:0}else s(h);i.forEach(M=>{M(n.value,_,{delta:I,type:ds.pop,direction:I?I>0?ts.forward:ts.back:ts.unknown})})};function a(){o=n.value}function u(p){i.push(p);const h=()=>{const _=i.indexOf(p);_>-1&&i.splice(_,1)};return r.push(h),h}function c(){const{history:p}=window;p.state&&p.replaceState(he({},p.state,{scroll:ci()}),"")}function d(){for(const p of r)p();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:a,listen:u,destroy:d}}function Vo(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?ci():null}}function jf(e){const{history:t,location:n}=window,s={value:za(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(a,u,c){const d=e.indexOf("#"),p=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+a:Mf()+e+a;try{t[c?"replaceState":"pushState"](u,"",p),i.value=u}catch(h){console.error(h),n[c?"replace":"assign"](p)}}function o(a,u){const c=he({},t.state,Vo(i.value.back,a,i.value.forward,!0),u,{position:i.value.position});r(a,c,!0),s.value=a}function l(a,u){const c=he({},i.value,t.state,{forward:a,scroll:ci()});r(c.current,c,!0);const d=he({},Vo(s.value,a,null),{position:c.position+1},u);r(a,d,!1),s.value=a}return{location:s,state:i,push:l,replace:o}}function Df(e){e=Pf(e);const t=jf(e),n=Tf(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=he({location:"",base:e,go:s,createHref:Ef.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Uf(e){return e=location.host?e||location.pathname+location.search:"",e.includes("#")||(e+="#"),Df(e)}function Lf(e){return typeof e=="string"||e&&typeof e=="object"}function Qa(e){return typeof e=="string"||typeof e=="symbol"}const Ja=Symbol("");var Bo;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Bo||(Bo={}));function jn(e,t){return he(new Error,{type:e,[Ja]:!0},t)}function Mt(e,t){return e instanceof Error&&Ja in e&&(t==null||!!(e.type&t))}const Ho="[^/]+?",Nf={sensitive:!1,strict:!1,start:!0,end:!0},Ff=/[.+*?^${}()[\]/\\]/g;function qf(e,t){const n=he({},Nf,t),s=[];let i=n.start?"^":"";const r=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let d=0;d<u.length;d++){const p=u[d];let h=40+(n.sensitive?.25:0);if(p.type===0)d||(i+="/"),i+=p.value.replace(Ff,"\\$&"),h+=40;else if(p.type===1){const{value:_,repeatable:y,optional:I,regexp:M}=p;r.push({name:_,repeatable:y,optional:I});const E=M||Ho;if(E!==Ho){h+=10;try{new RegExp(`(${E})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${_}" (${E}): `+C.message)}}let O=y?`((?:${E})(?:/(?:${E}))*)`:`(${E})`;d||(O=I&&u.length<2?`(?:/${O})`:"/"+O),I&&(O+="?"),i+=O,h+=20,I&&(h+=-8),y&&(h+=-20),E===".*"&&(h+=-50)}c.push(h)}s.push(c)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function l(u){const c=u.match(o),d={};if(!c)return null;for(let p=1;p<c.length;p++){const h=c[p]||"",_=r[p-1];d[_.name]=h&&_.repeatable?h.split("/"):h}return d}function a(u){let c="",d=!1;for(const p of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of p)if(h.type===0)c+=h.value;else if(h.type===1){const{value:_,repeatable:y,optional:I}=h,M=_ in u?u[_]:"";if(mt(M)&&!y)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const E=mt(M)?M.join("/"):M;if(!E)if(I)p.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${_}"`);c+=E}}return c||"/"}return{re:o,score:s,keys:r,parse:l,stringify:a}}function Vf(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ga(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=Vf(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(Wo(s))return 1;if(Wo(i))return-1}return i.length-s.length}function Wo(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Bf={type:0,value:""},Hf=/[a-zA-Z0-9_]/;function Wf(e){if(!e)return[[]];if(e==="/")return[[Bf]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let l=0,a,u="",c="";function d(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(a==="*"||a==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=a}for(;l<e.length;){if(a=e[l++],a==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:a==="/"?(u&&d(),o()):a===":"?(d(),n=1):p();break;case 4:p(),n=s;break;case 1:a==="("?n=2:Hf.test(a)?p():(d(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case 2:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:n=3:c+=a;break;case 3:d(),n=0,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),o(),i}function Kf(e,t,n){const s=qf(Wf(e.path),n),i=he(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function zf(e,t){const n=[],s=new Map;t=Jo({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function r(d,p,h){const _=!h,y=zo(d);y.aliasOf=h&&h.record;const I=Jo(t,d),M=[y];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of C)M.push(zo(he({},y,{components:h?h.record.components:y.components,path:w,aliasOf:h?h.record:y})))}let E,O;for(const C of M){const{path:w}=C;if(p&&w[0]!=="/"){const P=p.record.path,N=P[P.length-1]==="/"?"":"/";C.path=p.record.path+(w&&N+w)}if(E=Kf(C,p,I),h?h.alias.push(E):(O=O||E,O!==E&&O.alias.push(E),_&&d.name&&!Qo(E)&&o(d.name)),Ya(E)&&a(E),y.children){const P=y.children;for(let N=0;N<P.length;N++)r(P[N],E,h&&h.children[N])}h=h||E}return O?()=>{o(O)}:es}function o(d){if(Qa(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function a(d){const p=Gf(d,n);n.splice(p,0,d),d.record.name&&!Qo(d)&&s.set(d.record.name,d)}function u(d,p){let h,_={},y,I;if("name"in d&&d.name){if(h=s.get(d.name),!h)throw jn(1,{location:d});I=h.record.name,_=he(Ko(p.params,h.keys.filter(O=>!O.optional).concat(h.parent?h.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),d.params&&Ko(d.params,h.keys.map(O=>O.name))),y=h.stringify(_)}else if(d.path!=null)y=d.path,h=n.find(O=>O.re.test(y)),h&&(_=h.parse(y),I=h.record.name);else{if(h=p.name?s.get(p.name):n.find(O=>O.re.test(p.path)),!h)throw jn(1,{location:d,currentLocation:p});I=h.record.name,_=he({},p.params,d.params),y=h.stringify(_)}const M=[];let E=h;for(;E;)M.unshift(E.record),E=E.parent;return{name:I,path:y,params:_,matched:M,meta:Jf(M)}}e.forEach(d=>r(d));function c(){n.length=0,s.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:c,getRoutes:l,getRecordMatcher:i}}function Ko(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function zo(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Qf(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Qf(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function Qo(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Jf(e){return e.reduce((t,n)=>he(t,n.meta),{})}function Jo(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function Gf(e,t){let n=0,s=t.length;for(;n!==s;){const r=n+s>>1;Ga(e,t[r])<0?s=r:n=r+1}const i=Yf(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function Yf(e){let t=e;for(;t=t.parent;)if(Ya(t)&&Ga(e,t)===0)return t}function Ya({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Xf(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(Va," "),o=r.indexOf("="),l=us(o<0?r:r.slice(0,o)),a=o<0?null:us(r.slice(o+1));if(l in t){let u=t[l];mt(u)||(u=t[l]=[u]),u.push(a)}else t[l]=a}return t}function Go(e){let t="";for(let n in e){const s=e[n];if(n=mf(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(mt(s)?s.map(r=>r&&Ji(r)):[s&&Ji(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function Zf(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=mt(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const ep=Symbol(""),Yo=Symbol(""),Fr=Symbol(""),Xa=Symbol(""),Yi=Symbol("");function Vn(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Zt(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((l,a)=>{const u=p=>{p===!1?a(jn(4,{from:n,to:t})):p instanceof Error?a(p):Lf(p)?a(jn(2,{from:t,to:p})):(o&&s.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),l())},c=r(()=>e.call(s&&s.instances[i],t,n,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(p=>a(p))})}function xi(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const l in o.components){let a=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(Fa(a)){const c=(a.__vccOpts||a)[t];c&&r.push(Zt(c,n,s,o,l,i))}else{let u=a();r.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=of(c)?c.default:c;o.mods[l]=c,o.components[l]=d;const h=(d.__vccOpts||d)[t];return h&&Zt(h,n,s,o,l,i)()}))}}return r}function Xo(e){const t=$t(Fr),n=$t(Xa),s=se(()=>{const a=oe(e.to);return t.resolve(a)}),i=se(()=>{const{matched:a}=s.value,{length:u}=a,c=a[u-1],d=n.matched;if(!c||!d.length)return-1;const p=d.findIndex(Tn.bind(null,c));if(p>-1)return p;const h=Zo(a[u-2]);return u>1&&Zo(c)===h&&d[d.length-1].path!==h?d.findIndex(Tn.bind(null,a[u-2])):p}),r=se(()=>i.value>-1&&ip(n.params,s.value.params)),o=se(()=>i.value>-1&&i.value===n.matched.length-1&&Ka(n.params,s.value.params));function l(a={}){if(sp(a)){const u=t[oe(e.replace)?"replace":"push"](oe(e.to)).catch(es);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:se(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function tp(e){return e.length===1?e[0]:e}const np=Le({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Xo,setup(e,{slots:t}){const n=Ln(Xo(e)),{options:s}=$t(Fr),i=se(()=>({[el(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[el(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&tp(t.default(n));return e.custom?r:Ta("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),Xi=np;function sp(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ip(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!mt(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function Zo(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const el=(e,t,n)=>e??t??n,rp=Le({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=$t(Yi),i=se(()=>e.route||s.value),r=$t(Yo,0),o=se(()=>{let u=oe(r);const{matched:c}=i.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),l=se(()=>i.value.matched[o.value]);xs(Yo,se(()=>o.value+1)),xs(ep,l),xs(Yi,i);const a=Y();return st(()=>[a.value,l.value,e.name],([u,c,d],[p,h,_])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===p&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!Tn(c,h)||!p)&&(c.enterCallbacks[d]||[]).forEach(y=>y(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,d=l.value,p=d&&d.components[c];if(!p)return tl(n.default,{Component:p,route:u});const h=d.props[c],_=h?h===!0?u.params:typeof h=="function"?h(u):h:null,I=Ta(p,he({},_,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(d.instances[c]=null)},ref:a}));return tl(n.default,{Component:I,route:u})||I}}});function tl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Za=rp;function op(e){const t=zf(e.routes,e),n=e.parseQuery||Xf,s=e.stringifyQuery||Go,i=e.history,r=Vn(),o=Vn(),l=Vn(),a=Ft(Jt);let u=Jt;In&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=$i.bind(null,x=>""+x),d=$i.bind(null,yf),p=$i.bind(null,us);function h(x,G){let z,X;return Qa(x)?(z=t.getRecordMatcher(x),X=G):X=x,t.addRoute(X,z)}function _(x){const G=t.getRecordMatcher(x);G&&t.removeRoute(G)}function y(){return t.getRoutes().map(x=>x.record)}function I(x){return!!t.getRecordMatcher(x)}function M(x,G){if(G=he({},G||a.value),typeof x=="string"){const b=Ei(n,x,G.path),A=t.resolve({path:b.path},G),T=i.createHref(b.fullPath);return he(b,A,{params:p(A.params),hash:us(b.hash),redirectedFrom:void 0,href:T})}let z;if(x.path!=null)z=he({},x,{path:Ei(n,x.path,G.path).path});else{const b=he({},x.params);for(const A in b)b[A]==null&&delete b[A];z=he({},x,{params:d(b)}),G.params=d(G.params)}const X=t.resolve(z,G),me=x.hash||"";X.params=c(p(X.params));const g=Sf(s,he({},x,{hash:vf(me),path:X.path})),v=i.createHref(g);return he({fullPath:g,hash:me,query:s===Go?Zf(x.query):x.query||{}},X,{redirectedFrom:void 0,href:v})}function E(x){return typeof x=="string"?Ei(n,x,a.value.path):he({},x)}function O(x,G){if(u!==x)return jn(8,{from:G,to:x})}function C(x){return N(x)}function w(x){return C(he(E(x),{replace:!0}))}function P(x){const G=x.matched[x.matched.length-1];if(G&&G.redirect){const{redirect:z}=G;let X=typeof z=="function"?z(x):z;return typeof X=="string"&&(X=X.includes("?")||X.includes("#")?X=E(X):{path:X},X.params={}),he({query:x.query,hash:x.hash,params:X.path!=null?{}:x.params},X)}}function N(x,G){const z=u=M(x),X=a.value,me=x.state,g=x.force,v=x.replace===!0,b=P(z);if(b)return N(he(E(b),{state:typeof b=="object"?he({},me,b.state):me,force:g,replace:v}),G||z);const A=z;A.redirectedFrom=G;let T;return!g&&Of(s,X,z)&&(T=jn(16,{to:A,from:X}),xe(X,X,!0,!1)),(T?Promise.resolve(T):m(A,X)).catch(R=>Mt(R)?Mt(R,2)?R:le(R):ne(R,A,X)).then(R=>{if(R){if(Mt(R,2))return N(he({replace:v},E(R.to),{state:typeof R.to=="object"?he({},me,R.to.state):me,force:g}),G||A)}else R=k(A,X,!0,v,me);return S(A,X,R),R})}function V(x,G){const z=O(x,G);return z?Promise.reject(z):Promise.resolve()}function j(x){const G=Qt.values().next().value;return G&&typeof G.runWithContext=="function"?G.runWithContext(x):x()}function m(x,G){let z;const[X,me,g]=lp(x,G);z=xi(X.reverse(),"beforeRouteLeave",x,G);for(const b of X)b.leaveGuards.forEach(A=>{z.push(Zt(A,x,G))});const v=V.bind(null,x,G);return z.push(v),Ze(z).then(()=>{z=[];for(const b of r.list())z.push(Zt(b,x,G));return z.push(v),Ze(z)}).then(()=>{z=xi(me,"beforeRouteUpdate",x,G);for(const b of me)b.updateGuards.forEach(A=>{z.push(Zt(A,x,G))});return z.push(v),Ze(z)}).then(()=>{z=[];for(const b of g)if(b.beforeEnter)if(mt(b.beforeEnter))for(const A of b.beforeEnter)z.push(Zt(A,x,G));else z.push(Zt(b.beforeEnter,x,G));return z.push(v),Ze(z)}).then(()=>(x.matched.forEach(b=>b.enterCallbacks={}),z=xi(g,"beforeRouteEnter",x,G,j),z.push(v),Ze(z))).then(()=>{z=[];for(const b of o.list())z.push(Zt(b,x,G));return z.push(v),Ze(z)}).catch(b=>Mt(b,8)?b:Promise.reject(b))}function S(x,G,z){l.list().forEach(X=>j(()=>X(x,G,z)))}function k(x,G,z,X,me){const g=O(x,G);if(g)return g;const v=G===Jt,b=In?history.state:{};z&&(X||v?i.replace(x.fullPath,he({scroll:v&&b&&b.scroll},me)):i.push(x.fullPath,me)),a.value=x,xe(x,G,z,v),le()}let F;function $(){F||(F=i.listen((x,G,z)=>{if(!bn.listening)return;const X=M(x),me=P(X);if(me){N(he(me,{replace:!0,force:!0}),X).catch(es);return}u=X;const g=a.value;In&&Rf(qo(g.fullPath,z.delta),ci()),m(X,g).catch(v=>Mt(v,12)?v:Mt(v,2)?(N(he(E(v.to),{force:!0}),X).then(b=>{Mt(b,20)&&!z.delta&&z.type===ds.pop&&i.go(-1,!1)}).catch(es),Promise.reject()):(z.delta&&i.go(-z.delta,!1),ne(v,X,g))).then(v=>{v=v||k(X,g,!1),v&&(z.delta&&!Mt(v,8)?i.go(-z.delta,!1):z.type===ds.pop&&Mt(v,20)&&i.go(-1,!1)),S(X,g,v)}).catch(es)}))}let q=Vn(),ie=Vn(),B;function ne(x,G,z){le(x);const X=ie.list();return X.length?X.forEach(me=>me(x,G,z)):console.error(x),Promise.reject(x)}function Re(){return B&&a.value!==Jt?Promise.resolve():new Promise((x,G)=>{q.add([x,G])})}function le(x){return B||(B=!x,$(),q.list().forEach(([G,z])=>x?z(x):G()),q.reset()),x}function xe(x,G,z,X){const{scrollBehavior:me}=e;if(!In||!me)return Promise.resolve();const g=!z&&kf(qo(x.fullPath,0))||(X||!z)&&history.state&&history.state.scroll||null;return ni().then(()=>me(x,G,g)).then(v=>v&&Af(v)).catch(v=>ne(v,x,G))}const qe=x=>i.go(x);let Xe;const Qt=new Set,bn={currentRoute:a,listening:!0,addRoute:h,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:I,getRoutes:y,resolve:M,options:e,push:C,replace:w,go:qe,back:()=>qe(-1),forward:()=>qe(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:ie.add,isReady:Re,install(x){const G=this;x.component("RouterLink",Xi),x.component("RouterView",Za),x.config.globalProperties.$router=G,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>oe(a)}),In&&!Xe&&a.value===Jt&&(Xe=!0,C(i.location).catch(me=>{}));const z={};for(const me in Jt)Object.defineProperty(z,me,{get:()=>a.value[me],enumerable:!0});x.provide(Fr,G),x.provide(Xa,ea(z)),x.provide(Yi,a);const X=x.unmount;Qt.add(x),x.unmount=function(){Qt.delete(x),Qt.size<1&&(u=Jt,F&&F(),F=null,a.value=Jt,Xe=!1,B=!1),X()}}};function Ze(x){return x.reduce((G,z)=>G.then(()=>j(z)),Promise.resolve())}return bn}function lp(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(e.matched.find(u=>Tn(u,l))?s.push(l):n.push(l));const a=e.matched[o];a&&(t.matched.find(u=>Tn(u,a))||i.push(a))}return[n,s,i]}function nt(e){if(typeof e=="number")return(Math.abs(e*2654435761)>>>0).toString(16);if(typeof e=="boolean")return e?"1":"0";if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string"){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t=t>>>0;return t.toString(16)}if(Array.isArray(e)){let t=2166136261;for(let n=0;n<e.length;n++){t^=(n+1)*2654435761;const s=nt(e[n]);for(let i=0;i<s.length;i++)t^=s.charCodeAt(i),t*=16777619,t=t>>>0}return t.toString(16)}if(typeof e=="object"){let t=2166136261;const n=Object.keys(e).sort();for(let s=0;s<n.length;s++){const i=n[s],r=nt(i);t^=parseInt(r,16),t*=16777619,t=t>>>0;const o=nt(e[i]);t^=parseInt(o,16),t*=16777619,t=t>>>0}return t.toString(16)}return nt(String(e))}const $e={Remove:"remove",Replace:"replace",Add:"add"},ec=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),ap=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),ks=Symbol.iterator,ft={mutable:"mutable",immutable:"immutable"},qr={};function ns(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nl(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){const s=Reflect.getOwnPropertyDescriptor(n,t);if(s)return s;n=Reflect.getPrototypeOf(n)}}}function Vr(e){return Object.getPrototypeOf(e)===Set.prototype}function Br(e){return Object.getPrototypeOf(e)===Map.prototype}function lt(e){var t;return(t=e.copy)!==null&&t!==void 0?t:e.original}function vn(e){return!!ue(e)}function ue(e){return typeof e!="object"?null:e==null?void 0:e[ec]}function Hr(e){var t;const n=ue(e);return n?(t=n.copy)!==null&&t!==void 0?t:n.original:e}function _t(e,t){if(!e||typeof e!="object")return!1;let n;return Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!(t!=null&&t.mark)&&((n=t.mark(e,ft))===ft.immutable||typeof n=="function")}function tc(e,t=[]){if(Object.hasOwnProperty.call(e,"key")){const n=e.parent.copy,s=ue(Wt(n,e.key));if(s!==null&&(s==null?void 0:s.original)!==e.original)return null;const i=e.parent.type===3,r=i?Array.from(e.parent.setMap.keys()).indexOf(e.key):e.key;if(!(i&&n.size>r||ns(n,r)))return null;t.push(r)}if(e.parent)return tc(e.parent,t);t.reverse();try{cp(e.copy,t)}catch{return null}return t}function _n(e){return Array.isArray(e)?1:e instanceof Map?2:e instanceof Set?3:0}function Wt(e,t){return _n(e)===2?e.get(t):e[t]}function ms(e,t,n){_n(e)===2?e.set(t,n):e[t]=n}function Ai(e,t){const n=ue(e);return(n?lt(n):e)[t]}function Vt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zi(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function un(e,t){return t?e:[""].concat(e).map(n=>{const s=`${n}`;return s.indexOf("/")===-1&&s.indexOf("~")===-1?s:s.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function cp(e,t){for(let n=0;n<t.length-1;n+=1){const s=t[n];if(e=Wt(_n(e)===3?Array.from(e):e,s),typeof e!="object")throw new Error(`Cannot resolve patch at '${t.join("/")}'.`)}return e}function up(e){const t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let s=Reflect.getOwnPropertyDescriptor(e,n);if(s.enumerable&&s.configurable&&s.writable){t[n]=e[n];return}s.writable||(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(s={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[n]}),Reflect.defineProperty(t,n,s)}),t}const dp=Object.prototype.propertyIsEnumerable;function nc(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set){if(!Vr(e)){const s=Object.getPrototypeOf(e).constructor;return new s(e.values())}return Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values())}else if(e instanceof Map){if(!Br(e)){const s=Object.getPrototypeOf(e).constructor;return new s(e)}return new Map(e)}else if(t!=null&&t.mark&&(n=t.mark(e,ft),n!==void 0)&&n!==ft.mutable){if(n===ft.immutable)return up(e);if(typeof n=="function"){if(t.enablePatches||t.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return n()}throw new Error(`Unsupported mark result: ${n}`)}else if(typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype){const s={};return Object.keys(e).forEach(i=>{s[i]=e[i]}),Object.getOwnPropertySymbols(e).forEach(i=>{dp.call(e,i)&&(s[i]=e[i])}),s}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function Ge(e){e.copy||(e.copy=nc(e.original,e.options))}function Hn(e){if(!_t(e))return Hr(e);if(Array.isArray(e))return e.map(Hn);if(e instanceof Map){const n=Array.from(e.entries()).map(([s,i])=>[s,Hn(i)]);if(!Br(e)){const s=Object.getPrototypeOf(e).constructor;return new s(n)}return new Map(n)}if(e instanceof Set){const n=Array.from(e).map(Hn);if(!Vr(e)){const s=Object.getPrototypeOf(e).constructor;return new s(n)}return new Set(n)}const t=Object.create(Object.getPrototypeOf(e));for(const n in e)t[n]=Hn(e[n]);return t}function Ms(e){return vn(e)?Hn(e):e}function Et(e){var t;e.assignedMap=(t=e.assignedMap)!==null&&t!==void 0?t:new Map,e.operated||(e.operated=!0,e.parent&&Et(e.parent))}function sl(){throw new Error("Cannot modify frozen object")}function Cn(e,t,n,s,i){{n=n??new WeakMap,s=s??[],i=i??[];const o=n.has(e)?n.get(e):e;if(s.length>0){const l=s.indexOf(o);if(o&&typeof o=="object"&&l!==-1)throw s[0]===o?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${i.slice(0,l).map((a,u)=>{if(typeof a=="symbol")return`[${a.toString()}]`;const c=s[u];return typeof a=="object"&&(c instanceof Map||c instanceof Set)?Array.from(c.keys()).indexOf(a):a}).join("/")}`);s.push(o),i.push(t)}else s.push(o)}if(Object.isFrozen(e)||vn(e)){s.pop(),i.pop();return}switch(_n(e)){case 2:for(const[l,a]of e)Cn(l,l,n,s,i),Cn(a,l,n,s,i);e.set=e.clear=e.delete=sl;break;case 3:for(const l of e)Cn(l,l,n,s,i);e.add=e.clear=e.delete=sl;break;case 1:Object.freeze(e);let o=0;for(const l of e)Cn(l,o,n,s,i),o+=1;break;default:Object.freeze(e),Object.keys(e).forEach(l=>{const a=e[l];Cn(a,l,n,s,i)})}s.pop(),i.pop()}function Wr(e,t){const n=_n(e);if(n===0)Reflect.ownKeys(e).forEach(s=>{t(s,e[s],e)});else if(n===1){let s=0;for(const i of e)t(s,i,e),s+=1}else e.forEach((s,i)=>t(i,s,e))}function sc(e,t,n){if(vn(e)||!_t(e,n)||t.has(e)||Object.isFrozen(e))return;const s=e instanceof Set,i=s?new Map:void 0;if(t.add(e),Wr(e,(r,o)=>{var l;if(vn(o)){const a=ue(o);Ge(a);const u=!((l=a.assignedMap)===null||l===void 0)&&l.size||a.operated?a.copy:a.original;ms(s?i:e,r,u)}else sc(o,t,n)}),i){const r=e,o=Array.from(r);r.clear(),o.forEach(l=>{r.add(i.has(l)?i.get(l):l)})}}function fp(e,t){const n=e.type===3?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&sc(Wt(n,t),e.finalities.handledSet,e.options)}function er(e){e.type===3&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(Hr(t))}))}function tr(e,t,n,s){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&s){const r=tc(e);r&&t(e,r,n,s)}e.finalized=!0}}function Kr(e,t,n,s){const i=ue(n);i&&(i.callbacks||(i.callbacks=[]),i.callbacks.push((r,o)=>{var l;const a=e.type===3?e.setMap:e.copy;if(Vt(Wt(a,t),n)){let u=i.original;i.copy&&(u=i.copy),er(e),tr(e,s,r,o),e.options.enableAutoFreeze&&(e.options.updatedValues=(l=e.options.updatedValues)!==null&&l!==void 0?l:new WeakMap,e.options.updatedValues.set(u,i.original)),ms(a,t,u)}}),e.options.enableAutoFreeze&&i.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),_t(n,e.options)&&e.finalities.draft.push(()=>{const r=e.type===3?e.setMap:e.copy;Vt(Wt(r,t),n)&&fp(e,t)})}function pp(e,t,n,s,i){let{original:r,assignedMap:o,options:l}=e,a=e.copy;a.length<r.length&&([r,a]=[a,r],[n,s]=[s,n]);for(let u=0;u<r.length;u+=1)if(o.get(u.toString())&&a[u]!==r[u]){const c=t.concat([u]),d=un(c,i);n.push({op:$e.Replace,path:d,value:Ms(a[u])}),s.push({op:$e.Replace,path:d,value:Ms(r[u])})}for(let u=r.length;u<a.length;u+=1){const c=t.concat([u]),d=un(c,i);n.push({op:$e.Add,path:d,value:Ms(a[u])})}if(r.length<a.length){const{arrayLengthAssignment:u=!0}=l.enablePatches;if(u){const c=t.concat(["length"]),d=un(c,i);s.push({op:$e.Replace,path:d,value:r.length})}else for(let c=a.length;r.length<c;c-=1){const d=t.concat([c-1]),p=un(d,i);s.push({op:$e.Remove,path:p})}}}function hp({original:e,copy:t,assignedMap:n},s,i,r,o){n.forEach((l,a)=>{const u=Wt(e,a),c=Ms(Wt(t,a)),d=l?ns(e,a)?$e.Replace:$e.Add:$e.Remove;if(Vt(u,c)&&d===$e.Replace)return;const p=s.concat(a),h=un(p,o);i.push(d===$e.Remove?{op:d,path:h}:{op:d,path:h,value:c}),r.push(d===$e.Add?{op:$e.Remove,path:h}:d===$e.Remove?{op:$e.Add,path:h,value:u}:{op:$e.Replace,path:h,value:u})})}function gp({original:e,copy:t},n,s,i,r){let o=0;e.forEach(l=>{if(!t.has(l)){const a=n.concat([o]),u=un(a,r);s.push({op:$e.Remove,path:u,value:l}),i.unshift({op:$e.Add,path:u,value:l})}o+=1}),o=0,t.forEach(l=>{if(!e.has(l)){const a=n.concat([o]),u=un(a,r);s.push({op:$e.Add,path:u,value:l}),i.unshift({op:$e.Remove,path:u,value:l})}o+=1})}function fs(e,t,n,s){const{pathAsArray:i=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return hp(e,t,n,s,i);case 1:return pp(e,t,n,s,i);case 3:return gp(e,t,n,s,i)}}const Ws=(e,t,n=!1)=>{if(typeof e=="object"&&e!==null&&(!_t(e,t)||n))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},nr={get size(){return lt(ue(this)).size},has(e){return lt(ue(this)).has(e)},set(e,t){const n=ue(this),s=lt(n);return(!s.has(e)||!Vt(s.get(e),t))&&(Ge(n),Et(n),n.assignedMap.set(e,!0),n.copy.set(e,t),Kr(n,e,t,fs)),this},delete(e){if(!this.has(e))return!1;const t=ue(this);return Ge(t),Et(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){const e=ue(this);if(this.size){Ge(e),Et(e),e.assignedMap=new Map;for(const[t]of e.original)e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){const n=ue(this);lt(n).forEach((s,i)=>{e.call(t,this.get(i),i,this)})},get(e){var t,n;const s=ue(this),i=lt(s).get(e),r=((n=(t=s.options).mark)===null||n===void 0?void 0:n.call(t,i,ft))===ft.mutable;if(s.options.strict&&Ws(i,s.options,r),r||s.finalized||!_t(i,s.options)||i!==s.original.get(e))return i;const o=qr.createDraft({original:i,parentDraft:s,key:e,finalities:s.finalities,options:s.options});return Ge(s),s.copy.set(e,o),o},keys(){return lt(ue(this)).keys()},values(){const e=this.keys();return{[ks]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){const e=this.keys();return{[ks]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[ks](){return this.entries()}},vp=Reflect.ownKeys(nr),il=(e,t,{isValuesIterator:n})=>()=>{var s,i;const r=t.next();if(r.done)return r;const o=r.value;let l=e.setMap.get(o);const a=ue(l),u=((i=(s=e.options).mark)===null||i===void 0?void 0:i.call(s,l,ft))===ft.mutable;if(e.options.strict&&Ws(o,e.options,u),!u&&!a&&_t(o,e.options)&&!e.finalized&&e.original.has(o)){const c=qr.createDraft({original:o,parentDraft:e,key:o,finalities:e.finalities,options:e.options});e.setMap.set(o,c),l=c}else a&&(l=a.proxy);return{done:!1,value:n?l:[l,l]}},Ks={get size(){return ue(this).setMap.size},has(e){const t=ue(this);if(t.setMap.has(e))return!0;Ge(t);const n=ue(e);return!!(n&&t.setMap.has(n.original))},add(e){const t=ue(this);return this.has(e)||(Ge(t),Et(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),Kr(t,e,e,fs)),this},delete(e){if(!this.has(e))return!1;const t=ue(this);Ge(t),Et(t);const n=ue(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;const e=ue(this);Ge(e),Et(e);for(const t of e.original)e.assignedMap.set(t,!1);e.setMap.clear()},values(){const e=ue(this);Ge(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:il(e,t,{isValuesIterator:!0})}},entries(){const e=ue(this);Ge(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:il(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[ks](){return this.values()},forEach(e,t){const n=this.values();let s=n.next();for(;!s.done;)e.call(t,s.value,s.value,this),s=n.next()}};Set.prototype.difference&&Object.assign(Ks,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});const mp=Reflect.ownKeys(Ks),ic=new WeakSet,rc={get(e,t,n){var s,i;const r=(s=e.copy)===null||s===void 0?void 0:s[t];if(r&&ic.has(r))return r;if(t===ec)return e;let o;if(e.options.mark){const u=t==="size"&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if(o=e.options.mark(u,ft),o===ft.mutable)return e.options.strict&&Ws(u,e.options,!0),u}const l=lt(e);if(l instanceof Map&&vp.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(nr,"size").get.call(e.proxy);const u=nr[t];if(u)return u.bind(e.proxy)}if(l instanceof Set&&mp.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(Ks,"size").get.call(e.proxy);const u=Ks[t];if(u)return u.bind(e.proxy)}if(!ns(l,t)){const u=nl(l,t);return u?"value"in u?u.value:(i=u.get)===null||i===void 0?void 0:i.call(e.proxy):void 0}const a=l[t];if(e.options.strict&&Ws(a,e.options),e.finalized||!_t(a,e.options))return a;if(a===Ai(e.original,t)){if(Ge(e),e.copy[t]=zr({original:e.original[t],parentDraft:e,key:e.type===1?Number(t):t,finalities:e.finalities,options:e.options}),typeof o=="function"){const u=ue(e.copy[t]);return Ge(u),Et(u),u.copy}return e.copy[t]}return a},set(e,t,n){var s;if(e.type===3||e.type===2)throw new Error("Map/Set draft does not support any property assignment.");let i;if(e.type===1&&t!=="length"&&!(Number.isInteger(i=Number(t))&&i>=0&&(t===0||i===0||String(i)===String(t))))throw new Error("Only supports setting array indices and the 'length' property.");const r=nl(lt(e),t);if(r!=null&&r.set)return r.set.call(e.proxy,n),!0;const o=Ai(lt(e),t),l=ue(o);return l&&Vt(l.original,n)?(e.copy[t]=n,e.assignedMap=(s=e.assignedMap)!==null&&s!==void 0?s:new Map,e.assignedMap.set(t,!1),!0):(Vt(n,o)&&(n!==void 0||ns(e.original,t))||(Ge(e),Et(e),ns(e.original,t)&&Vt(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,Kr(e,t,n,fs)),!0)},has(e,t){return t in lt(e)},ownKeys(e){return Reflect.ownKeys(lt(e))},getOwnPropertyDescriptor(e,t){const n=lt(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s&&{writable:!0,configurable:e.type!==1||t!=="length",enumerable:s.enumerable,value:n[t]}},getPrototypeOf(e){return Reflect.getPrototypeOf(e.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return e.type===1?rc.set.call(this,e,t,void 0,e.proxy):(Ai(e.original,t)!==void 0||t in e.original?(Ge(e),Et(e),e.assignedMap.set(t,!1)):(e.assignedMap=(n=e.assignedMap)!==null&&n!==void 0?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function zr(e){const{original:t,parentDraft:n,key:s,finalities:i,options:r}=e,o=_n(t),l={type:o,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:i,options:r,setMap:o===3?new Map(t.entries()):void 0};(s||"key"in e)&&(l.key=s);const{proxy:a,revoke:u}=Proxy.revocable(o===1?Object.assign([],l):l,rc);if(i.revoke.push(u),ic.add(a),l.proxy=a,n){const c=n;c.finalities.draft.push((d,p)=>{var h,_;const y=ue(a);let I=c.type===3?c.setMap:c.copy;const M=Wt(I,s),E=ue(M);if(E){let O=E.original;E.operated&&(O=Hr(M)),er(E),tr(E,fs,d,p),c.options.enableAutoFreeze&&(c.options.updatedValues=(h=c.options.updatedValues)!==null&&h!==void 0?h:new WeakMap,c.options.updatedValues.set(O,E.original)),ms(I,s,O)}(_=y.callbacks)===null||_===void 0||_.forEach(O=>{O(d,p)})})}else{const c=ue(a);c.finalities.draft.push((d,p)=>{er(c),tr(c,fs,d,p)})}return a}qr.createDraft=zr;function _p(e,t,n,s,i){var r;const o=ue(e),l=(r=o==null?void 0:o.original)!==null&&r!==void 0?r:e,a=!!t.length;if(o!=null&&o.operated)for(;o.finalities.draft.length>0;)o.finalities.draft.pop()(n,s);const u=a?t[0]:o?o.operated?o.copy:o.original:e;return o&&Zi(o),i&&Cn(u,u,o==null?void 0:o.options.updatedValues),[u,n&&a?[{op:$e.Replace,path:[],value:t[0]}]:n,s&&a?[{op:$e.Replace,path:[],value:l}]:s]}function yp(e,t){var n;const s={draft:[],revoke:[],handledSet:new WeakSet};let i,r;t.enablePatches&&(i=[],r=[]);const l=((n=t.mark)===null||n===void 0?void 0:n.call(t,e,ft))===ft.mutable||!_t(e,t)?e:zr({original:e,parentDraft:null,finalities:s,options:t});return[l,(a=[])=>{const[u,c,d]=_p(l,a,i,r,t.enableAutoFreeze);return t.enablePatches?[u,c,d]:u}]}function sr(e){const{rootDraft:t,value:n,useRawReturn:s=!1,isRoot:i=!0}=e;Wr(n,(r,o,l)=>{const a=ue(o);if(a&&t&&a.finalities===t.finalities){e.isContainDraft=!0;const u=a.original;if(l instanceof Set){const c=Array.from(l);l.clear(),c.forEach(d=>l.add(r===d?u:d))}else ms(l,r,u)}else typeof o=="object"&&o!==null&&(e.value=o,e.isRoot=!1,sr(e))}),i&&(e.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),s&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function oc(e){var t;const n=ue(e);if(!_t(e,n==null?void 0:n.options))return e;const s=_n(e);if(n&&!n.operated)return n.original;let i;function r(){i=s===2?Br(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e):s===3?Array.from(n.setMap.values()):nc(e,n==null?void 0:n.options)}if(n){n.finalized=!0;try{r()}finally{n.finalized=!1}}else i=e;if(Wr(i,(o,l)=>{if(n&&Vt(Wt(n.original,o),l))return;const a=oc(l);a!==l&&(i===e&&r(),ms(i,o,a))}),s===3){const o=(t=n==null?void 0:n.original)!==null&&t!==void 0?t:i;return Vr(o)?new Set(i):new(Object.getPrototypeOf(o)).constructor(i)}return i}function rl(e){if(!vn(e))throw new Error(`current() is only used for Draft, parameter: ${e}`);return oc(e)}const bp=e=>function t(n,s,i){var r,o,l;if(typeof n=="function"&&typeof s!="function")return function(w,...P){return t(w,N=>n.call(this,N,...P),s)};const a=n,u=s;let c=i;if(typeof s!="function"&&(c=s),c!==void 0&&Object.prototype.toString.call(c)!=="[object Object]")throw new Error(`Invalid options: ${c}, 'options' should be an object.`);c=Object.assign(Object.assign({},e),c);const d=vn(a)?rl(a):a,p=Array.isArray(c.mark)?(w,P)=>{for(const N of c.mark){if(typeof N!="function")throw new Error(`Invalid mark: ${N}, 'mark' should be a function.`);const V=N(w,P);if(V)return V}}:c.mark,h=(r=c.enablePatches)!==null&&r!==void 0?r:!1,_=(o=c.strict)!==null&&o!==void 0?o:!1,I={enableAutoFreeze:(l=c.enableAutoFreeze)!==null&&l!==void 0?l:!1,mark:p,strict:_,enablePatches:h};if(!_t(d,I)&&typeof d=="object"&&d!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[M,E]=yp(d,I);if(typeof s!="function"){if(!_t(d,I))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[M,E]}let O;try{O=u(M)}catch(w){throw Zi(ue(M)),w}const C=w=>{const P=ue(M);if(!vn(w)){if(w!==void 0&&!Vt(w,M)&&(P!=null&&P.operated))throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const V=w==null?void 0:w[ap];if(V){const j=V[0];return I.strict&&typeof w=="object"&&w!==null&&sr({rootDraft:P,value:w,useRawReturn:!0}),E([j])}if(w!==void 0)return typeof w=="object"&&w!==null&&sr({rootDraft:P,value:w}),E([w])}if(w===M||w===void 0)return E([]);const N=ue(w);if(I===N.options){if(N.operated)throw new Error("Cannot return a modified child draft.");return E([rl(w)])}return E([w])};return O instanceof Promise?O.then(C,w=>{throw Zi(ue(M)),w}):C(O)},ir=bp();Object.prototype.constructor.toString();function lc(e,t){const n=Object.keys(e),s=Object.keys(t);return n.length===s.length&&Object.keys(e).every(i=>t.hasOwnProperty(i))}function ol(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n])}function Ts(e,t){return typeof e!="object"||typeof t!="object"||e===null||t===null?e===t:lc(e,t)?Object.keys(e).every(n=>Ts(e[n],t[n])):!1}function ac(e){if(!Wn(e))return e;const t={};for(const[n,s]of Object.entries(e))s!==void 0&&(t[n]=s);return t}function cc(e,t){if(!Wn(e)||!Wn(t))return t;const n=Object.assign({},e);for(const s of Object.keys(t)){if(t[s]===void 0)continue;if(t[s]===null){delete n[s];continue}const i=Wn(e[s])&&Wn(t[s]);n[s]=i?cc(e[s],t[s]):t[s]}return n}function Wn(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function wp(e,t,n){if(!e||t.length===0)return;let s=e||{};for(let r=0;r<t.length-1;r++){const o=t[r];(!(o in s)||typeof s[o]!="object")&&(s[o]=typeof t[r+1]=="number"?[]:{}),s=s[o]}const i=t[t.length-1];Array.isArray(s)&&typeof i=="number"?s.splice(i,0,n):s[i]=n}function ll(e,t,n){if(!e||t.length===0)return;let s=e||{};for(let i=0;i<t.length-1;i++){const r=t[i];(!(r in s)||typeof s[r]!="object")&&(s[r]=typeof t[i+1]=="number"?[]:{}),s=s[r]}s[t[t.length-1]]=n}function uc(e,t){if(!e||t.length===0)return;const[n,...s]=t;if(n in e){if(s.length===0){Array.isArray(e)?e.splice(n,1):delete e[n];return}uc(e[n],s),Sp(e[n])&&delete e[n]}}function Sp(e){return e&&Object.keys(e).length===0}function Op(e){return e.cardinality==="one"}function Qr(e){return e["value-type"]==="ref"}function Jr(e){return e["value-type"]==="blob"}function ui(e,t){return e[t]}function Gr(e,t){return t.reduce((n,s)=>n&&n.get(s),e)}function ht(e,t){if(t.length===0)throw new Error("path must have at least one element");if(t.length===1){e.delete(t[0]);return}const[n,...s]=t;e.has(n)&&ht(e.get(n),s)}function it(e,t,n){if(t.length===0)throw new Error("path must have at least one element");if(t.length===1){e.set(t[0],n);return}const[s,...i]=t;let r=e.get(s);r||(r=new Map,e.set(s,r)),it(r,i,n)}function dc(e,t){const n=new Map,s=new Map,i=new Map;for(const r of t){const[o,l,a,u]=r,c=ui(e,l);if(!c){console.warn("no such attr",o,e);continue}Qr(c)&&it(i,[a,l,o],r),it(n,[o,l,a],r),it(s,[l,o,a],r)}return{eav:n,aev:s,vae:i}}function fc(e){const t=new Map,n=new Map,s=new Map,i=new Map;for(const r of Object.values(e)){const o=r["forward-identity"],[l,a,u]=o,c=r["reverse-identity"];if(it(s,[a,u],r),Jr(r)&&it(t,[a,u],r),r["primary?"]&&it(n,[a],r),c){const[d,p,h]=c;it(i,[p,h],r)}}return{blobAttrs:t,primaryKeys:n,forwardIdents:s,revIdents:i}}function Ip(e){return{__type:e.__type,attrs:e.attrs,triples:ut(e.eav,3),cardinalityInference:e.cardinalityInference,linkIndex:e.linkIndex}}function Cp(e){return rr(e.attrs,e.triples,e.cardinalityInference,e.linkIndex)}function Yr(e){e.attrIndexes=fc(e.attrs)}function rr(e,t,n,s){const i=dc(e,t);return i.attrs=e,i.attrIndexes=fc(e),i.cardinalityInference=n,i.linkIndex=s,i.__type="store",i}function di(e,t){var n,s;let i;if(Array.isArray(t[0])){const[o,l]=t[0],a=e.aev.get(o);if(!a)return null;i=(n=ut(a,2).find(c=>c[2]===l))===null||n===void 0?void 0:n[0]}else i=t[0];if(!i)return null;const r=t[2];if(Array.isArray(r)&&r.length===2&&e.aev.get(r[0])){const[o,l]=r,a=e.aev.get(o);if(!a)return null;const c=(s=ut(a,2).find(y=>y[2]===l))===null||s===void 0?void 0:s[0];if(!c)return null;const[d,p,h,..._]=t;return[i,p,c,..._]}else{const[o,...l]=t;return[i,...l]}}function Pp(e,t){const n=di(e,t);if(!n)return;const[s,i,r]=n,o=ui(e.attrs,i);o&&(ht(e.eav,[s,i,r]),ht(e.aev,[i,s,r]),Qr(o)&&ht(e.vae,[r,i,s]))}let $p=0;function pc(e,t,n){const[s,i,r]=n;let o;const l=Gr(e.ea,[s,i,r]);return l&&(o=l[3]),o||Date.now()*10+$p++}function Ep(e,t){var n;const s=di(e,t);if(!s)return;const[i,r,o]=s,l=ui(e.attrs,r);if(!l)return;const a=Gr(e.eav,[i,r,o]),u=(n=a==null?void 0:a[3])!==null&&n!==void 0?n:pc(e,l,s),c=[i,r,o,u];Op(l)?(it(e.eav,[i,r],new Map([[o,c]])),it(e.aev,[r,i],new Map([[o,c]]))):(it(e.eav,[i,r,o],c),it(e.aev,[r,i,o],c)),Qr(l)&&it(e.vae,[o,r,i],c)}function xp(e,t){var n;const s=di(e,t);if(!s)return;const[i,r,o]=s,l=ui(e.attrs,r);if(!l)return;if(!Jr(l))throw new Error("merge operation is not supported for links");const a=Gr(e.eav,[i,r]);if(!a)return;const u=(n=a.values().next())===null||n===void 0?void 0:n.value;if(!u)return;const c=u[2],d=cc(c,o),p=[i,r,d,pc(e,l,u)];it(e.eav,[i,r],new Map([[d,p]]))}function or(e,t){var n,s;const[i,r]=t,o=di(e,[i]);if(!o)return;const[l]=o,a=e.eav.get(l);if(a){for(const c of a.keys()){const d=e.attrs[c];d&&d["on-delete-reverse"]==="cascade"&&ut(a.get(c),1).forEach(([p,h,_])=>{var y;return or(e,[_,(y=d["reverse-identity"])===null||y===void 0?void 0:y[1]])}),(!r||!d||((n=d["forward-identity"])===null||n===void 0?void 0:n[1])===r)&&(ht(e.aev,[c,l]),ht(e.eav,[l,c]))}a.size===0&&ht(e.eav,[l])}const u=e.vae.get(l)&&ut(e.vae.get(l),2);u&&u.forEach(c=>{var d,p;const[h,_,y]=c,I=e.attrs[_];(!r||!I||((d=I["reverse-identity"])===null||d===void 0?void 0:d[1])===r)&&(ht(e.eav,[h,_,y]),ht(e.aev,[_,h,y]),ht(e.vae,[y,_,h])),I&&I["on-delete"]==="cascade"&&or(e,[h,(p=I["forward-identity"])===null||p===void 0?void 0:p[1]])}),((s=e.vae.get(l))===null||s===void 0?void 0:s.size)===0&&ht(e.vae,[l])}function hc(e,t){const n=dc(e.attrs,t);Object.keys(n).forEach(s=>{e[s]=n[s]})}function Ap(e,[t]){e.attrs[t.id]=t,Yr(e)}function gc(e){return ut(e.eav,3)}function Rp(e,[t]){if(!e.attrs[t])return;const n=gc(e).filter(([s,i])=>i!==t);delete e.attrs[t],Yr(e),hc(e,n)}function kp(e,[t]){const n=e.attrs[t.id];n&&(e.attrs[t.id]=Object.assign(Object.assign({},n),t),Yr(e),hc(e,gc(e)))}function Mp(e,t){const[n,...s]=t;switch(n){case"add-triple":Ep(e,s);break;case"deep-merge-triple":xp(e,s);break;case"retract-triple":Pp(e,s);break;case"delete-entity":or(e,s);break;case"add-attr":Ap(e,s);break;case"delete-attr":Rp(e,s);break;case"update-attr":kp(e,s);break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${n}`)}}function ut(e,t,n=[]){if(!e||t===0)return n;if(t===1){for(const s of e.values())n.push(s);return n}for(const s of e.values())ut(s,t-1,n);return n}function Is(e,t,n){var s,i;const r=[];if(n!=null&&n.hasOwnProperty("$not")){for(const l of t.keys())n.$not!==l&&r.push(t.get(l));return r}if(n!=null&&n.hasOwnProperty("$isNull")){const{attrId:l,isNull:a,reverse:u}=n.$isNull;if(u)for(const c of t.keys()){const d=e.vae.get(c),p=!d||((s=d.get(l))===null||s===void 0?void 0:s.get(null))||!d.get(l);(a?p:!p)&&r.push(t.get(c))}else{const c=e.aev.get(l);for(const d of t.keys()){const p=!c||((i=c.get(d))===null||i===void 0?void 0:i.get(null))||!c.get(d);(a?p:!p)&&r.push(t.get(d))}}return r}if(n!=null&&n.$comparator)return ut(t,1).filter(n.$op);const o=n.in||n.$in||[n];for(const l of o){const a=t.get(l);a&&r.push(a)}return r}function Tp(e,t,n){let s="";return e!==void 0&&(s+="e"),t!==void 0&&(s+="a"),n!==void 0&&(s+="v"),s}function jp(e,[t,n,s]){var i,r;switch(Tp(t,n,s)){case"e":{const l=e.eav.get(t);return ut(l,2)}case"ea":{const l=(i=e.eav.get(t))===null||i===void 0?void 0:i.get(n);return ut(l,1)}case"eav":{const l=(r=e.eav.get(t))===null||r===void 0?void 0:r.get(n);return l?Is(e,l,s):[]}case"ev":{const l=e.eav.get(t);if(!l)return[];const a=[];for(const u of l.values())a.push(...Is(e,u,s));return a}case"a":{const l=e.aev.get(n);return ut(l,2)}case"av":{const l=e.aev.get(n);if(!l)return[];const a=[];for(const u of l.values())a.push(...Is(e,u,s));return a}case"v":{const l=[];for(const a of e.eav.values())for(const u of a.values())l.push(...Is(e,u,s));return l}default:return ut(e.eav,3)}}function Dp(e,t,n){var s;const i={};for(const[r,o]of t.entries()){const l=(s=e.eav.get(n))===null||s===void 0?void 0:s.get(o.id),a=ut(l,1);for(const u of a)i[r]=u[2]}return i}function Dn(e,t,n){var s;return(s=e.attrIndexes.forwardIdents.get(t))===null||s===void 0?void 0:s.get(n)}function vc(e,t,n){var s;return(s=e.attrIndexes.revIdents.get(t))===null||s===void 0?void 0:s.get(n)}function Up(e,t){return e.attrIndexes.blobAttrs.get(t)}function Lp(e,t){var n;const s=e.attrIndexes.primaryKeys.get(t);return s||((n=e.attrIndexes.forwardIdents.get(t))===null||n===void 0?void 0:n.get("id"))}function Np(e,t){return ir(e,n=>{t.forEach(s=>{Mp(n,s)})})}function Fp(e){return typeof e=="string"&&e.startsWith("?")}function qp(e,t,n){if(n.hasOwnProperty(e)){const s=n[e];return mc(s,t,n)}return Object.assign(Object.assign({},n),{[e]:t})}function al(e,t,n){return e===t?n:null}function Vp(e){switch(typeof e){case"string":return e.startsWith("?")?qp:al;default:return al}}const Bp=["in","$in","$not","$isNull","$comparator"];function Hp(e){for(const t of Bp)if(e.hasOwnProperty(t))return!0;return!1}function mc(e,t,n){return n?typeof e=="object"?Hp(e)?n:null:Vp(e)(e,t,n):null}function Wp(e,t,n){return e.reduce((s,i,r)=>{const o=t[r];return mc(i,o,s)},n)}function Kp(e,t,n){return Jp(e,t,n).map(s=>Wp(t,s,n)).filter(s=>s)}function zp(e,t,n){return t.or?t.or.patterns.flatMap(s=>lr(e,s,n)):t.and?t.and.patterns.reduce((s,i)=>lr(e,i,s),n):n.flatMap(s=>Kp(e,t,s))}function lr(e,t,n=[{}]){return t.reduce((s,i)=>zp(e,i,s),n)}function Xr(e,t){return Array.isArray(t)?t.map(n=>Xr(e,n)):Fp(t)?e[t]:t}function Qp(e,{find:t,where:n}){return lr(e,n).map(i=>Xr(i,t))}function Jp(e,t,n){return jp(e,Xr(n,t))}let Cs;const Gp=new Uint8Array(16);function Yp(){if(!Cs&&(Cs=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cs))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cs(Gp)}const Ne=[];for(let e=0;e<256;++e)Ne.push((e+256).toString(16).slice(1));function Xp(e,t=0){return Ne[e[t+0]]+Ne[e[t+1]]+Ne[e[t+2]]+Ne[e[t+3]]+"-"+Ne[e[t+4]]+Ne[e[t+5]]+"-"+Ne[e[t+6]]+Ne[e[t+7]]+"-"+Ne[e[t+8]]+Ne[e[t+9]]+"-"+Ne[e[t+10]]+Ne[e[t+11]]+Ne[e[t+12]]+Ne[e[t+13]]+Ne[e[t+14]]+Ne[e[t+15]]}const Zp=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),cl={randomUUID:Zp};function eh(e,t,n){if(cl.randomUUID&&!e)return cl.randomUUID();e=e||{};const s=e.random||(e.rng||Yp)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,Xp(s)}function ul(e){const t=e.replace(/-/g,""),n=[];for(let s=0;s<t.length;s+=2)n.push(parseInt(t.substring(s,s+2),16));return n}function th(e,t){for(let n=0;n<e.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function nh(e,t){return th(ul(e),ul(t))}function Be(){return eh()}let sh=0;function ss(e){return fi(`_${e}`,sh++)}function fi(e,t){return`?${e}-${t}`}class Un extends Error{constructor(t){super(t),this.name="AttrNotFoundError"}}function ih(e,t){const n=Lp(e,t);if(!n)throw new Un(`Could not find id attr for ${t}`);return n}function dl(e,t,n,s){return[rh(e,t,n,s)]}function rh(e,t,n,s){return[e(n,s),ih(t,n).id,e(n,s),e("time",s)]}function oh(e,t,n){return e.map(s=>s===t?n:s)}function _c(e,t,n,s,i){const r=Dn(t,n,i),o=vc(t,n,i),l=r||o;if(!l)throw new Un(`Could not find attr for ${[n,i]}`);if(l["value-type"]!=="ref")throw new Error(`Attr ${l.id} is not a ref`);const[a,u]=l["forward-identity"],[c,d]=l["reverse-identity"],p=s+1,h=r?[e(u,s),l.id,e(d,p),ss("time")]:[e(u,p),l.id,e(d,s),ss("time")];return[r?d:u,p,h,l,!!r]}function fl(e,t){if(typeof t!="string")return function(o){return!1};const s=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),i=new RegExp(`^${s}$`,e?void 0:"i");return function(o){return typeof o!="string"?!1:i.test(o)}}function lh(e,t){if(typeof t!="object"||t.hasOwnProperty("$in")||t.hasOwnProperty("in"))return t;const n=e["checked-data-type"]==="date";if(t.hasOwnProperty("$gt"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])>new Date(t.$gt)}:function(i){return i[2]>t.$gt}};if(t.hasOwnProperty("$gte"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])>=new Date(t.$gte)}:function(i){return i[2]>=t.$gte}};if(t.hasOwnProperty("$lt"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])<new Date(t.$lt)}:function(i){return i[2]<t.$lt}};if(t.hasOwnProperty("$lte"))return{$comparator:!0,$op:n?function(i){return new Date(i[2])<=new Date(t.$lte)}:function(i){return i[2]<=t.$lte}};if(t.hasOwnProperty("$like")){const s=fl(!0,t.$like);return{$comparator:!0,$op:function(r){return s(r[2])}}}if(t.hasOwnProperty("$ilike")){const s=fl(!1,t.$ilike);return{$comparator:!0,$op:function(r){return s(r[2])}}}return t}function ah(e,t,n,s,i,r){const o=Dn(t,n,i),l=vc(t,n,i),a=o||l;if(!a)throw new Un(`No attr for etype = ${n} label = ${i}`);if(r!=null&&r.hasOwnProperty("$isNull")){const u=Dn(t,n,"id");if(!u)throw new Un(`No attr for etype = ${n} label = id`);return[e(n,s),u.id,{$isNull:{attrId:a.id,isNull:r.$isNull,reverse:!o}},ss("time")]}return o?[e(n,s),a.id,lh(a,r),ss("time")]:[r,a.id,e(n,s),ss("time")]}function ch(e,t,n,s,i){const[r,o,l]=i.reduce((a,u)=>{const[c,d,p]=a,[h,_,y]=_c(e,t,c,d,u);return[h,_,[...p,y]]},[n,s,[]]);return[r,o,l]}function ar(e,t,n,s,i,r){const o=i.slice(0,i.length-1),l=i[i.length-1],[a,u,c]=ch(e,t,n,s,o),d=ah(e,t,a,u,l,r);return c.concat([d])}function uh(e,t){return t?[t].concat(e):e}function dh([e,t]){return e==="or"&&Array.isArray(t)}function fh([e,t]){return e==="and"&&Array.isArray(t)}function ph(e,t,n){return(s,i)=>{const r=e(s,i);return t==r?r:`${r}-${n}`}}function pl(e,t,n,s,i,r){const o=e(s,i),l=r.map((a,u)=>{const c=ph(e,o,u);return yc(c,n,s,i,a)});return{[t]:{patterns:l,joinSym:o}}}function hh(e){const t=[];for(let n=1;n<=e.length;n++)t.push(e.slice(0,n));return t}function hl(e,t,n,s,i){return hh(i).map(r=>ar(e,t,n,s,r,{$isNull:!0}))}function yc(e,t,n,s,i){return Object.entries(i).flatMap(([r,o])=>{if(dh([r,o]))return pl(e,"or",t,n,s,o);if(fh([r,o]))return pl(e,"and",t,n,s,o);if(r==="$entityIdStartsWith")return[];const l=r.split(".");if(o!=null&&o.hasOwnProperty("$not")){const a=ar(e,t,n,s,l,o),u=hl(e,t,n,s,l);return[{or:{patterns:[a,...u],joinSym:e(n,s)}}]}return o!=null&&o.hasOwnProperty("$isNull")&&o.$isNull===!0&&l.length>1?[{or:{patterns:hl(e,t,n,s,l),joinSym:e(n,s)}}]:ar(e,t,n,s,l,o)})}function gh(e,t,n,s){const i=fi;return s?yc(i,e,t,n,s).concat(dl(i,e,t,n)):dl(i,e,t,n)}function vh(e,t,n){return[e(t,n),e("time",n)]}function mh(e,t,n,s,i,r){const[o,l,a,u,c]=_c(e,t,n,s,i),d=oh(a,e(n,s),r);return[o,l,d,u,c]}function _h(e,t,{etype:n,level:s,form:i},r){const o=Object.keys(i).filter(l=>l!=="$");return o.length?Object.entries(r).map(function([a,u]){return o.map(function(p){var h,_,y;const I=!!(t.cardinalityInference&&(!((y=(_=(h=t.linkIndex)===null||h===void 0?void 0:h[n])===null||_===void 0?void 0:_[p])===null||y===void 0)&&y.isSingular));try{const[M,E,O]=mh(e,t,n,s,p,a),C=bc(t,{etype:M,level:E,form:i[p],join:O}),w=I?C[0]:C;return{[p]:w}}catch(M){if(M instanceof Un)return{[p]:I?void 0:[]};throw M}}).reduce(function(p,h){return Object.assign(Object.assign({},p),h)},u)}):Object.values(r)}function zs([e,t],[n,s]){return t===s||t==null&&s==null?nh(e,n):s==null?1:t==null?-1:t>s?1:-1}function cr(e){return e==null?e:new Date(e).getTime()}function yh(e,t,n,s){var i;const[r,o,l,a]=e,u=n==="desc"?1:-1;if(((i=t["forward-identity"])===null||i===void 0?void 0:i[2])==="id")return zs(s,[r,a])===u;const[c,d]=s,p=t["checked-data-type"]==="date"?cr(d):d,h=t["checked-data-type"]==="date"?cr(l):l;return zs([c,p],[r,h])===u}function bh(e,t){const n=t[1];return e.attrs[n]}function wh(e,t,n){const s=Object.keys(n)[0];return Dn(e,t,s)}function Sh(e,t,n,s){if(n)return bh(e,n);if(s)return wh(e,t,s)}function Oh(e,t,n){var s,i;if(!Array.isArray(n.fields))return Up(e,t);const r=new Map;for(const o of n.fields){const l=Dn(e,t,o),a=(s=l==null?void 0:l["forward-identity"])===null||s===void 0?void 0:s[2];a&&Jr(l)&&r.set(a,l)}if(!r.has("id")){const o=Dn(e,t,"id"),l=(i=o==null?void 0:o["forward-identity"])===null||i===void 0?void 0:i[2];l&&r.set(l,o)}return r}function Ih(e,t,n,s,i,r){var o;let l=Qp(e,r);const a=s==null?void 0:s["start-cursor"],u=Sh(e,t,a,i);if(u&&((o=u==null?void 0:u["forward-identity"])===null||o===void 0?void 0:o[2])!=="id"){const p=u["checked-data-type"]==="date",h=u.id;l=l.map(([_])=>{var y,I,M,E,O;let C=(O=(E=(M=(I=(y=e.eav.get(_))===null||y===void 0?void 0:y.get(h))===null||I===void 0?void 0:I.values())===null||M===void 0?void 0:M.next())===null||E===void 0?void 0:E.value)===null||O===void 0?void 0:O[2];return p&&(C=cr(C)),[_,C]})}l.sort(n==="asc"?function(h,_){return zs(h,_)}:function(h,_){return zs(_,h)});let c={};const d=Oh(e,t,r);for(const p of l){const[h]=p;if(c[h]||a&&u&&yh(a,u,n,p))continue;const _=Dp(e,d,h);_&&(c[h]=_)}return c}function Ch(e){var t;const n=(t=e.$)===null||t===void 0?void 0:t.order;return n&&n[Object.keys(n)[0]]||"asc"}function Ph(e,{etype:t,level:n,form:s,join:i,pageInfo:r}){var o,l,a,u,c,d,p,h,_;const y=((o=s.$)===null||o===void 0?void 0:o.limit)||((l=s.$)===null||l===void 0?void 0:l.first)||((a=s.$)===null||a===void 0?void 0:a.last),I=(u=s.$)===null||u===void 0?void 0:u.offset,M=(c=s.$)===null||c===void 0?void 0:c.before,E=(d=s.$)===null||d===void 0?void 0:d.after,O=(p=s.$)===null||p===void 0?void 0:p.order,C=(h=s.$)===null||h===void 0?void 0:h.fields;if((I||M||E)&&(!r||!r["start-cursor"]))return[];const w=uh(gh(e,t,n,(_=s.$)===null||_===void 0?void 0:_.where),i),P=vh(fi,t,n),N=Ih(e,t,Ch(s),r,O,{where:w,find:P,fields:C});if(y!=null){const V=Object.entries(N);return V.length<=y?N:Object.fromEntries(V.slice(0,y))}return N}function $h(e,t){try{return Ph(e,t)}catch(n){if(n instanceof Un)return{};throw n}}function bc(e,t){const n=$h(e,t);return _h(fi,e,t,n)}function Eh(e){const t={};for(const[n,s]of Object.entries(e))t[n]={startCursor:s["start-cursor"],endCursor:s["end-cursor"],hasNextPage:s["has-next-page?"],hasPreviousPage:s["has-previous-page?"]};return t}function xh({store:e,pageInfo:t,aggregate:n},s){const r={data:Object.keys(s).reduce(function(l,a){return n!=null&&n[a]||a==="$$ruleParams"||(l[a]=bc(e,{etype:a,form:s[a],level:0,pageInfo:t==null?void 0:t[a]})),l},{})};return t&&(r.pageInfo=Eh(t)),n&&(r.aggregate=n),r}function Ah(){const t={__etype:1,__ops:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(t))}const Rh=Ah();function ur(e,t,n){const s={__etype:e,__ops:n};return new Proxy(s,{get:(i,r)=>{if(r==="__ops")return n;if(r==="__etype")return e;if(Rh.has(r))return o=>ur(e,t,[...n,[r,e,t,o]])}})}function dr(e){return e.startsWith("lookup__")}function wc(e){const[t,n,...s]=e.split("__");return[n,JSON.parse(s.join("__"))]}function kh(e){return new Proxy({__etype:e},{get(t,n){if(n==="__etype")return e;const s=n;return dr(s)?ur(e,wc(s),[]):ur(e,s,[])}})}function Zr(){return new Proxy({},{get(e,t){return kh(t)}})}Zr();function Mh(e){return e.__ops}function Th(e,t){const{attrIdMap:n,refSwapAttrIds:s}=e,i=[];for(const o of t){const l=n[o];if(l)i.push(l);else if(Array.isArray(o)&&o.length==2&&n[o[0]]){const[a,u]=o;i.push([n[a],u])}else i.push(o)}const[r]=t;if((r==="add-triple"||r==="retract-triple")&&s.has(t[2])){const o=i[1];i[1]=i[3],i[3]=o}return i}function Ye(e,t,n){return Object.values(e).find(s=>{const[i,r,o]=s["forward-identity"];return r===t&&o===n})}function pn(e,t,n){return Object.values(e).find(s=>{const i=s["reverse-identity"];if(!i)return!1;const[r,o,l]=i;return o===t&&l===n})}function jh(e){if(Array.isArray(e))return e;const t=Object.entries(e);if(t.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return t[0]}function fr(e,t,n){return n.indexOf(".")!==-1&&!Ye(e,t,n)}function pr(e){const[t,n,...s]=e.split(".");if(s.length>0||n!=="id")throw new Error(`${e} is not a valid lookup attribute.`);return t}function Dh(e,t,n){if(!fr(e,t,n))return Ye(e,t,n);const s=pr(n),i=Ye(e,t,s)||pn(e,t,s);if(i&&i["value-type"]!=="ref")throw new Error(`${n} does not reference a valid link attribute.`);return i}function hr(e){return typeof e=="string"&&!dr(e)?null:typeof e=="string"&&dr(e)?wc(e):jh(e)}function dt(e,t,n){const s=hr(n);if(s===null)return n;const[i,r]=s,o=Dh(e,t,i);if(!o||!o["unique?"])throw new Error(`${i} is not a unique attribute.`);return[o.id,r]}function Sc(e,t,n,s){const i=dt(e,t,n);return Array.isArray(i)?[["add-triple",i,Ye(e,t,"id").id,i]].concat(s):s}function Uh(e,[t,n,s]){const i=Object.entries(s).flatMap(([r,o])=>{const l=Array.isArray(o)?o:[o],a=Ye(e,t,r),u=pn(e,t,r);return l.map(c=>a?["add-triple",dt(e,t,n),a.id,dt(e,a["reverse-identity"][1],c)]:["add-triple",dt(e,u["forward-identity"][1],c),u.id,dt(e,t,n)])});return Sc(e,t,n,i)}function Lh(e,[t,n,s]){const i=Object.entries(s).flatMap(([r,o])=>{const l=Array.isArray(o)?o:[o],a=Ye(e,t,r),u=pn(e,t,r);return l.map(c=>a?["retract-triple",dt(e,t,n),a.id,dt(e,a["reverse-identity"][1],c)]:["retract-triple",dt(e,u["forward-identity"][1],c),u.id,dt(e,t,n)])});return Sc(e,t,n,i)}function Nh(e,[t,n,s]){const i=ac(s),r=dt(e,t,n);return[["id",r]].concat(Object.entries(i)).map(([l,a])=>{const u=Ye(e,t,l);return["add-triple",r,u.id,a]})}function Fh(e,[t,n]){return[["delete-entity",dt(e,t,n),t]]}function qh(e,[t,n,s]){const i=ac(s),r=dt(e,t,n),o=Object.entries(i).map(([a,u])=>{const c=Ye(e,t,a);return["deep-merge-triple",r,c.id,u]});return[["add-triple",r,Ye(e,t,"id").id,r]].concat(o)}function Vh(e,[t,n,s]){return[["rule-params",dt(e,t,n),t,s]]}function Bh(e){const[t,n,s,i]=e;if(!i)return e;const r=Object.assign({},i);return delete r.id,[t,n,s,r]}function Hh(e,t){const[n,...s]=Bh(t);switch(n){case"merge":return qh(e,s);case"update":return Nh(e,s);case"link":return Uh(e,s);case"unlink":return Lh(e,s);case"delete":return Fh(e,s);case"ruleParams":return Vh(e,s);default:throw new Error(`unsupported action ${n}`)}}function Wh(e){switch(e){case"string":case"date":case"boolean":case"number":return e;default:return}}function Kh(e,t,n){var s,i;const r=(i=(s=e.entities[t])===null||s===void 0?void 0:s.attrs)===null||i===void 0?void 0:i[n];if(n==="id")return null;if(!r)throw new Error(`${t}.${n} does not exist in your schema`);const{unique:o,indexed:l}=r==null?void 0:r.config,a=Wh(r==null?void 0:r.valueType);return{"index?":l,"unique?":o,"checked-data-type":a}}function Ri(e,t,n,s){const i=e?Kh(e,t,n):null,r=Be(),l=[Be(),t,n];return Object.assign(Object.assign({id:r,"forward-identity":l,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},i||{}),s||{})}function zh(e,t,n){return Object.values(e.links).find(i=>i.forward.on===t&&i.forward.label===n||i.reverse.on===t&&i.reverse.label===n)}function Qh(e,t,n){const s=zh(e,t,n);if(!s)throw new Error(`Couldn't find the link ${t}.${n} in your schema`);const{forward:i,reverse:r}=s;return{"forward-identity":[Be(),i.on,i.label],"reverse-identity":[Be(),r.on,r.label],cardinality:i.has==="one"?"one":"many","unique?":r.has==="one"}}function gl(e,t,n,s){const i=e?Qh(e,t,n):null,r=Be(),o=[Be(),t,n],l=[Be(),n,t];return Object.assign(Object.assign({id:r,"forward-identity":o,"reverse-identity":l,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},i||{}),s||{})}const Jh=new Set(["update","merge","link","unlink"]),Gh=new Set(["link","unlink"]),Yh=new Set(["update","merge"]),Xh=new Set(["link","unlink","update","merge","delete","ruleParams"]),gr={"unique?":!0,"index?":!0},Zh=Object.assign(Object.assign({},gr),{cardinality:"one"});function eg(e){const t=[],[n,s,i,r]=e;if(!Xh.has(n))return t;const o=hr(i);if(o&&t.push({etype:s,lookupPair:o}),n==="link")for(const[l,a]of Object.entries(r)){const u=Array.isArray(a)?a:[a];for(const c of u){const d=hr(c);d&&t.push({etype:s,lookupPair:d,linkLabel:l})}}return t}function tg({attrs:e,schema:t},n){var s,i;const[r,o,l]=[new Set,Object.assign({},e),[]];function a(d){o[d.id]=d,l.push(["add-attr",d]),r.add(d.id)}function u(d){d!=null&&d.isUnsynced&&!r.has(d.id)&&(l.push(["add-attr",d]),r.add(d.id))}function c(d,p){const h=Ye(o,d,p),_=pn(o,d,p);u(h),u(_),!h&&!_&&a(gl(t,d,p,Zh))}for(const d of n)for(const{etype:p,lookupPair:h,linkLabel:_}of eg(d)){const y=h[0];if(_){c(p,_);const I=Ye(o,p,_),M=pn(o,p,_);u(I),u(M);const E=((s=I==null?void 0:I["reverse-identity"])===null||s===void 0?void 0:s[1])||((i=M==null?void 0:M["forward-identity"])===null||i===void 0?void 0:i[1])||_;if(fr(o,E,y))c(E,pr(y));else{const O=Ye(o,E,y);O||a(Ri(t,E,y,gr)),u(O)}}else if(fr(o,p,y))c(p,pr(y));else{const I=Ye(o,p,y);I||a(Ri(t,p,y,gr)),u(I)}}for(const d of n){const[p,h,_,y]=d;if(Jh.has(p)){const I=Object.keys(y);I.push("id");for(const M of I){const E=Ye(o,h,M);if(u(E),Yh.has(p)&&(E||a(Ri(t,h,M,M==="id"?{"unique?":!0}:null))),Gh.has(p)){const O=pn(o,h,M);!E&&!O&&a(gl(t,h,M)),u(O)}}}}return[o,l]}function ng(e,t){const s=(Array.isArray(t)?t:[t]).flatMap(l=>Mh(l)),[i,r]=tg(e,s),o=s.flatMap(l=>Hh(i,l));return[...r,...o]}var vl=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};class Oc{constructor(t){this.dbName=t,this._storeName="kv",this._dbPromise=this._init()}_init(){return new Promise((t,n)=>{const s=indexedDB.open(this.dbName,1);s.onerror=i=>{n(i)},s.onsuccess=i=>{t(i.target.result)},s.onupgradeneeded=i=>{i.target.result.createObjectStore(this._storeName)}})}getItem(t){return vl(this,void 0,void 0,function*(){const n=yield this._dbPromise;return new Promise((s,i)=>{const l=n.transaction([this._storeName],"readonly").objectStore(this._storeName).get(t);l.onerror=a=>{i(a)},l.onsuccess=a=>{l.result?s(l.result):s(null)}})})}setItem(t,n){return vl(this,void 0,void 0,function*(){const s=yield this._dbPromise;return new Promise((i,r)=>{const a=s.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(n,t);a.onerror=u=>{r(u)},a.onsuccess=u=>{i()}})})}}var sg=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};class Ic{static getIsOnline(){return sg(this,void 0,void 0,function*(){return navigator.onLine})}static listen(t){const n=()=>{t(!0)},s=()=>{t(!1)};return addEventListener("online",n),addEventListener("offline",s),()=>{removeEventListener("online",n),removeEventListener("offline",s)}}}var ig=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};class eo extends Error{constructor(t){var n;const s=((n=t.body)===null||n===void 0?void 0:n.message)||`API Error (${t.status})`;super(s);const i=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,i),Error.captureStackTrace&&Error.captureStackTrace(this,eo),this.name="InstantAPIError",this.status=t.status,this.body=t.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function Rt(e,t){return ig(this,void 0,void 0,function*(){const n=yield fetch(e,t),s=yield n.json();return n.status===200?Promise.resolve(s):Promise.reject(new eo({status:n.status,body:s}))})}var _s=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};function rg({apiURI:e,appId:t,email:n}){return Rt(`${e}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":t,email:n})})}function og(e){return _s(this,arguments,void 0,function*({apiURI:t,appId:n,email:s,code:i}){return yield Rt(`${t}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":n,email:s,code:i})})})}function lg(e){return _s(this,arguments,void 0,function*({apiURI:t,appId:n,refreshToken:s}){return yield Rt(`${t}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":n,"refresh-token":s})})})}function ml(e){return _s(this,arguments,void 0,function*({apiURI:t,appId:n,code:s,codeVerifier:i}){return yield Rt(`${t}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,code:s,code_verifier:i})})})}function ag(e){return _s(this,arguments,void 0,function*({apiURI:t,appId:n,nonce:s,idToken:i,clientName:r,refreshToken:o}){return yield Rt(`${t}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,nonce:s,id_token:i,client_name:r,refresh_token:o})})})}function cg(e){return _s(this,arguments,void 0,function*({apiURI:t,appId:n,refreshToken:s}){return yield Rt(`${t}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,refresh_token:s})})})}var ys=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};function ug(e){return ys(this,arguments,void 0,function*({apiURI:t,appId:n,path:s,file:i,refreshToken:r,contentType:o,contentDisposition:l}){const a={app_id:n,path:s,authorization:`Bearer ${r}`,"content-type":o||i.type};return l&&(a["content-disposition"]=l),yield Rt(`${t}/storage/upload`,{method:"PUT",headers:a,body:i})})}function dg(e){return ys(this,arguments,void 0,function*({apiURI:t,appId:n,path:s,refreshToken:i}){const{data:r}=yield Rt(`${t}/storage/files?app_id=${n}&filename=${encodeURIComponent(s)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${i}`}});return r})}function fg(e){return ys(this,arguments,void 0,function*({apiURI:t,appId:n,fileName:s,refreshToken:i,metadata:r={}}){const{data:o}=yield Rt(`${t}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${i}`},body:JSON.stringify({app_id:n,filename:s})});return o})}function pg(e,t){return ys(this,void 0,void 0,function*(){return(yield fetch(e,{method:"PUT",body:t,headers:{"Content-Type":t.type}})).ok})}function hg(e){return ys(this,arguments,void 0,function*({apiURI:t,appId:n,path:s,refreshToken:i}){const{data:r}=yield Rt(`${t}/storage/signed-download-url?app_id=${n}&filename=${encodeURIComponent(s)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${i}`}});return r})}let to=!1,Cc=!1,Pc=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(to=!!window.localStorage.getItem("devBackend"),Cc=!!window.localStorage.getItem("__instantLogging"),Pc=!!window.localStorage.getItem("__devtoolLocalDash"));function _l(e,t){if(!t)return e;const n={};return t.forEach(s=>{n[s]=e[s]}),n}function gg(e,t,n){var s,i;const r={peers:{}};if(t&&"user"in t?t.user:!0){const l=_l((s=e.user)!==null&&s!==void 0?s:{},t==null?void 0:t.keys);r.user=Object.assign(Object.assign({},l),{peerId:n})}for(const l of Object.keys((i=e.peers)!==null&&i!==void 0?i:{})){const a=(t==null?void 0:t.peers)===void 0,u=Array.isArray(t==null?void 0:t.peers)&&(t==null?void 0:t.peers.includes(l));if(a||u){const c=_l(e.peers[l],t==null?void 0:t.keys);r.peers[l]=Object.assign(Object.assign({},c),{peerId:l})}}return r}function vg(e,t){if(e.isLoading!==t.isLoading||e.error!==t.error||(e.user||t.user)&&(!e.user||!t.user||!ol(e.user,t.user))||!lc(e.peers,t.peers))return!0;for(const s of Object.keys(e.peers))if(!ol(e.peers[s],t.peers[s]))return!0;return!1}class yl{constructor(){this.promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}var Ps=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};class bl{constructor(t,n,s,i,r=a=>JSON.stringify(a),o=a=>JSON.parse(a),l=100){this._subs=[],this._persister=t,this._key=n,this._onMerge=i,this._loadedCbs=[],this._isLoading=!0,this.currentValue=s,this.toJSON=r,this.fromJSON=o,this._saveThrottleMs=l,this._pendingSaveCbs=[],this._version=0,this._load()}_load(){return Ps(this,void 0,void 0,function*(){const t=this.fromJSON(yield this._persister.getItem(this._key));this._isLoading=!1,this._onMerge(t,this.currentValue);for(const n of this._loadedCbs)n()})}waitForLoaded(){return Ps(this,void 0,void 0,function*(){if(!this._isLoading)return;yield new Promise(n=>{this._loadedCbs.push(n)})})}isLoading(){return this._isLoading}version(){return this._version}waitForSync(){return Ps(this,void 0,void 0,function*(){if(!this._nextSave)return;yield new Promise(n=>{this._pendingSaveCbs.push(n)})})}_writeToStorage(){this._persister.setItem(this._key,this.toJSON(this.currentValue));for(const t of this._pendingSaveCbs)t();this._pendingSaveCbs.length=0}flush(){return Ps(this,void 0,void 0,function*(){this._nextSave&&(clearTimeout(this._nextSave),this._writeToStorage())})}_enqueuePersist(t){if(this._nextSave){t&&this._pendingSaveCbs.push(t);return}this._nextSave=setTimeout(()=>{this._nextSave=null,this._writeToStorage()},this._saveThrottleMs)}set(t,n){this._version++,this.currentValue=t(this.currentValue),this._isLoading?this._loadedCbs.push(()=>this._enqueuePersist(n)):this._enqueuePersist(n);for(const s of this._subs)s(this.currentValue)}subscribe(t){return this._subs.push(t),t(this.currentValue),()=>{this._subs=this._subs.filter(n=>n!==t)}}}function $c(e,t=[]){e.forEach(n=>{const{data:s}=n,{"datalog-result":i}=s,{"join-rows":r}=i;for(const o of r)for(const l of o)t.push(l);$c(n["child-nodes"],t)})}function wl(e){const t=[];return $c(e,t),t}function Sl(e){return Object.values(e.links).reduce((t,n)=>{var s,i,r,o;return(s=t[r=n.forward.on])!==null&&s!==void 0||(t[r]={}),t[n.forward.on][n.forward.label]={isForward:!0,isSingular:n.forward.has==="one",link:n},(i=t[o=n.reverse.on])!==null&&i!==void 0||(t[o]={}),t[n.reverse.on][n.reverse.label]={isForward:!1,isSingular:n.reverse.has==="one",link:n},t},{})}const Ec="v0.19.22";function mg(e){return{info:e?console.info.bind(console):()=>{},debug:e?console.debug.bind(console):()=>{},error:e?console.error.bind(console):()=>{}}}var je=function(e,t,n,s){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function l(c){try{u(s.next(c))}catch(d){o(d)}}function a(c){try{u(s.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(l,a)}u((s=s.apply(e,t||[])).next())})};const Tt={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},_g=3e4,yg=3e4,bg=0,Ol=1,wg={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},ki="_instant_oauth_redirect",Mi="currentUser";let Sg=0;function Og(e){const t=new WebSocket(e);return t._id=Sg++,t}function Ig(){return typeof window<"u"||typeof chrome<"u"}const Il={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function Cg(e){var t;const n=JSON.parse(e);for(const s in n){const i=n[s];!((t=i==null?void 0:i.result)===null||t===void 0)&&t.store&&(i.result.store=Cp(i.result.store))}return n}function Pg(e){var t;const n={};for(const s in e){const i=e[s],r=Object.assign({},i);!((t=i.result)===null||t===void 0)&&t.store&&(r.result=Object.assign(Object.assign({},i.result),{store:Ip(i.result.store)})),n[s]=r}return JSON.stringify(n)}function $g(e){return[...e].sort((t,n)=>{const[s,i]=t,[r,o]=n,l=i.order||0,a=o.order||0;return l==a?s<r?-1:s>r?1:0:l-a})}class Eg{constructor(t,n=Oc,s=Ic,i){this._isOnline=!0,this._isShutdown=!1,this.status=Tt.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._onMergeQuerySubs=(r,o)=>{const l=r||{},a=Object.assign({},o);Object.entries(o).forEach(([c,d])=>{var p;const h=(p=l==null?void 0:l[c])===null||p===void 0?void 0:p.result,_=d.result;h&&!_&&(a[c].result=h)}),Object.keys(l).filter(c=>!o[c]).slice(0,10).forEach(c=>{a[c]=l[c]}),this.querySubs.set(c=>a),this.loadedNotifyAll()},this._onMergePendingMutations=(r,o)=>{const l=new Map([...r.entries(),...o.entries()]);this.pendingMutations.set(u=>l),this.loadedNotifyAll(),this._rewriteMutationsSorted(this.attrs,r).forEach(([u,c])=>{!o.has(u)&&!c["tx-id"]&&this._sendMutation(u,c)})},this.getPreviousResult=r=>{const o=nt(r);return this.dataForQuery(o)},this.notifyOne=r=>{var o,l;const a=(o=this.queryCbs[r])!==null&&o!==void 0?o:[],u=(l=this._dataForQueryCache[r])===null||l===void 0?void 0:l.data,c=this.dataForQuery(r);c&&(Ts(c,u)||a.forEach(d=>d.cb(c)))},this.notifyOneQueryOnce=r=>{var o;const l=(o=this.queryOnceDfds[r])!==null&&o!==void 0?o:[],a=this.dataForQuery(r);l.forEach(u=>{this._completeQueryOnce(u.q,r,u.dfd),u.dfd.resolve(a)})},this.notifyQueryError=(r,o)=>{(this.queryCbs[r]||[]).forEach(a=>a.cb({error:o}))},this.pushTx=r=>{try{const o=ng({attrs:this.optimisticAttrs(),schema:this.config.schema},r);return this.pushOps(o)}catch(o){return this.pushOps([],o)}},this.pushOps=(r,o)=>{const l=Be(),a=[...this.pendingMutations.currentValue.values()],u=Math.max(0,...a.map(p=>p.order||0))+1,c={op:"transact","tx-steps":r,created:Date.now(),error:o,order:u};this.pendingMutations.set(p=>(p.set(l,c),p));const d=new yl;return this.mutationDeferredStore.set(l,d),this._sendMutation(l,c),this.notifyAll(),d.promise},this._wsOnOpen=r=>{const o=r.target;if(this._ws!==o){this._log.info("[socket][open]",o._id,"skip; this is no longer the current ws");return}this._log.info("[socket][open]",this._ws._id),this._setStatus(Tt.OPENED),this.getCurrentUser().then(l=>{var a;this._trySend(Be(),{op:"init","app-id":this.config.appId,"refresh-token":(a=l.user)===null||a===void 0?void 0:a.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(l=>{this._log.error("[socket][error]",o._id,l)})},this._wsOnMessage=r=>{const o=r.target,l=JSON.parse(r.data.toString());if(this._ws!==o){this._log.info("[socket][message]",o._id,l,"skip; this is no longer the current ws");return}this._handleReceive(o._id,JSON.parse(r.data.toString()))},this._wsOnError=r=>{const o=r.target;if(this._ws!==o){this._log.info("[socket][error]",o._id,"skip; this is no longer the current ws");return}this._log.error("[socket][error]",o._id,r)},this._wsOnClose=r=>{const o=r.target;if(this._ws!==o){this._log.info("[socket][close]",o._id,"skip; this is no longer the current ws");return}this._setStatus(Tt.CLOSED);for(const l of Object.values(this._rooms))l.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",o._id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",o._id,"schedule reconnect, ms =",this._reconnectTimeoutMs),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",o._id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this.config=Object.assign(Object.assign({},wg),t),this._log=mg(t.verbose||to||Cc),this.versions=Object.assign(Object.assign({},i||{}),{"@instantdb/core":Ec}),this.config.schema&&(this._linkIndex=Sl(this.config.schema)),Ig()&&(typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",r=>je(this,void 0,void 0,function*(){var o;try{if(((o=r.data)===null||o===void 0?void 0:o.type)==="auth"){const l=yield this.getCurrentUser();this.updateUser(l.user)}}catch(l){this._log.error("[error] handle broadcast channel",l)}}))),this._oauthCallbackResponse=this._oauthLoginInit(),this._initStorage(n),this.getCurrentUser(),s.getIsOnline().then(r=>{this._isOnline=r,this._startSocket(),s.listen(o=>{o!==this._isOnline&&(this._log.info("[network] online =",o),this._isOnline=o,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",Tt.CLOSED),this._setStatus(Tt.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload)))}updateSchema(t){this.config=Object.assign(Object.assign({},this.config),{schema:t,cardinalityInference:!!t}),this._linkIndex=t?Sl(this.config.schema):null}_initStorage(t){this._persister=new t(`instant_${this.config.appId}_5`),this.querySubs=new bl(this._persister,"querySubs",{},this._onMergeQuerySubs,Pg,Cg),this.pendingMutations=new bl(this._persister,"pendingMutations",new Map,this._onMergePendingMutations,n=>JSON.stringify([...n.entries()]),n=>new Map(JSON.parse(n))),this._beforeUnloadCbs.push(()=>{this.pendingMutations.flush(),this.querySubs.flush()})}_beforeUnload(){for(const t of this._beforeUnloadCbs)t()}_finishTransaction(t,n,s){const i=this.mutationDeferredStore.get(n);this.mutationDeferredStore.delete(n);const r=t!=="error"&&t!=="timeout";!i&&!r&&console.error("Mutation failed",Object.assign({status:t,eventId:n},s)),i&&(r?i.resolve({status:t,eventId:n}):i.reject(Object.assign({status:t,eventId:n},s)))}_setStatus(t,n){this.status=t,this._errorMessage=n,this.notifyConnectionStatusSubs(t)}_flushEnqueuedRoomData(t){var n,s;const i=(s=(n=this._presence[t])===null||n===void 0?void 0:n.result)===null||s===void 0?void 0:s.user,r=this._broadcastQueue[t];if(this._broadcastQueue[t]=[],i&&this._trySetPresence(t,i),r)for(const o of r){const{topic:l,roomType:a,data:u}=o;this._tryBroadcast(t,a,l,u)}}_handleReceive(t,n){var s,i,r,o,l,a;const u=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(Il[n.op]||this._log.info("[receive]",t,n.op,n),n.op){case"init-ok":this._setStatus(Tt.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(n.attrs),this._flushPendingMessages(),this._sessionId=n["session-id"];for(const B of Object.keys(this._rooms)){const ne=(i=(s=this._presence[B])===null||s===void 0?void 0:s.result)===null||i===void 0?void 0:i.user;this._tryJoinRoom(B,ne)}break;case"add-query-exists":this.notifyOneQueryOnce(nt(n.q));break;case"add-query-ok":const{q:c,result:d}=n,p=nt(c),h=(o=(r=d==null?void 0:d[0])===null||r===void 0?void 0:r.data)===null||o===void 0?void 0:o["page-info"],_=(a=(l=d==null?void 0:d[0])===null||l===void 0?void 0:l.data)===null||a===void 0?void 0:a.aggregate,y=wl(d),I=rr(this.attrs,y,u,this._linkIndex);this.querySubs.set(B=>(B[p].result={store:I,pageInfo:h,aggregate:_,processedTxId:n["processed-tx-id"]},B)),this._cleanupPendingMutationsQueries(),this.notifyOne(p),this.notifyOneQueryOnce(p),this._cleanupPendingMutationsTimeout();break;case"refresh-ok":const{computations:M,attrs:E}=n;this._setAttrs(E),this._cleanupPendingMutationsTimeout();const O=this._rewriteMutationsSorted(E,this.pendingMutations.currentValue),C=n["processed-tx-id"],w=M.map(B=>{var ne,Re,le,xe;const qe=B["instaql-query"],Xe=B["instaql-result"],Qt=nt(qe),bn=wl(Xe),Ze=rr(this.attrs,bn,u,this._linkIndex),x=this._applyOptimisticUpdates(Ze,O,C),G=(Re=(ne=Xe==null?void 0:Xe[0])===null||ne===void 0?void 0:ne.data)===null||Re===void 0?void 0:Re["page-info"],z=(xe=(le=Xe==null?void 0:Xe[0])===null||le===void 0?void 0:le.data)===null||xe===void 0?void 0:xe.aggregate;return{hash:Qt,store:x,pageInfo:G,aggregate:z}});w.forEach(({hash:B,store:ne,pageInfo:Re,aggregate:le})=>{this.querySubs.set(xe=>(xe[B].result={store:ne,pageInfo:Re,aggregate:le,processedTxId:C},xe))}),this._cleanupPendingMutationsQueries(),w.forEach(({hash:B})=>{this.notifyOne(B)});break;case"transact-ok":const{"client-event-id":P,"tx-id":N}=n,j=this._rewriteMutations(this.attrs,this.pendingMutations.currentValue).get(P);if(!j)break;this.pendingMutations.set(B=>(B.set(P,Object.assign(Object.assign({},B.get(P)),{"tx-id":N,confirmed:Date.now()})),B)),this._cleanupPendingMutationsTimeout();const m=j["tx-steps"].filter(([B,...ne])=>B==="add-attr").map(([B,ne])=>ne).concat(Object.values(this.attrs));this._setAttrs(m),this._finishTransaction("synced",P);break;case"patch-presence":{const B=n["room-id"];this._patchPresencePeers(B,n.edits),this._notifyPresenceSubs(B);break}case"refresh-presence":{const B=n["room-id"];this._setPresencePeers(B,n.data),this._notifyPresenceSubs(B);break}case"server-broadcast":const S=n["room-id"],k=n.topic;this._notifyBroadcastSubs(S,k,n);break;case"join-room-ok":const F=n["room-id"],$=this._rooms[F];if(!$){this._roomsPendingLeave[F]&&(this._tryLeaveRoom(F),delete this._roomsPendingLeave[F]);break}$.isConnected=!0,this._notifyPresenceSubs(F),this._flushEnqueuedRoomData(F);break;case"join-room-error":const q=n["room-id"],ie=this._rooms[q];ie&&(ie.error=n.error),this._notifyPresenceSubs(q);break;case"error":this._handleReceiveError(n);break}}_handleMutationError(t,n,s){const i=this.pendingMutations.currentValue.get(n);i&&(t!=="timeout"||!i["tx-id"])&&(this.pendingMutations.set(r=>(r.delete(n),r)),this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(s),this._finishTransaction(t,n,s))}_handleReceiveError(t){var n,s,i,r,o;const l=t["client-event-id"],a=this.pendingMutations.currentValue.get(l),u={message:t.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(t.hint&&(u.hint=t.hint),a){const p={message:t.message,hint:t.hint};this._handleMutationError("error",l,p);return}if(!((n=t["original-event"])===null||n===void 0)&&n.hasOwnProperty("q")&&((s=t["original-event"])===null||s===void 0?void 0:s.op)==="add-query"){const p=(i=t["original-event"])===null||i===void 0?void 0:i.q,h=nt(p);this.notifyQueryError(nt(p),u),this.notifyQueryOnceError(p,h,l,u);return}if(((r=t["original-event"])===null||r===void 0?void 0:r.op)==="init"){if(t.type==="record-not-found"&&((o=t.hint)===null||o===void 0?void 0:o["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(Tt.ERRORED,u),this.notifyAll();return}const d=Object.assign({},t);delete d.message,delete d.hint,console.error(t.message,d),t.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,t.hint)}notifyQueryOnceError(t,n,s,i){var r;const o=(r=this.queryOnceDfds[n])===null||r===void 0?void 0:r.find(l=>l.eventId===s);o&&(o.dfd.reject(i),this._completeQueryOnce(t,n,o.dfd))}_setAttrs(t){this.attrs=t.reduce((n,s)=>(n[s.id]=s,n),{}),this.notifyAttrsSubs()}_startQuerySub(t,n){const s=Be();return this.querySubs.set(i=>(i[n]=i[n]||{q:t,result:null,eventId:s},i)),this._trySendAuthed(s,{op:"add-query",q:t}),s}subscribeQuery(t,n,s){var i;s&&"ruleParams"in s&&(t=Object.assign({$$ruleParams:s.ruleParams},t));const r=nt(t),o=this.getPreviousResult(t);return o&&n(o),this.queryCbs[r]=(i=this.queryCbs[r])!==null&&i!==void 0?i:[],this.queryCbs[r].push({q:t,cb:n}),this._startQuerySub(t,r),()=>{this._unsubQuery(t,r,n)}}queryOnce(t,n){var s;n&&"ruleParams"in n&&(t=Object.assign({$$ruleParams:n.ruleParams},t));const i=new yl;if(!this._isOnline)return i.reject(new Error("We can't run `queryOnce`, because the device is offline.")),i.promise;if(!this.querySubs)return i.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),i.promise;const r=nt(t),o=this._startQuerySub(t,r);return this.queryOnceDfds[r]=(s=this.queryOnceDfds[r])!==null&&s!==void 0?s:[],this.queryOnceDfds[r].push({q:t,dfd:i,eventId:o}),setTimeout(()=>i.reject(new Error("Query timed out")),_g),i.promise}_completeQueryOnce(t,n,s){this.queryOnceDfds[n]&&(this.queryOnceDfds[n]=this.queryOnceDfds[n].filter(i=>i.dfd!==s),this._cleanupQuery(t,n))}_unsubQuery(t,n,s){this.queryCbs[n]&&(this.queryCbs[n]=this.queryCbs[n].filter(i=>i.cb!==s),this._cleanupQuery(t,n))}_cleanupQuery(t,n){var s,i;!((s=this.queryCbs[n])===null||s===void 0)&&s.length||!((i=this.queryOnceDfds[n])===null||i===void 0)&&i.length||(delete this.queryCbs[n],delete this.queryOnceDfds[n],this._trySendAuthed(Be(),{op:"remove-query",q:t}))}_rewriteMutations(t,n){if(!t)return n;const s=a=>{const[u,c,d]=a["forward-identity"];return Ye(t,c,d)},i=a=>{const[u,c,d]=a["forward-identity"];return pn(t,c,d)},r={attrIdMap:{},refSwapAttrIds:new Set},o=a=>{const u=[];for(const c of a){const[d]=c;if(d==="add-attr"){const[h,_]=c,y=s(_);if(y){r.attrIdMap[_.id]=y.id;continue}if(_["value-type"]==="ref"){const I=i(_);if(I){r.attrIdMap[_.id]=I.id,r.refSwapAttrIds.add(_.id);continue}}}const p=Th(r,c);u.push(p)}return u},l=new Map;for(const[a,u]of n.entries())l.set(a,Object.assign(Object.assign({},u),{"tx-steps":o(u["tx-steps"])}));return l}_rewriteMutationsSorted(t,n){return $g(this._rewriteMutations(t,n).entries())}optimisticAttrs(){var t;const n=[...this.pendingMutations.currentValue.values()].flatMap(l=>l["tx-steps"]),s=new Set(n.filter(([l,a])=>l==="delete-attr").map(([l,a])=>a)),i=[];for(const[l,a]of n)if(l==="add-attr")i.push(a);else if(l==="update-attr"&&a.id&&(!((t=this.attrs)===null||t===void 0)&&t[a.id])){const u=Object.assign(Object.assign({},this.attrs[a.id]),a);i.push(u)}const r=[...Object.values(this.attrs||{}),...i].filter(l=>!s.has(l.id));return Object.fromEntries(r.map(l=>[l.id,l]))}dataForQuery(t){const n=this._errorMessage;if(n)return{error:n};if(!this.querySubs||!this.pendingMutations)return;const s=this.querySubs.version(),i=this.querySubs.currentValue,r=this.pendingMutations.version(),o=this.pendingMutations.currentValue,{q:l,result:a}=i[t]||{};if(!a)return;const u=this._dataForQueryCache[t];if(u&&s===u.querySubVersion&&r===u.pendingMutationsVersion)return u.data;const{store:c,pageInfo:d,aggregate:p,processedTxId:h}=a,_=this._rewriteMutationsSorted(c.attrs,o),y=this._applyOptimisticUpdates(c,_,h),I=xh({store:y,pageInfo:d,aggregate:p},l);return this._dataForQueryCache[t]={querySubVersion:s,pendingMutationsVersion:r,data:I},I}_applyOptimisticUpdates(t,n,s){for(const[i,r]of n)(!r["tx-id"]||s&&r["tx-id"]>s)&&(t=Np(t,r["tx-steps"]));return t}notifyAll(){Object.keys(this.queryCbs).forEach(t=>{this.notifyOne(t)})}loadedNotifyAll(){this.pendingMutations.isLoading()||this.querySubs.isLoading()||this.notifyAll()}shutdown(){var t;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(t=this._ws)===null||t===void 0||t.close()}_sendMutation(t,n){if(n.error){this._handleMutationError("error",t,{error:n.error,message:n.error.message});return}if(this.status!==Tt.AUTHENTICATED){this._finishTransaction("enqueued",t);return}const s=Math.max(5e3,this.pendingMutations.currentValue.size*5e3);this._isOnline?(this._trySend(t,n),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",t,{message:"transaction timed out"})},s)):this._finishTransaction("enqueued",t)}_flushPendingMessages(){Object.keys(this.queryCbs).map(i=>this.querySubs.currentValue[i]).filter(i=>i).forEach(({eventId:i,q:r})=>{this._trySendAuthed(i,{op:"add-query",q:r})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:i,q:r})=>{this._trySendAuthed(i,{op:"add-query",q:r})}),this._rewriteMutationsSorted(this.attrs,this.pendingMutations.currentValue).forEach(([i,r])=>{r["tx-id"]||this._sendMutation(i,r)})}_cleanupPendingMutationsQueries(){let t=Number.MAX_SAFE_INTEGER;for(const{result:n}of Object.values(this.querySubs.currentValue))n!=null&&n.processedTxId&&(t=Math.min(t,n==null?void 0:n.processedTxId));this.pendingMutations.set(n=>{for(const[s,i]of Array.from(n.entries()))i["tx-id"]&&i["tx-id"]<=t&&n.delete(s);return n})}_cleanupPendingMutationsTimeout(){const t=Date.now();this.pendingMutations.currentValue.size<200||this.pendingMutations.set(n=>{let s=!1,i=!1;for(const[r,o]of Array.from(n.entries()))o.confirmed||(i=!0),o.confirmed&&o.confirmed+yg<t&&(n.delete(r),s=!0);if(s&&i)for(const[r,o]of Array.from(n.entries()))o.confirmed||n.delete(r);return n})}_trySendAuthed(...t){this.status===Tt.AUTHENTICATED&&this._trySend(...t)}_trySend(t,n,s){this._ws.readyState===Ol&&(Il[n.op]||this._log.info("[send]",this._ws._id,n.op,n),this._ws.send(JSON.stringify(Object.assign({"client-event-id":t},n))))}_startSocket(){if(this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._ws&&this._ws.readyState==bg){this._log.info("[socket][start]",this._ws._id,"maintained as current ws, we were still in a connecting state");return}const t=this._ws;this._ws=Og(`${this.config.websocketURI}?app_id=${this.config.appId}`),this._ws.onopen=this._wsOnOpen,this._ws.onmessage=this._wsOnMessage,this._ws.onclose=this._wsOnClose,this._ws.onerror=this._wsOnError,this._log.info("[socket][start]",this._ws._id),(t==null?void 0:t.readyState)===Ol&&(this._log.info("[socket][start]",this._ws._id,"close previous ws id = ",t._id),t.close())}getLocalId(t){return je(this,void 0,void 0,function*(){const n=`localToken_${t}`,s=yield this._persister.getItem(n);if(s)return s;if(this._localIdPromises[n])return this._localIdPromises[n];const i=Be();return this._localIdPromises[n]=this._persister.setItem(n,i).then(()=>i),this._localIdPromises[n]})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const t=new URL(window.location.href);if(t.searchParams.get(ki)){const n=t.toString();t.searchParams.delete(ki),t.searchParams.delete("code"),t.searchParams.delete("error");const s=t.pathname+(t.searchParams.size?"?"+t.searchParams:"")+t.hash;if(history.replaceState(history.state,"",s),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let i=!1;const r=o=>{var l;i||(i=!0,navigation.removeEventListener("navigate",r),!o.userInitiated&&o.navigationType==="replace"&&((l=o.destination)===null||l===void 0?void 0:l.url)===n&&history.replaceState(history.state,"",s))};navigation.addEventListener("navigate",r)}}}_oauthLoginInit(){return je(this,void 0,void 0,function*(){var t,n,s,i;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const r=new URLSearchParams(window.location.search);if(!r.get(ki))return null;const o=r.get("error");if(o)return this._replaceUrlAfterOAuth(),{error:{message:o}};const l=r.get("code");if(!l)return null;this._replaceUrlAfterOAuth();try{const{user:a}=yield ml({apiURI:this.config.apiURI,appId:this.config.appId,code:l});return this.setCurrentUser(a),null}catch(a){return((t=a==null?void 0:a.body)===null||t===void 0?void 0:t.type)==="record-not-found"&&((s=(n=a==null?void 0:a.body)===null||n===void 0?void 0:n.hint)===null||s===void 0?void 0:s["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((i=a==null?void 0:a.body)===null||i===void 0?void 0:i.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return je(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(t){return this.mutationErrorCbs.push(t),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(n=>n!==t)}}subscribeAuth(t){this.authCbs.push(t);const n=this._currentUserCached;n.isLoading||t(this._currentUserCached);let s=!1;return this.getCurrentUser().then(i=>{s||Ts(i,n)||t(i)}),()=>{s=!0,this.authCbs=this.authCbs.filter(i=>i!==t)}}getAuth(){return je(this,void 0,void 0,function*(){const{user:t,error:n}=yield this.getCurrentUser();if(n)throw n;return t})}subscribeConnectionStatus(t){return this.connectionStatusCbs.push(t),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(n=>n!==t)}}subscribeAttrs(t){return this.attrsCbs.push(t),this.attrs&&t(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(n=>n!==t)}}notifyAuthSubs(t){this.authCbs.forEach(n=>n(t))}notifyMutationErrorSubs(t){this.mutationErrorCbs.forEach(n=>n(t))}notifyAttrsSubs(){if(!this.attrs)return;const t=this.optimisticAttrs();this.attrsCbs.forEach(n=>n(t))}notifyConnectionStatusSubs(t){this.connectionStatusCbs.forEach(n=>n(t))}setCurrentUser(t){return je(this,void 0,void 0,function*(){yield this._persister.setItem(Mi,JSON.stringify(t))})}getCurrentUserCached(){return this._currentUserCached}getCurrentUser(){return je(this,void 0,void 0,function*(){const t=yield this._waitForOAuthCallbackResponse();if(t!=null&&t.error){const i={error:t.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},i),i}const n=yield this._persister.getItem(Mi),s={user:JSON.parse(n),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},s),s})}_hasCurrentUser(){return je(this,void 0,void 0,function*(){const t=yield this._persister.getItem(Mi);return JSON.parse(t)!=null})}changeCurrentUser(t){return je(this,void 0,void 0,function*(){var n;const{user:s}=yield this.getCurrentUser();if(!Ts(s,t)){yield this.setCurrentUser(t),this.updateUser(t);try{(n=this._broadcastChannel)===null||n===void 0||n.postMessage({type:"auth"})}catch(i){console.error("Error posting message to broadcast channel",i)}}})}updateUser(t){const n={error:void 0,user:t};this._currentUserCached=Object.assign({isLoading:!1},n),this._dataForQueryCache={},this.querySubs.set(s=>(Object.keys(s).forEach(i=>{delete s[i].result}),s)),this._reconnectTimeoutMs=0,this._ws.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(n)}sendMagicCode({email:t}){return rg({apiURI:this.config.apiURI,appId:this.config.appId,email:t})}signInWithMagicCode(t){return je(this,arguments,void 0,function*({email:n,code:s}){const i=yield og({apiURI:this.config.apiURI,appId:this.config.appId,email:n,code:s});return yield this.changeCurrentUser(i.user),i})}signInWithCustomToken(t){return je(this,void 0,void 0,function*(){const n=yield lg({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:t});return yield this.changeCurrentUser(n.user),n})}potentiallyInvalidateToken(t,n){var s;const i=(s=t==null?void 0:t.user)===null||s===void 0?void 0:s.refresh_token;if(!i)return;if(n.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}cg({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:i}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(o=>{})}signOut(t){return je(this,void 0,void 0,function*(){const n=yield this.getCurrentUser();this.potentiallyInvalidateToken(n,t),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:t,redirectURL:n}){const{apiURI:s,appId:i}=this.config;return`${s}/runtime/oauth/start?app_id=${i}&client_name=${t}&redirect_uri=${n}`}exchangeCodeForToken(t){return je(this,arguments,void 0,function*({code:n,codeVerifier:s}){const i=yield ml({apiURI:this.config.apiURI,appId:this.config.appId,code:n,codeVerifier:s});return yield this.changeCurrentUser(i.user),i})}issuerURI(){const{apiURI:t,appId:n}=this.config;return`${t}/runtime/${n}`}signInWithIdToken(t){return je(this,arguments,void 0,function*({idToken:n,clientName:s,nonce:i}){var r;const o=yield this.getCurrentUser(),l=(r=o==null?void 0:o.user)===null||r===void 0?void 0:r.refresh_token,a=yield ag({apiURI:this.config.apiURI,appId:this.config.appId,idToken:n,clientName:s,nonce:i,refreshToken:l});return yield this.changeCurrentUser(a.user),a})}joinRoom(t,n){return this._rooms[t]||(this._rooms[t]={isConnected:!1,error:void 0}),this._presence[t]=this._presence[t]||{},n&&(this._presence[t].result=this._presence[t].result||{},this._presence[t].result.user=n,this._notifyPresenceSubs(t)),this._tryJoinRoom(t,n),()=>{this._cleanupRoom(t)}}_cleanupRoom(t){var n,s,i,r;if(!(!((s=(n=this._presence[t])===null||n===void 0?void 0:n.handlers)===null||s===void 0)&&s.length)&&!Object.keys((i=this._broadcastSubs[t])!==null&&i!==void 0?i:{}).length){const o=(r=this._rooms[t])===null||r===void 0?void 0:r.isConnected;delete this._rooms[t],delete this._presence[t],delete this._broadcastSubs[t],o?this._tryLeaveRoom(t):this._roomsPendingLeave[t]=!0}}getPresence(t,n,s={}){const i=this._rooms[n],r=this._presence[n];return!i||!r||!r.result?null:Object.assign(Object.assign({},gg(r.result,s,this._sessionId)),{isLoading:!i.isConnected,error:i.error})}publishPresence(t,n,s){const i=this._rooms[n],r=this._presence[n];if(!i||!r)return;r.result=r.result||{};const o=Object.assign(Object.assign({},r.result.user),s);r.result.user=o,i.isConnected&&(this._trySetPresence(n,o),this._notifyPresenceSubs(n))}_trySetPresence(t,n){this._trySendAuthed(Be(),{op:"set-presence","room-id":t,data:n})}_tryJoinRoom(t,n){this._trySendAuthed(Be(),{op:"join-room","room-id":t,data:n}),delete this._roomsPendingLeave[t]}_tryLeaveRoom(t){this._trySendAuthed(Be(),{op:"leave-room","room-id":t})}subscribePresence(t,n,s,i){const r=this.joinRoom(n,s.data),o=Object.assign(Object.assign({},s),{roomId:n,cb:i,prev:null});return this._presence[n]=this._presence[n]||{},this._presence[n].handlers=this._presence[n].handlers||[],this._presence[n].handlers.push(o),this._notifyPresenceSub(n,o),()=>{var l,a,u;this._presence[n].handlers=(u=(a=(l=this._presence[n])===null||l===void 0?void 0:l.handlers)===null||a===void 0?void 0:a.filter(c=>c!==o))!==null&&u!==void 0?u:[],r()}}_notifyPresenceSubs(t){var n,s;(s=(n=this._presence[t])===null||n===void 0?void 0:n.handlers)===null||s===void 0||s.forEach(i=>{this._notifyPresenceSub(t,i)})}_notifyPresenceSub(t,n){const s=this.getPresence("",t,n);s&&(n.prev&&!vg(s,n.prev)||(n.prev=s,n.cb(s)))}_patchPresencePeers(t,n){var s,i,r;const o=((i=(s=this._presence[t])===null||s===void 0?void 0:s.result)===null||i===void 0?void 0:i.peers)||{};let l=Object.fromEntries(Object.entries(o).map(([u,c])=>[u,{data:c}]));(r=this._presence[t])===null||r===void 0||r.result;const a=ir(l,u=>{for(let[c,d,p]of n)switch(d){case"+":wp(u,c,p);break;case"r":ll(u,c,p);break;case"-":uc(u,c);break}delete u[this._sessionId]});this._setPresencePeers(t,a)}_setPresencePeers(t,n){const s=Object.assign({},n);delete s[this._sessionId];const i=Object.fromEntries(Object.entries(s).map(([r,o])=>[r,o.data]));this._presence=ir(this._presence,r=>{ll(r,[t,"result","peers"],i)})}publishTopic({roomType:t,roomId:n,topic:s,data:i}){var r;const o=this._rooms[n];if(o){if(!o.isConnected){this._broadcastQueue[n]=(r=this._broadcastQueue[n])!==null&&r!==void 0?r:[],this._broadcastQueue[n].push({topic:s,roomType:t,data:i});return}this._tryBroadcast(n,t,s,i)}}_tryBroadcast(t,n,s,i){this._trySendAuthed(Be(),{op:"client-broadcast","room-id":t,roomType:n,topic:s,data:i})}subscribeTopic(t,n,s){const i=this.joinRoom(t);return this._broadcastSubs[t]=this._broadcastSubs[t]||{},this._broadcastSubs[t][n]=this._broadcastSubs[t][n]||[],this._broadcastSubs[t][n].push(s),this._presence[t]=this._presence[t]||{},()=>{this._broadcastSubs[t][n]=this._broadcastSubs[t][n].filter(r=>r!==s),this._broadcastSubs[t][n].length||delete this._broadcastSubs[t][n],i()}}_notifyBroadcastSubs(t,n,s){var i,r,o;(o=(r=(i=this._broadcastSubs)===null||i===void 0?void 0:i[t])===null||r===void 0?void 0:r[n])===null||o===void 0||o.forEach(l=>{var a,u,c,d,p,h;const _=(a=s.data)===null||a===void 0?void 0:a.data,y=s.data["peer-id"]===this._sessionId?(c=(u=this._presence[t])===null||u===void 0?void 0:u.result)===null||c===void 0?void 0:c.user:(h=(p=(d=this._presence[t])===null||d===void 0?void 0:d.result)===null||p===void 0?void 0:p.peers)===null||h===void 0?void 0:h[s.data["peer-id"]];return l(_,y)})}uploadFile(t,n,s){return je(this,void 0,void 0,function*(){var i;const r=yield this.getCurrentUser(),o=(i=r==null?void 0:r.user)===null||i===void 0?void 0:i.refresh_token;return ug(Object.assign(Object.assign({},s),{apiURI:this.config.apiURI,appId:this.config.appId,path:t,file:n,refreshToken:o}))})}deleteFile(t){return je(this,void 0,void 0,function*(){var n;const s=yield this.getCurrentUser(),i=(n=s==null?void 0:s.user)===null||n===void 0?void 0:n.refresh_token;return yield dg({apiURI:this.config.apiURI,appId:this.config.appId,path:t,refreshToken:i})})}upload(t,n){return je(this,void 0,void 0,function*(){var s;const i=yield this.getCurrentUser(),r=(s=i==null?void 0:i.user)===null||s===void 0?void 0:s.refresh_token,o=t||n.name,l=yield fg({apiURI:this.config.apiURI,appId:this.config.appId,fileName:o,refreshToken:r});return yield pg(l,n)})}getDownloadUrl(t){return je(this,void 0,void 0,function*(){var n;const s=yield this.getCurrentUser(),i=(n=s==null?void 0:s.user)===null||n===void 0?void 0:n.refresh_token;return yield hg({apiURI:this.config.apiURI,appId:this.config.appId,path:t,refreshToken:i})})}}class gt{constructor(t,n,s={indexed:!1,unique:!1}){this.valueType=t,this.required=n,this.config=s,this.metadata={}}clientRequired(){return new gt(this.valueType,!1,this.config)}optional(){return new gt(this.valueType,!1,this.config)}unique(){return new gt(this.valueType,this.required,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new gt(this.valueType,this.required,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class pi{constructor(t,n){this.attrs=t,this.links=n}asType(){return new pi(this.attrs,this.links)}}class hi{constructor(t,n,s){this.entities=t,this.links=n,this.rooms=s}withRoomSchema(){return new hi(this.entities,this.links,{})}}function xg(e,t){return new hi(xc(e,t),t,void 0)}function Ag(e){return new pi(e,{})}function Rg(){return new gt("string",!0)}function kg(){return new gt("number",!0)}function Mg(){return new gt("boolean",!0)}function Tg(){return new gt("date",!0)}function jg(){return new gt("json",!0)}function Dg(){return new gt("json",!0)}function xc(e,t){var n,s,i,r;const o={fwd:{},rev:{}};for(const a of Object.values(t))(n=o.fwd)[s=a.forward.on]||(n[s]={}),(i=o.rev)[r=a.reverse.on]||(i[r]={}),o.fwd[a.forward.on][a.forward.label]={entityName:a.reverse.on,cardinality:a.forward.has},o.rev[a.reverse.on][a.reverse.label]={entityName:a.forward.on,cardinality:a.reverse.has};return Object.fromEntries(Object.entries(e).map(([a,u])=>[a,new pi(u.attrs,Object.assign(Object.assign({},o.fwd[a]),o.rev[a]))]))}function Ug({entities:e,links:t,rooms:n}){const s=t??{},i=n??{};return new hi(xc(e,s),s,i)}const ce={graph:xg,schema:Ug,entity:Ag,string:Rg,number:kg,boolean:Mg,date:Tg,json:jg,any:Dg};let $s;function Lg(e,t){$s==null||$s.dispose();const n=Hg(t),s=qg(t,l),i=Fg(Ng(e));function r(c){var d;c.source===i.element.contentWindow&&((d=c.data)===null||d===void 0?void 0:d.type)==="close"&&n.isVisible()&&l()}function o(c){const d=c.shiftKey&&c.ctrlKey&&c.key==="0",p=c.key==="Escape"||c.key==="Esc";(d||p&&n.isVisible())&&l()}function l(){n.isVisible()?n.element.style.display="none":(n.element.style.display="block",n.element.contains(i.element)||n.element.appendChild(i.element))}function a(){n.element.remove(),s.element.remove(),removeEventListener("keydown",o),removeEventListener("message",r)}function u(){document.body.appendChild(n.element),document.body.appendChild(s.element),addEventListener("keydown",o),addEventListener("message",r),$s={dispose:a}}return u()}function Ng(e){return`${to||Pc?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${e}`}function Fg(e){const t=document.createElement("iframe");return t.src=e,t.className="instant-devtool-iframe",Object.assign(t.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:t}}function qg(e,t){const n=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,s=document.createElement("button");return s.innerHTML=n,s.className="instant-devtool-toggler",Object.assign(s.style,Object.assign(Object.assign({position:"fixed"},Vg(e.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),s.addEventListener("click",t),{element:s}}function Vg(e){switch(e){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function Bg(e){switch(e){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function Hg(e){const t=document.createElement("div");Object.assign(t.style,Object.assign(Object.assign({position:"fixed"},Bg(e.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),t.style.display="none",t.className="instant-devtool-container";function n(){return t.style.display!=="none"}return{element:t,isVisible:n}}const Wg={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function Kg(){var e;return globalThis.__instantDbSchemaHashStore=(e=globalThis.__instantDbSchemaHashStore)!==null&&e!==void 0?e:new WeakMap,globalThis.__instantDbSchemaHashStore}function zg(){var e;return globalThis.__instantDbStore=(e=globalThis.__instantDbStore)!==null&&e!==void 0?e:{},globalThis.__instantDbStore}function vr(e){const t=e.__adminToken;return e.appId+"_"+(e.websocketURI||"default_ws_uri")+"_"+(e.apiURI||"default_api_uri")+"_"+(t||"client_only")}const mr=zg(),Ti=Kg();class Qg{constructor(t){this.db=t,this.sendMagicCode=n=>this.db.sendMagicCode(n),this.signInWithMagicCode=n=>this.db.signInWithMagicCode(n),this.signInWithToken=n=>this.db.signInWithCustomToken(n),this.createAuthorizationURL=n=>this.db.createAuthorizationURL(n),this.signInWithIdToken=n=>this.db.signInWithIdToken(n),this.exchangeOAuthCode=n=>this.db.exchangeCodeForToken(n),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(n={invalidateToken:!0})=>this.db.signOut(n)}}class Jg{constructor(t){this.db=t,this.uploadFile=(n,s,i={})=>this.db.uploadFile(n,s,i),this.delete=n=>this.db.deleteFile(n),this.upload=(n,s)=>this.db.upload(n,s),this.put=this.upload,this.getDownloadUrl=n=>this.db.getDownloadUrl(n)}}function Gg(e){return JSON.parse(JSON.stringify(e))}class Yg{constructor(t){this.tx=Zr(),this._reactor=t,this.auth=new Qg(this._reactor),this.storage=new Jg(this._reactor)}transact(t){return this._reactor.pushTx(t)}getLocalId(t){return this._reactor.getLocalId(t)}subscribeQuery(t,n,s){return this._reactor.subscribeQuery(t,n,s)}subscribeAuth(t){return this._reactor.subscribeAuth(t)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(t){return this._reactor.subscribeConnectionStatus(t)}joinRoom(t="_defaultRoomType",n="_defaultRoomId",s){return{leaveRoom:this._reactor.joinRoom(n,s==null?void 0:s.initialPresence),subscribeTopic:(r,o)=>this._reactor.subscribeTopic(n,r,o),subscribePresence:(r,o)=>this._reactor.subscribePresence(t,n,r,o),publishTopic:(r,o)=>this._reactor.publishTopic({roomType:t,roomId:n,topic:r,data:o}),publishPresence:r=>this._reactor.publishPresence(t,n,r),getPresence:r=>this._reactor.getPresence(t,n,r)}}shutdown(){delete mr[vr(this._reactor.config)],this._reactor.shutdown()}queryOnce(t,n){return this._reactor.queryOnce(t,n)}}function Cl(e){if(!e)return"0";if(Ti.get(e))return Ti.get(e);const t=nt(e);return Ti.set(e,t),t}function Xg(e,t){return Cl(e._reactor.config.schema)!==Cl(t)}function Zg(e,t,n,s){const i=mr[vr(e)];if(i)return Xg(i,e.schema)&&i._reactor.updateSchema(e.schema),i;const r=new Eg(Object.assign(Object.assign(Object.assign({},Wg),e),{cardinalityInference:!!e.schema}),t||Oc,n||Ic,Object.assign(Object.assign({},s||{}),{"@instantdb/core":Ec})),o=new Yg(r);return mr[vr(e)]=o,ev(e.appId,e.devtool),o}function ev(e,t){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof t=="boolean"&&!t)return;const n=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof t=="object"?t:{});n.allowedHosts.includes(window.location.hostname)&&Lg(e,n)}function Kt(e){return Or()?(Nl(e),!0):!1}function tv(e){return{isLoading:!e,data:void 0,pageInfo:void 0,error:void 0,...e||{}}}function nv(e,t,n,s){const i=se(()=>{let a=Te(t);const u=Te(n);return a&&u&&"ruleParams"in u&&(a={$$ruleParams:u.ruleParams,...a}),a?Gg(a):null}),r=se(()=>nt(i.value)),o=tv(e._reactor.getPreviousResult(i.value)),l={isLoading:Y(o.isLoading),data:Ft(o.data),pageInfo:Ft(o.pageInfo),error:Ft(o.error),stop:()=>{}};if(!(s!=null&&s.clientOnlyUseQuery)||e._reactor.querySubs){const a=st(r,(u,c,d)=>{if(!i.value){s!=null&&s.stopLoadingOnNullQuery&&(l.isLoading.value=!1);return}const p=e.subscribeQuery(i.value,h=>{l.isLoading.value=!h,l.data.value=h.data,l.pageInfo.value=h.pageInfo,l.error.value=h.error});d(p)},{immediate:!0});l.stop=a,Kt(()=>{a()})}return{state:l,query:i}}function sv(){let e=null;function t(s,i){e&&clearTimeout(e),e=setTimeout(i,s)}function n(){e&&clearTimeout(e)}return Kt(()=>{n()}),{set:t,clear:n}}const iv=1e3;function rv(e,t,n){const s=[];function i(){s.forEach(o=>o()),s.length=0}const r=hn(o=>{const l=Te(t),a=e.id.value,u=Array.isArray(l)?l:[l],c=Array.isArray(n)?n:[n];s.push(...u.map(d=>e._core._reactor.subscribeTopic(a,d,(p,h)=>{c.forEach(_=>{_(p,h,d)})}))),o(i)});return Kt(()=>{r()}),r}function ov(e,t){const n=hn(r=>{const o=e.id.value,l=e._core._reactor.joinRoom(o);r(l)});let s=r=>{};const i=hn(()=>{const r=e.id.value,o=e.type.value,l=Te(t);s=a=>{e._core._reactor.publishTopic({roomType:o,roomId:r,topic:l,data:a})}});return Kt(()=>{n(),i()}),s}function lv(e,t={}){const n=()=>{const r=e._core._reactor.getPresence(e.type.value,e.id.value,Te(t))??{peers:{},isLoading:!0};return{peers:r.peers,isLoading:!!r.isLoading,user:r.user,error:r.error}},s={peers:Ft({}),isLoading:Y(!1),user:Ft(void 0),error:Ft(void 0)},i=hn(r=>{const o=e.id.value,l=e.type.value,a=Te(t);Object.entries(n()).forEach(([c,d])=>{s[c].value=d});const u=e._core._reactor.subscribePresence(l,o,a,c=>{Object.entries(c).forEach(([d,p])=>{s[d].value=p})});r(u)});return Kt(()=>{i()}),{...s,publishPresence:r=>{e._core._reactor.publishPresence(e.type.value,e.id.value,r)},stop:i}}function av(e,t,n){const s=hn(o=>{const l=e.id.value,a=Te(t),u=e._core._reactor.joinRoom(l,a);o(u)}),i=hn(()=>{const o=e.id.value,l=e.type.value,a=Te(t);Te(n),e._core._reactor.publishPresence(l,o,a)});function r(){s(),i()}return Kt(()=>{r()}),r}function cv(e,t,n={}){const s=sv(),i=Te(t),r=cn.usePresence(e,()=>({keys:[Te(t)]})),o=se(()=>{var d;const c=e._core._reactor.getPresence(e.type.value,e.id.value);return r.peers.value,(d=Te(n))!=null&&d.writeOnly?[]:Object.values((c==null?void 0:c.peers)??{}).filter(p=>p[i]===!0)}),l=c=>{const d=Te(n),p=Te(t),h=e.id.value,_=e.type.value;e._core._reactor.publishPresence(_,h,{[p]:c}),c&&((d==null?void 0:d.timeout)===null||(d==null?void 0:d.timeout)===0||s.set((d==null?void 0:d.timeout)??iv,()=>{e._core._reactor.publishPresence(_,h,{[p]:null})}))},a=c=>{const d=Te(n),h=!((d==null?void 0:d.stopOnEnter)&&c.key==="Enter");l(h)};function u(){s.clear()}return Kt(()=>{u()}),{active:o,setActive:l,inputProps:{onKeyDown:a,onBlur:()=>{l(!1)}},stop:u}}const cn={useTopicEffect:rv,usePublishTopic:ov,usePresence:lv,useSyncPresence:av,useTypingIndicator:cv};class uv{constructor(t,n,s){Ie(this,"_core");Ie(this,"type");Ie(this,"id");Ie(this,"useTopicEffect",(t,n)=>cn.useTopicEffect(this,t,n));Ie(this,"usePublishTopic",t=>cn.usePublishTopic(this,t));Ie(this,"usePresence",(t={})=>cn.usePresence(this,t));Ie(this,"useSyncPresence",(t,n)=>cn.useSyncPresence(this,t,n));Ie(this,"useTypingIndicator",(t,n={})=>cn.useTypingIndicator(this,t,n));this._core=t,this.type=n,this.id=s}}class js{constructor(t,n){Ie(this,"tx",Zr());Ie(this,"auth");Ie(this,"storage");Ie(this,"_core");Ie(this,"getLocalId",t=>this._core.getLocalId(t));Ie(this,"useLocalId",t=>{const n=Y(null),s=Y(!1);return ii(()=>{s.value=!0}),hn(async()=>{const i=Te(t);if(!s)return;const r=await this.getLocalId(i);Te(t)===i&&(n.value=r)}),n});Ie(this,"rooms",cn);Ie(this,"transact",t=>this._core.transact(t));Ie(this,"useQuery",(t,n)=>nv(this._core,t,n,this.constructor.extra).state);Ie(this,"useAuth",()=>{const t=this._core._reactor._currentUserCached,n={isLoading:Y(t.isLoading),user:Ft(t.user),error:Ft(t.error),stop:()=>{}},s=this._core._reactor.subscribeAuth(i=>{n.isLoading.value=!1,n.user.value=i.user,n.error.value=i.error});return n.stop=()=>{s()},Kt(()=>{s()}),n});Ie(this,"getAuth",()=>this._core.getAuth());Ie(this,"useConnectionStatus",()=>{const t=Y(this._core._reactor.status),n=this._core.subscribeConnectionStatus(s=>{t.value=s});return Kt(n),t});Ie(this,"queryOnce",(t,n)=>this._core.queryOnce(t,n));const{__extra_vue:s,...i}=t;i.clientOnlyUseQuery&&console.warn("clientOnlyUseQuery is deprecated. use __extra_vue.clientOnlyUseQuery"),this._core=Zg(i,this.constructor.Storage,this.constructor.NetworkListener,n),this.auth=this._core.auth,this.storage=this._core.storage,this.constructor.extra={clientOnlyUseQuery:!!(s!=null&&s.clientOnlyUseQuery)||!!i.clientOnlyUseQuery,stopLoadingOnNullQuery:!!(s!=null&&s.stopLoadingOnNullQuery)}}room(t,n){const s=se(()=>Te(t)||"_defaultRoomType"),i=se(()=>Te(n)||"_defaultRoomId");return new uv(this._core,s,i)}}Ie(js,"Storage"),Ie(js,"NetworkListener"),Ie(js,"extra");const dv="v0.7.1";function fv(e){return new js(e,{"@dorilama/instantdb-vue":dv})}const pv=ce.schema({entities:{$users:ce.entity({email:ce.string().unique().indexed()}),ingredients:ce.entity({name:ce.string(),category:ce.string().indexed(),type:ce.string().indexed(),unitPrice:ce.number(),totalPrice:ce.number(),amount:ce.number().optional(),unit:ce.string().optional(),mainUnit:ce.string().optional(),totalAmount:ce.number().optional(),instructions:ce.string().optional(),createdAt:ce.date(),updatedAt:ce.date()}),compound_ingredients:ce.entity({ingredientId:ce.number(),amount:ce.number()}),recipes:ce.entity({name:ce.string(),bartenderName:ce.string(),glass:ce.string(),ice:ce.string(),method:ce.string(),totalCost:ce.number(),status:ce.string().indexed(),createdAt:ce.date(),updatedAt:ce.date()}),recipe_ingredients:ce.entity({ingredientId:ce.number(),amount:ce.number(),name:ce.string(),unit:ce.string(),unitPrice:ce.number(),type:ce.string()})},links:{compoundIngredientLink:{forward:{on:"compound_ingredients",has:"one",label:"ingredient"},reverse:{on:"ingredients",has:"many",label:"compoundIngredients"}},recipeIngredientLink:{forward:{on:"recipe_ingredients",has:"one",label:"recipe"},reverse:{on:"recipes",has:"many",label:"recipeIngredients"}},userIngredients:{forward:{on:"ingredients",has:"one",label:"$user"},reverse:{on:"$users",has:"many",label:"ingredients"}},userRecipes:{forward:{on:"recipes",has:"one",label:"$user"},reverse:{on:"$users",has:"many",label:"recipes"}}}}),hv=void 0;throw new Error("VITE_INSTANT_APP_ID environment variable is required");const Me=fv({appId:hv,schema:pv}),gi=Lr("auth",()=>{const e=Y(!1),t=Y(null),n=Y(""),{isLoading:s,user:i,error:r}=Me.useAuth(),o=se(()=>!!i.value),l=async d=>{var p;try{e.value=!0,t.value=null,await Me.auth.sendMagicCode({email:d}),n.value=d}catch(h){throw t.value=((p=h.body)==null?void 0:p.message)||"Failed to send magic code",n.value="",h}finally{e.value=!1}},a=async(d,p)=>{var h;try{e.value=!0,t.value=null,await Me.auth.signInWithMagicCode({email:d,code:p}),n.value=""}catch(_){throw t.value=((h=_.body)==null?void 0:h.message)||"Invalid code",_}finally{e.value=!1}},u=async()=>{var d;try{await Me.auth.signOut(),n.value="",t.value=null}catch(p){throw t.value=((d=p.body)==null?void 0:d.message)||"Failed to sign out",p}},c=()=>{t.value=null};return{isLoading:se(()=>s.value||e.value),user:i,error:se(()=>{var d;return((d=r.value)==null?void 0:d.message)||t.value}),sentEmail:n,isAuthenticated:o,sendMagicCode:l,signInWithMagicCode:a,signOut:u,clearError:c}}),ke=Ln({visible:!1,title:"",percentage:0,subtitle:"",current:0,total:0});function ps(){return{progressState:ke,startImport:(i,r)=>{ke.visible=!0,ke.title=i,ke.total=r,ke.current=0,ke.percentage=0,ke.subtitle=`0 of ${r} items`},updateProgress:(i,r)=>{ke.current=i,ke.percentage=i/ke.total*100,r?ke.subtitle=`${i} of ${ke.total} items - ${r}`:ke.subtitle=`${i} of ${ke.total} items`},completeImport:i=>{ke.percentage=100,ke.subtitle=i||`Completed ${ke.total} items`,setTimeout(()=>{ke.visible=!1},1500)},hideProgress:()=>{ke.visible=!1}}}const Qs={大冰:5,"4x4冰":3,小冰:0,no冰:0},bs=Lr("recipes",()=>{var C;const e=gi(),t=Y([]),n=Y(!1),s=Y(null),i=Y(!1),r=Y([]),{isLoading:o,error:l,data:a}=Me.useQuery({recipes:{$:(C=e.user)!=null&&C.id?{where:{$user:e.user.id}}:{},recipeIngredients:{}}});console.log("🍸 Recipe query setup complete, current state:",{loading:o.value,error:l.value,data:a.value,authenticated:e.isAuthenticated}),st(()=>a.value,w=>{console.log("🍸 Recipe InstantDB data changed:",w),e.isAuthenticated&&w&&(console.log("🔄 Recipe data received, triggering sync"),u())},{deep:!0});const u=()=>{var w;console.log("🍸 Recipe syncFromInstant called, instantData:",a.value),(w=a.value)!=null&&w.recipes?(console.log("📥 Found recipes data:",a.value.recipes.length,"items"),t.value=a.value.recipes.map(P=>{const N=[],V=[];return P.recipeIngredients&&P.recipeIngredients.forEach(j=>{const m={id:typeof j.id=="string"?parseInt(j.id)||Date.now():j.id,ingredientId:j.ingredientId,amount:j.amount,name:j.name,unit:j.unit,unitPrice:j.unitPrice};j.type==="garnish"?V.push(m):N.push(m)}),{id:typeof P.id=="string"?parseInt(P.id)||Date.now():P.id,name:P.name,bartenderName:P.bartenderName,glass:P.glass,ice:P.ice,method:P.method,ingredients:N,garnishes:V,totalCost:P.totalCost,status:P.status}}),console.log("✅ Synced recipes to local state:",t.value.length,"items")):console.log("❌ No recipes data found in instantData")},c=()=>{const w=localStorage.getItem("recipes");w&&(t.value=JSON.parse(w).map(P=>{const N=P;return{...N,status:N.status||"complete"}}),d())},d=()=>{localStorage.setItem("recipes",JSON.stringify(t.value))},p=async w=>{if(!(!e.isAuthenticated||!e.user))try{const P=new Date().toISOString(),N=crypto.randomUUID();await Me.transact([Me.tx.recipes[N].update({name:w.name,bartenderName:w.bartenderName,glass:w.glass,ice:w.ice,method:w.method,totalCost:w.totalCost,status:w.status,createdAt:P,updatedAt:P}).link({$user:e.user.id}),...w.ingredients.map(V=>Me.tx.recipe_ingredients[crypto.randomUUID()].update({ingredientId:V.ingredientId,amount:V.amount,name:V.name,unit:V.unit,unitPrice:V.unitPrice,type:"ingredient"}).link({recipe:N})),...w.garnishes.map(V=>Me.tx.recipe_ingredients[crypto.randomUUID()].update({ingredientId:V.ingredientId,amount:V.amount,name:V.name,unit:V.unit,unitPrice:V.unitPrice,type:"garnish"}).link({recipe:N}))])}catch(P){throw s.value=P.message||"Failed to save to database",console.error("Failed to save recipe to InstantDB:",P),P}},h=async()=>{const w=localStorage.getItem("recipes");if(w&&e.isAuthenticated)try{const P=JSON.parse(w);if(P.length>0)return r.value=P,i.value=!0,new Promise(N=>{const V=st(i,j=>{j||(V(),N())})})}catch(P){console.error("Failed to parse local recipes data:",P)}},_=async()=>{const{startImport:w,updateProgress:P,completeImport:N}=ps();if(r.value.length>0){w("Migrating recipes to InstantDB",r.value.length);try{for(let V=0;V<r.value.length;V++){const j=r.value[V];await p(j),P(V+1,j.name)}N("Migration completed successfully!")}catch(V){console.error("Failed to migrate recipes to InstantDB:",V),N("Migration completed with some errors")}}localStorage.removeItem("recipes"),r.value=[],i.value=!1},y=()=>{localStorage.removeItem("recipes"),r.value=[],i.value=!1};st(()=>e.isAuthenticated,async(w,P)=>{w&&!P?(await h(),u()):!w&&P&&(t.value=[],localStorage.removeItem("recipes"))},{immediate:!1}),e.isAuthenticated?h().then(()=>{u()}):c();function I(w){const P={...w,id:Date.now(),status:w.status||"complete"};t.value.push(P),d(),e.isAuthenticated&&p(P)}function M(w){const P=t.value.findIndex(N=>N.id===w.id);P!==-1&&(t.value[P].status==="complete"&&w.status==="draft"&&(w.status="complete"),t.value[P]=w,d(),e.isAuthenticated&&p(w))}function E(w){t.value=t.value.filter(P=>P.id!==w),d(),e.isAuthenticated&&Me.transact(Me.tx.recipes[w].delete())}const O=async w=>{const{startImport:P,updateProgress:N,completeImport:V}=ps();if(t.value=w,e.isAuthenticated&&w.length>0){P("Importing recipes to InstantDB",w.length);try{for(let j=0;j<w.length;j++){const m=w[j];await p(m),N(j+1,m.name)}V("All recipes imported successfully!")}catch(j){console.error("Error importing recipes:",j),V("Import completed with some errors")}}else d()};return{recipes:t,isLoading:se(()=>o.value||n.value),error:se(()=>{var w;return((w=l.value)==null?void 0:w.message)||s.value}),addRecipe:I,updateRecipe:M,removeRecipe:E,loadSavedRecipes:c,saveRecipes:d,importData:O,showMigrationModal:i,migrationData:r,handleMigrationMerge:_,handleMigrationDiscard:y}}),no=["基酒","利口酒","裝飾","果汁果泥","苦精","酸","甜","調味料","其他"],yn=Lr("ingredients",()=>{var j;const e=gi(),t=Y([]),n=Y(!1),s=Y(null),i=Y(!1),r=Y([]),{isLoading:o,error:l,data:a}=Me.useQuery({ingredients:{$:(j=e.user)!=null&&j.id?{where:{$user:e.user.id}}:{},compoundIngredients:{}}});console.log("📊 Query setup complete, current state:",{loading:o.value,error:l.value,data:a.value,authenticated:e.isAuthenticated});const u=()=>{var m;console.log("🔄 syncFromInstant called, instantData:",a.value),(m=a.value)!=null&&m.ingredients?(console.log("📥 Found ingredients data:",a.value.ingredients.length,"items"),t.value=a.value.ingredients.map(S=>{var F;const k={id:typeof S.id=="string"?parseInt(S.id)||Date.now():S.id,name:S.name,category:S.category,type:S.type,unitPrice:S.unitPrice,totalPrice:S.totalPrice};return S.type==="複合材料"?{...k,type:"複合材料",mainUnit:S.mainUnit,ingredients:((F=S.compoundIngredients)==null?void 0:F.map($=>({ingredientId:$.ingredientId,amount:$.amount})))||[],totalAmount:S.totalAmount??0,instructions:S.instructions||""}:{...k,type:"單一材料",amount:S.amount??0,unit:S.unit}}),console.log("✅ Synced ingredients to local state:",t.value.length,"items")):console.log("❌ No ingredients data found in instantData")},c=()=>{const m=localStorage.getItem("ingredients");if(m){const S=JSON.parse(m);t.value=S.map(k=>{const F=k;let $=F.category;return $==="糖"&&($="甜"),$==="香料"&&($="調味料"),F.type==="複合材料"?{id:F.id,name:F.name,category:$,type:"複合材料",mainUnit:F.mainUnit,ingredients:F.ingredients,totalAmount:F.totalAmount,totalPrice:F.totalPrice,unitPrice:F.unitPrice,instructions:F.instructions}:{id:F.id,name:F.name,category:$,type:"單一材料",amount:F.amount,unit:F.unit,totalPrice:F.totalPrice,unitPrice:F.unitPrice}}),d()}},d=()=>{localStorage.setItem("ingredients",JSON.stringify(t.value))},p=async m=>{if(!(!e.isAuthenticated||!e.user))try{const S=new Date().toISOString(),k={name:m.name,category:m.category,type:m.type,unitPrice:m.unitPrice,totalPrice:m.totalPrice,updatedAt:S},F=crypto.randomUUID();m.type==="單一材料"?await Me.transact(Me.tx.ingredients[F].update({...k,amount:m.amount,unit:m.unit,createdAt:S}).link({$user:e.user.id})):await Me.transact([Me.tx.ingredients[F].update({...k,mainUnit:m.mainUnit,totalAmount:m.totalAmount,instructions:m.instructions,createdAt:S}).link({$user:e.user.id}),...m.ingredients.map($=>Me.tx.compound_ingredients[crypto.randomUUID()].update({ingredientId:$.ingredientId,amount:$.amount}).link({ingredient:F}))])}catch(S){throw s.value=S.message||"Failed to save to database",console.error("Failed to save ingredient to InstantDB:",S),S}},h=async()=>{const m=localStorage.getItem("ingredients");if(m&&e.isAuthenticated)try{const S=JSON.parse(m);if(S.length>0)return r.value=S,i.value=!0,new Promise(k=>{const F=st(i,$=>{$||(F(),k())})})}catch(S){console.error("Failed to parse local ingredients data:",S)}},_=async()=>{const{startImport:m,updateProgress:S,completeImport:k}=ps();if(r.value.length>0){m("Migrating ingredients to InstantDB",r.value.length);try{for(let F=0;F<r.value.length;F++){const $=r.value[F];await p($),S(F+1,$.name)}k("Migration completed successfully!")}catch(F){console.error("Failed to migrate ingredients to InstantDB:",F),k("Migration completed with some errors")}}localStorage.removeItem("ingredients"),r.value=[],i.value=!1},y=()=>{localStorage.removeItem("ingredients"),r.value=[],i.value=!1},I=()=>{t.value.length>0&&localStorage.setItem("ingredients",JSON.stringify(t.value))};st(()=>e.isAuthenticated,async(m,S)=>{m&&!S?(await h(),u()):!m&&S&&(I(),c())},{immediate:!1}),e.isAuthenticated?u():c();const M=m=>{let S=0,k=0;m.ingredients.forEach(({ingredientId:q,amount:ie})=>{const B=t.value.find(ne=>ne.id===q);!B||B.type!=="單一材料"||(B.unit===m.mainUnit&&(S+=ie),k+=B.unitPrice*ie)});const F=m.totalAmount||S,$=F>0?k/F:0;return{totalAmount:F,totalPrice:k,unitPrice:$}};function E(m){const S=m.totalPrice/m.amount,k={id:Date.now(),type:"單一材料",...m,unitPrice:S};t.value.push(k),d(),e.isAuthenticated&&p(k)}function O(m){const{totalAmount:S,totalPrice:k,unitPrice:F}=M({...m}),$={id:Date.now(),type:"複合材料",...m,totalAmount:S,totalPrice:k,unitPrice:F,instructions:m.instructions};t.value.push($),d(),e.isAuthenticated&&p($)}function C(m){const S=t.value.findIndex(k=>k.id===m.id);if(S!==-1){if(m.type==="複合材料"){const k=M(m);m.totalAmount=k.totalAmount,m.totalPrice=k.totalPrice,m.unitPrice=k.unitPrice}else m.unitPrice=m.totalPrice/m.amount;t.value[S]=m,d(),e.isAuthenticated&&p(m)}}function w(m){if(bs().recipes.some($=>$.ingredients.some(q=>q.ingredientId===m)||$.garnishes.some(q=>q.ingredientId===m)))throw new Error("Cannot delete ingredient that is used in recipes");if(t.value.some($=>$.type==="複合材料"&&$.ingredients.some(q=>q.ingredientId===m)))throw new Error("Cannot delete ingredient that is used in compound ingredients");t.value=t.value.filter($=>$.id!==m),d(),e.isAuthenticated&&Me.transact(Me.tx.ingredients[m].delete())}const P=se(()=>[...t.value].sort((m,S)=>m.name.localeCompare(S.name))),N=se(()=>m=>t.value.find(S=>S.id===m)),V=async m=>{const{startImport:S,updateProgress:k,completeImport:F}=ps();if(t.value=m,e.isAuthenticated&&m.length>0){S("Importing ingredients to InstantDB",m.length);try{for(let $=0;$<m.length;$++){const q=m[$];await p(q),k($+1,q.name)}F("All ingredients imported successfully!")}catch($){console.error("Error importing ingredients:",$),F("Import completed with some errors")}}else d()};return st(()=>e.isAuthenticated,async(m,S)=>{console.log("🔐 Auth state changed:",{isAuth:m,wasAuth:S}),m&&!S?(console.log("👤 User signed in, checking for local data to migrate"),await h(),u()):!m&&S&&(console.log("👤 User signed out, clearing all data for security"),t.value=[],localStorage.removeItem("ingredients"))},{immediate:!1}),st(()=>a.value,m=>{console.log("📡 InstantDB data changed:",m),e.isAuthenticated?(console.log("🔄 Authenticated, triggering sync"),u()):console.log("❌ Not authenticated, skipping sync")},{deep:!0}),console.log("🚀 Initial load, auth state:",e.isAuthenticated),e.isAuthenticated?(console.log("👤 Authenticated on init, checking for migration then syncing from InstantDB"),h().then(()=>{u()})):(console.log("👤 Not authenticated on init, loading from localStorage"),c()),st(()=>t.value.length,m=>{console.log("📊 Ingredients count changed:",m)}),{ingredients:t,isLoading:se(()=>o.value||n.value),error:se(()=>{var m;return((m=l.value)==null?void 0:m.message)||s.value}),sortedIngredients:P,getIngredientById:N,addSingleIngredient:E,addCompoundIngredient:O,updateIngredient:C,removeIngredient:w,loadSavedIngredients:c,saveIngredients:d,importData:V,showMigrationModal:i,migrationData:r,handleMigrationMerge:_,handleMigrationDiscard:y}}),gv={class:"data-import-export"},vv={class:"link-group"},mv={class:"import-link"},_v={key:0,class:"notification"},yv=Le({__name:"DataImportExport",setup(e){const t=yn(),n=bs(),s=Y(!1),i=Y(""),r=()=>{const l={ingredients:t.ingredients,recipes:n.recipes,version:"1.0",exportDate:new Date().toISOString()},a=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),u=URL.createObjectURL(a),c=document.createElement("a");c.href=u,c.download=`chocolate-list-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u),i.value="資料已成功匯出",s.value=!0,setTimeout(()=>{s.value=!1},3e3)},o=async l=>{var d;const a=l.target;if(!((d=a.files)!=null&&d.length))return;const u=a.files[0],c=new FileReader;c.onload=async p=>{var h;try{const _=JSON.parse((h=p.target)==null?void 0:h.result);if(!_.ingredients||!_.recipes||!Array.isArray(_.ingredients)||!Array.isArray(_.recipes))throw new Error("無效的資料格式");await t.importData(_.ingredients),await n.importData(_.recipes),i.value="資料已成功匯入",s.value=!0,setTimeout(()=>{s.value=!1},3e3),a.value=""}catch(_){console.error("Import error:",_),i.value=_ instanceof Error?`匯入失敗：${_.message}`:"匯入失敗：無效的資料格式",s.value=!0,setTimeout(()=>{s.value=!1},3e3)}},c.readAsText(u)};return(l,a)=>(D(),H("div",gv,[f("div",vv,[f("a",{href:"#",class:"export-link",onClick:kn(r,["prevent"])}," 匯出資料 "),f("label",mv,[a[0]||(a[0]=Ue(" 匯入資料 ")),f("input",{type:"file",accept:".json",onChange:o,class:"file-input"},null,32)])]),s.value?(D(),H("div",_v,L(i.value),1)):ye("",!0)]))}}),ze=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},bv=ze(yv,[["__scopeId","data-v-e0757e87"]]),wv={class:"footer"},Sv={class:"footer-content"},Ov=Le({__name:"Footer",setup(e){return(t,n)=>(D(),H("footer",wv,[f("div",Sv,[Ce(bv)])]))}}),Iv=ze(Ov,[["__scopeId","data-v-19c55066"]]),Cv={class:"auth-container"},Pv={class:"auth-card"},$v={key:0,class:"loading"},Ev={key:1,class:"error"},xv={key:2,class:"authenticated"},Av={key:3,class:"email-step"},Rv={key:4,class:"code-step"},kv=Le({__name:"AuthLogin",setup(e){const t=gi(),n=Y(null),s=r=>{r.preventDefault();const l=r.target.querySelector('input[type="email"]').value;t.sendMagicCode(l)},i=r=>{r.preventDefault();const l=r.target.querySelector('input[type="text"]').value;t.signInWithMagicCode(t.sentEmail,l)};return(r,o)=>{var l;return D(),H("div",Cv,[f("div",Pv,[oe(t).isLoading?(D(),H("div",$v," Loading... ")):oe(t).error?(D(),H("div",Ev,[Ue(L(oe(t).error)+" ",1),f("button",{onClick:o[0]||(o[0]=a=>oe(t).clearError()),class:"retry-btn"},"Try Again")])):oe(t).isAuthenticated?(D(),H("div",xv,[f("h2",null,"Welcome, "+L((l=oe(t).user)==null?void 0:l.email)+"!",1),f("button",{onClick:o[1]||(o[1]=a=>oe(t).signOut()),class:"sign-out-btn"},"Sign Out")])):oe(t).sentEmail?(D(),H("div",Rv,[f("form",{onSubmit:i},[o[5]||(o[5]=f("h2",null,"Enter your code",-1)),f("p",null,[o[3]||(o[3]=Ue("We sent an email to ")),f("strong",null,L(oe(t).sentEmail),1),o[4]||(o[4]=Ue(". Check your email and paste the code you see."))]),f("input",{ref_key:"inputRef",ref:n,type:"text",placeholder:"123456...",required:"",autofocus:"",class:"code-input"},null,512),o[6]||(o[6]=f("button",{type:"submit",class:"submit-btn"},"Verify Code",-1))],32)])):(D(),H("div",Av,[f("form",{onSubmit:s},o[2]||(o[2]=[f("h2",null,"Let's log you in",-1),f("p",null,"Enter your email, and we'll send you a verification code.",-1),f("input",{type:"email",placeholder:"Enter your email",required:"",autofocus:"",class:"email-input"},null,-1),f("button",{type:"submit",class:"submit-btn"},"Send Code",-1)]),32)]))])])}}}),Mv=ze(kv,[["__scopeId","data-v-44aec530"]]),Tv={class:"modal-content"},jv={class:"options"},Dv={class:"option"},Uv={class:"option-description"},Lv={class:"option"},Nv={class:"option-description"},Fv=Le({__name:"MigrationModal",props:{show:{type:Boolean},itemCount:{},itemType:{}},emits:["merge","discard"],setup(e,{emit:t}){const n=t,s=()=>{n("merge")},i=()=>{n("discard")};return(r,o)=>r.show?(D(),H("div",{key:0,class:"modal-overlay",onClick:i},[f("div",{class:"modal",onClick:o[0]||(o[0]=kn(()=>{},["stop"]))},[o[5]||(o[5]=f("div",{class:"modal-header"},[f("h3",null,"Local Data Found")],-1)),f("div",Tv,[f("p",null,[o[1]||(o[1]=Ue("You have ")),f("strong",null,L(r.itemCount),1),Ue(" "+L(r.itemType)+" stored locally.",1)]),o[4]||(o[4]=f("p",null,"What would you like to do with this data?",-1)),f("div",jv,[f("div",Dv,[o[2]||(o[2]=f("strong",null,"Merge with online data",-1)),f("p",Uv,"Add your local "+L(r.itemType)+" to your cloud storage",1)]),f("div",Lv,[o[3]||(o[3]=f("strong",null,"Use only online data",-1)),f("p",Nv,"Discard local "+L(r.itemType)+" and use only cloud data",1)])])]),f("div",{class:"modal-footer"},[f("button",{class:"btn btn-secondary",onClick:i}," Use Online Only "),f("button",{class:"btn btn-primary",onClick:s}," Merge Data ")])])])):ye("",!0)}}),Pl=ze(Fv,[["__scopeId","data-v-efc4d3fb"]]),qv={key:0,class:"progress-toast"},Vv={class:"progress-content"},Bv={class:"progress-text"},Hv={class:"progress-title"},Wv={class:"progress-percentage"},Kv={class:"progress-bar-container"},zv={key:0,class:"progress-subtitle"},Qv=Le({__name:"ProgressToast",props:{visible:{type:Boolean},title:{},percentage:{},subtitle:{}},setup(e){return(t,n)=>t.visible?(D(),H("div",qv,[f("div",Vv,[f("div",Bv,[f("span",Hv,L(t.title),1),f("span",Wv,L(Math.round(t.percentage))+"%",1)]),f("div",Kv,[f("div",{class:"progress-bar",style:Zs({width:`${t.percentage}%`})},null,4)]),t.subtitle?(D(),H("div",zv,L(t.subtitle),1)):ye("",!0)])])):ye("",!0)}}),Jv=ze(Qv,[["__scopeId","data-v-4751a5ca"]]),Gv={class:"app"},Yv={class:"header-content"},Xv={class:"nav-links"},Zv={key:0,class:"user-info"},em={class:"user-email"},tm={class:"main-container"},nm={key:0,class:"loading-state"},sm={key:1},im={key:0,class:"offline-banner"},rm={class:"offline-message"},om=Le({__name:"App",setup(e){const t=gi(),n=yn(),s=bs(),i=Y(!1),{progressState:r}=ps();return(o,l)=>{var a;return D(),H("div",Gv,[f("header",null,[f("div",Yv,[l[7]||(l[7]=f("h1",null,"酒譜資料庫",-1)),f("nav",null,[f("div",Xv,[Ce(oe(Xi),{to:"/",class:"nav-link"},{default:Fi(()=>l[5]||(l[5]=[Ue("酒譜一覽")])),_:1,__:[5]}),Ce(oe(Xi),{to:"/ingredients",class:"nav-link"},{default:Fi(()=>l[6]||(l[6]=[Ue("材料一覽")])),_:1,__:[6]})]),oe(t).isAuthenticated?(D(),H("div",Zv,[f("span",em,L((a=oe(t).user)==null?void 0:a.email),1),f("button",{onClick:l[0]||(l[0]=u=>oe(t).signOut()),class:"sign-out-btn"},"Sign Out")])):ye("",!0)])])]),f("div",tm,[oe(t).isLoading?(D(),H("div",nm,l[8]||(l[8]=[f("div",{class:"loading-spinner"},null,-1),f("p",null,"Loading...",-1)]))):(D(),H("div",sm,[oe(t).isAuthenticated?ye("",!0):(D(),H("div",im,[f("div",rm,[l[9]||(l[9]=f("span",null,"📴 離線模式 - 資料僅儲存在本地端",-1)),f("button",{onClick:l[1]||(l[1]=u=>i.value=!0),class:"auth-suggestion-btn"},"登入以同步資料")])])),i.value&&!oe(t).isAuthenticated?(D(),H("div",{key:1,class:"auth-overlay",onClick:l[4]||(l[4]=u=>i.value=!1)},[f("div",{class:"auth-dialog",onClick:l[3]||(l[3]=kn(()=>{},["stop"]))},[f("button",{class:"close-auth",onClick:l[2]||(l[2]=u=>i.value=!1)},"×"),Ce(Mv)])])):ye("",!0),Ce(oe(Za))]))]),Ce(Pl,{show:oe(n).showMigrationModal,"item-count":oe(n).migrationData.length,"item-type":"ingredients",onMerge:oe(n).handleMigrationMerge,onDiscard:oe(n).handleMigrationDiscard},null,8,["show","item-count","onMerge","onDiscard"]),Ce(Pl,{show:oe(s).showMigrationModal,"item-count":oe(s).migrationData.length,"item-type":"recipes",onMerge:oe(s).handleMigrationMerge,onDiscard:oe(s).handleMigrationDiscard},null,8,["show","item-count","onMerge","onDiscard"]),Ce(Jv,{visible:oe(r).visible,title:oe(r).title,percentage:oe(r).percentage,subtitle:oe(r).subtitle},null,8,["visible","title","percentage","subtitle"]),Ce(Iv)])}}}),lm=ze(om,[["__scopeId","data-v-50382d17"]]),am={class:"dialog-overlay"},cm={class:"dialog"},um={class:"dialog-header"},dm={class:"header-content"},fm={class:"bartender"},pm={class:"dialog-content"},hm={class:"section"},gm={class:"content-card"},vm={class:"ingredients-list"},mm={class:"ingredient-name"},_m={class:"ingredient-amount"},ym={class:"section"},bm={class:"content-card"},wm={class:"method-value"},Sm={class:"section"},Om={class:"content-card"},Im={class:"presentation-list"},Cm={class:"detail-item"},Pm={class:"detail-item"},$m={class:"detail-item"},Em={class:"garnishes-list"},xm={class:"dialog-footer"},Am={class:"total-cost"},Rm={class:"total-cost-value"},km={class:"button-group"},Mm=Le({__name:"RecipeDetailDialog",props:{recipe:{}},emits:["close","edit","delete"],setup(e,{emit:t}){const n=t;return(s,i)=>(D(),H("div",am,[f("div",cm,[f("div",um,[f("div",dm,[f("h2",null,L(s.recipe.name),1),f("div",fm,L(s.recipe.bartenderName),1)]),f("button",{class:"close-btn",onClick:i[0]||(i[0]=r=>n("close"))},"✕")]),f("div",pm,[f("div",hm,[i[3]||(i[3]=f("h3",null,"酒體材料",-1)),f("div",gm,[f("div",vm,[(D(!0),H(pe,null,Ee(s.recipe.ingredients,r=>(D(),H("div",{key:r.id,class:"ingredient-item"},[f("span",mm,L(r.name),1),f("span",_m,L(r.amount)+" "+L(r.unit),1)]))),128))])])]),f("div",ym,[i[4]||(i[4]=f("h3",null,"作法",-1)),f("div",bm,[f("div",wm,L(s.recipe.method),1)])]),f("div",Sm,[i[8]||(i[8]=f("h3",null,"呈現",-1)),f("div",Om,[f("div",Im,[f("div",Cm,[i[5]||(i[5]=f("span",{class:"label"},"杯子",-1)),f("span",null,L(s.recipe.glass),1)]),f("div",Pm,[i[6]||(i[6]=f("span",{class:"label"},"冰塊",-1)),f("span",null,L(s.recipe.ice),1)]),f("div",$m,[i[7]||(i[7]=f("span",{class:"label"},"裝飾物",-1)),f("div",Em,[(D(!0),H(pe,null,Ee(s.recipe.garnishes,r=>(D(),H("div",{key:r.id,class:"garnish-item"},L(r.name)+" "+L(r.amount)+" "+L(r.unit),1))),128))])])])])])]),f("div",xm,[f("div",Am,[i[9]||(i[9]=f("span",{class:"total-cost-label"},"總成本：",-1)),f("span",Rm,"$"+L(s.recipe.totalCost.toFixed(2)),1)]),f("div",km,[f("button",{class:"edit-btn",onClick:i[1]||(i[1]=r=>n("edit",s.recipe))}," 修改內容 "),f("button",{class:"delete-btn",onClick:i[2]||(i[2]=r=>n("delete",s.recipe.id))}," 刪除酒譜 ")])])])]))}}),Tm=ze(Mm,[["__scopeId","data-v-048e77d5"]]),jm={class:"ingredient-input"},Dm={class:"input-group"},Um={class:"search-container"},Lm={key:0,class:"dropdown"},Nm=["onClick"],Fm={class:"ingredient-name"},qm={class:"ingredient-type"},Vm={class:"amount-input"},Bm=["placeholder"],Hm={key:0,class:"unit"},Wm={key:0,class:"subtotal"},Km=Le({__name:"IngredientInput",props:{ingredients:{},initialIngredient:{},initialAmount:{},showDelete:{type:Boolean}},emits:["update","remove"],setup(e,{emit:t}){var h;const n=e,s=t,i=Y(n.initialIngredient||null),r=Y(n.initialAmount||0),o=Y(!1),l=Y(((h=i.value)==null?void 0:h.name)||""),a=se(()=>{if(!l.value)return n.ingredients;const _=l.value.toLowerCase();return n.ingredients.filter(y=>y.name.toLowerCase().includes(_))}),u=_=>_.type==="單一材料"?_.unit:_.mainUnit,c=_=>{i.value=_,o.value=!1,l.value=_.name,s("update",{ingredient:_,amount:r.value})},d=_=>{const y=_.target,I=parseFloat(y.value);r.value=I,i.value&&s("update",{ingredient:i.value,amount:I})},p=se(()=>!i.value||!r.value?0:i.value.unitPrice*r.value);return(_,y)=>(D(),H("div",jm,[f("div",Dm,[f("div",Um,[Oe(f("input",{"onUpdate:modelValue":y[0]||(y[0]=I=>l.value=I),onFocus:y[1]||(y[1]=I=>o.value=!0),type:"text",placeholder:"選擇材料"},null,544),[[De,l.value]]),o.value?(D(),H("div",Lm,[(D(!0),H(pe,null,Ee(a.value,I=>(D(),H("div",{key:I.id,class:"dropdown-item",onClick:M=>c(I)},[f("span",Fm,L(I.name),1),f("span",qm,L(I.type),1)],8,Nm))),128))])):ye("",!0)]),f("div",Vm,[Oe(f("input",{"onUpdate:modelValue":y[2]||(y[2]=I=>r.value=I),type:"number",min:"0",step:"1",onInput:y[3]||(y[3]=I=>d(I)),placeholder:i.value?"輸入"+u(i.value)+"數":"數量"},null,40,Bm),[[De,r.value,void 0,{number:!0}]]),i.value?(D(),H("span",Hm,L(u(i.value)),1)):ye("",!0)]),n.showDelete?(D(),H("button",{key:0,type:"button",class:"remove-btn",onClick:y[4]||(y[4]=I=>s("remove"))}," ✕ ")):ye("",!0)]),i.value&&r.value>0?(D(),H("div",Wm," 小計: $"+L(p.value.toFixed(2)),1)):ye("",!0)]))}}),_r=ze(Km,[["__scopeId","data-v-9638020c"]]),zm={class:"dialog-overlay"},Qm={class:"dialog"},Jm={class:"dialog-header"},Gm={class:"dialog-content"},Ym={class:"form-section"},Xm={class:"form-card"},Zm={class:"form-group"},e_={class:"form-group"},t_={class:"form-section"},n_={class:"form-card"},s_={class:"ingredients-list"},i_={class:"form-section"},r_={class:"form-card"},o_={class:"form-group"},l_=["value"],a_={class:"form-section"},c_={class:"form-card"},u_={class:"form-group"},d_={class:"form-group"},f_={class:"ice-options"},p_=["value","onUpdate:modelValue"],h_={class:"radio-text"},g_={class:"form-group"},v_={class:"garnishes-list"},m_={class:"dialog-footer"},__={class:"cost-display"},y_={class:"cost-amount"},b_={class:"button-group"},w_=Le({__name:"RecipeForm",props:{ingredients:{},initialRecipe:{},mode:{}},emits:["save","cancel"],setup(e,{emit:t}){var O,C,w,P,N,V;const n=e,s=t,i=Y({name:((O=n.initialRecipe)==null?void 0:O.name)||"",bartenderName:((C=n.initialRecipe)==null?void 0:C.bartenderName)||"",glass:((w=n.initialRecipe)==null?void 0:w.glass)||"",ice:((P=n.initialRecipe)==null?void 0:P.ice)||"no冰",method:((N=n.initialRecipe)==null?void 0:N.method)||"shake",ingredients:[],garnishes:[],totalCost:0,status:((V=n.initialRecipe)==null?void 0:V.status)||"draft"}),r=Y([]),o=Y([]),l=se(()=>n.ingredients.filter(j=>j.category==="裝飾"));ii(()=>{var j;n.initialRecipe&&n.mode==="edit"&&(r.value=n.initialRecipe.ingredients.map(m=>{const S=n.ingredients.find(k=>k.id===m.ingredientId);return{id:m.id,ingredient:S||null,amount:m.amount}}),o.value=((j=n.initialRecipe.garnishes)==null?void 0:j.map(m=>{const S=n.ingredients.find(k=>k.id===m.ingredientId);return{id:m.id,ingredient:S||null,amount:m.amount}}))||[]),r.value.length===0&&r.value.push({id:Date.now(),ingredient:null,amount:0}),o.value.length===0&&o.value.push({id:Date.now()+1,ingredient:null,amount:0})});const a=["shake","double strain shake","stir","blend","Co2","tap","rolling"],u=Object.keys(Qs),c=se(()=>{const j=r.value.reduce((k,F)=>!F.ingredient||!F.amount?k:k+F.amount*F.ingredient.unitPrice,0),m=o.value.reduce((k,F)=>!F.ingredient||!F.amount?k:k+F.amount*F.ingredient.unitPrice,0),S=i.value.ice?Qs[i.value.ice]:0;return j+m+S}),d=()=>{r.value.push({id:Date.now(),ingredient:null,amount:0})},p=j=>{r.value=r.value.filter(m=>m.id!==j)},h=(j,m)=>{const S=r.value.find(k=>k.id===j);S&&(S.ingredient=m.ingredient,S.amount=m.amount)},_=()=>{o.value.push({id:Date.now(),ingredient:null,amount:0})},y=j=>{o.value=o.value.filter(m=>m.id!==j)},I=(j,m)=>{const S=o.value.find(k=>k.id===j);S&&(S.ingredient=m.ingredient,S.amount=m.amount)},M=j=>j.type==="單一材料"?j.unit:j.mainUnit,E=(j="draft")=>{var F,$;if(!i.value.name||!i.value.bartenderName)return;const m=r.value.filter(q=>q.ingredient&&q.amount).map(q=>({id:q.id,ingredientId:q.ingredient.id,name:q.ingredient.name,amount:q.amount,unit:M(q.ingredient),unitPrice:q.ingredient.unitPrice})),S=o.value.filter(q=>q.ingredient&&q.amount).map(q=>({id:q.id,ingredientId:q.ingredient.id,name:q.ingredient.name,amount:q.amount,unit:M(q.ingredient),unitPrice:q.ingredient.unitPrice}));if(j==="complete"&&m.length===0)return;const k=((F=n.initialRecipe)==null?void 0:F.status)==="complete"?"complete":j;s("save",{...i.value,id:(($=n.initialRecipe)==null?void 0:$.id)||Date.now(),ingredients:m,garnishes:S,totalCost:c.value,status:k})};return(j,m)=>{var S,k,F;return D(),H("div",zm,[f("div",Qm,[f("div",Jm,[f("h2",null,L(j.mode==="create"?"新增酒譜":"修改酒譜"),1),f("button",{class:"close-btn",onClick:m[0]||(m[0]=$=>s("cancel"))},"✕")]),f("div",Gm,[f("section",Ym,[m[9]||(m[9]=f("h3",null,"基本資訊",-1)),f("div",Xm,[f("div",Zm,[m[7]||(m[7]=f("label",null,"酒名",-1)),Oe(f("input",{"onUpdate:modelValue":m[1]||(m[1]=$=>i.value.name=$),type:"text",placeholder:"請輸入酒名"},null,512),[[De,i.value.name]])]),f("div",e_,[m[8]||(m[8]=f("label",null,"調酒師名",-1)),Oe(f("input",{"onUpdate:modelValue":m[2]||(m[2]=$=>i.value.bartenderName=$),type:"text",placeholder:"請輸入調酒師名"},null,512),[[De,i.value.bartenderName]])])])]),f("section",t_,[m[11]||(m[11]=f("h3",null,"酒體材料",-1)),f("div",n_,[f("div",s_,[(D(!0),H(pe,null,Ee(r.value,$=>(D(),It(_r,{key:$.id,ingredients:j.ingredients,"show-delete":r.value.length>1,"initial-ingredient":$.ingredient,"initial-amount":$.amount,onUpdate:q=>h($.id,q),onRemove:q=>p($.id)},null,8,["ingredients","show-delete","initial-ingredient","initial-amount","onUpdate","onRemove"]))),128))]),f("button",{class:"add-more-btn",onClick:d,type:"button"},m[10]||(m[10]=[f("span",{class:"plus-icon"},"+",-1),Ue(" 新增其他材料 ")]))])]),f("section",i_,[m[13]||(m[13]=f("h3",null,"作法",-1)),f("div",r_,[f("div",o_,[m[12]||(m[12]=f("label",null,"調製方式",-1)),Oe(f("select",{"onUpdate:modelValue":m[3]||(m[3]=$=>i.value.method=$),class:"method-select"},[(D(),H(pe,null,Ee(a,$=>f("option",{key:$,value:$},L($),9,l_)),64))],512),[[gn,i.value.method]])])])]),f("section",a_,[m[18]||(m[18]=f("h3",null,"呈現",-1)),f("div",c_,[f("div",u_,[m[14]||(m[14]=f("label",null,"杯子",-1)),Oe(f("input",{"onUpdate:modelValue":m[4]||(m[4]=$=>i.value.glass=$),type:"text",placeholder:"請輸入杯子種類"},null,512),[[De,i.value.glass]])]),f("div",d_,[m[15]||(m[15]=f("label",null,"冰塊",-1)),f("div",f_,[(D(!0),H(pe,null,Ee(oe(u),$=>(D(),H("label",{class:"radio-label",key:$},[Oe(f("input",{type:"radio",value:$,"onUpdate:modelValue":q=>i.value.ice=q,name:"ice-type"},null,8,p_),[[Wd,i.value.ice]]),f("span",h_,L($),1)]))),128))])]),f("div",g_,[m[17]||(m[17]=f("label",null,"裝飾物",-1)),f("div",v_,[(D(!0),H(pe,null,Ee(o.value,$=>(D(),It(_r,{key:$.id,ingredients:l.value,"show-delete":o.value.length>1,"initial-ingredient":$.ingredient,"initial-amount":$.amount,onUpdate:q=>I($.id,q),onRemove:q=>y($.id)},null,8,["ingredients","show-delete","initial-ingredient","initial-amount","onUpdate","onRemove"]))),128))]),f("button",{class:"add-more-btn",onClick:_,type:"button"},m[16]||(m[16]=[f("span",{class:"plus-icon"},"+",-1),Ue(" 新增其他裝飾物 ")]))])])])]),f("div",m_,[f("div",__,[m[19]||(m[19]=Ue(" 成本 ")),f("span",y_,"$"+L(c.value.toFixed(2)),1)]),f("div",b_,[j.mode==="create"||j.mode==="edit"&&((S=j.initialRecipe)==null?void 0:S.status)==="draft"?(D(),H("button",{key:0,class:"draft-btn",onClick:m[5]||(m[5]=$=>E("draft"))},L((j.mode==="edit"&&((k=j.initialRecipe)==null?void 0:k.status)==="draft","暫存")),1)):ye("",!0),f("button",{class:"submit-btn",onClick:m[6]||(m[6]=$=>E("complete"))},L(j.mode==="edit"&&((F=j.initialRecipe)==null?void 0:F.status)==="draft"?"完成酒譜":j.mode==="create"?"新增":"更新"),1)])])])])}}}),$l=ze(w_,[["__scopeId","data-v-55ba1646"]]),S_={class:"recipe-list"},O_={class:"header"},I_={class:"tab-container"},C_={class:"tabs"},P_={class:"badge"},$_={class:"badge"},E_={key:0,class:"empty-state"},x_={key:0,class:"recipes-grid"},A_=["onClick"],R_={class:"recipe-info"},k_={class:"recipe-main-info"},M_={class:"recipe-name"},T_={class:"bartender-tag"},j_={class:"recipe-cost"},D_={class:"cost-value"},U_={key:1,class:"empty-state"},L_=Le({__name:"RecipeList",setup(e){const t=bs(),n=yn(),{recipes:s}=Mn(t),{ingredients:i}=Mn(n),r=Y(!1),o=Y(!1),l=Y(!1),a=Y(null),u=Y(!1),c=Y(""),d=Y("complete"),p=se(()=>s.value.filter(w=>w.status===d.value)),h=se(()=>({draft:s.value.filter(w=>w.status==="draft").length,complete:s.value.filter(w=>w.status==="complete").length})),_=()=>{r.value=!1},y=w=>{w.status==="draft"?M(w):(a.value=w,o.value=!0)},I=()=>{o.value=!1,a.value=null},M=w=>{a.value=w,l.value=!0,o.value=!1},E=w=>{if(w.id&&s.value.find(P=>P.id===w.id)){const P=s.value.findIndex(N=>N.id===w.id);P!==-1&&(s.value[P]=w,t.saveRecipes(),c.value=`${w.name}的內容已被更新`)}else t.addRecipe(w),c.value=`${w.name}已成功加入資料庫`;u.value=!0,setTimeout(()=>{u.value=!1},3e3),_(),C()},O=w=>{t.removeRecipe(w),I()},C=()=>{l.value=!1,a.value=null};return(w,P)=>(D(),H("div",S_,[f("div",O_,[P[9]||(P[9]=f("h2",null,"酒譜一覽",-1)),f("button",{class:"add-btn",onClick:P[0]||(P[0]=N=>r.value=!0)},P[8]||(P[8]=[f("span",{class:"plus-icon"},"+",-1),Ue(" 新增酒譜 ")]))]),f("div",I_,[f("div",C_,[f("button",{class:Lt(["tab-btn",{active:d.value==="complete"}]),onClick:P[1]||(P[1]=N=>d.value="complete")},[P[10]||(P[10]=Ue(" 完成區 ")),f("span",P_,L(h.value.complete),1)],2),f("button",{class:Lt(["tab-btn",{active:d.value==="draft"}]),onClick:P[2]||(P[2]=N=>d.value="draft")},[P[11]||(P[11]=Ue(" 暫存區 ")),f("span",$_,L(h.value.draft),1)],2)])]),oe(s).length===0?(D(),H("div",E_,[P[12]||(P[12]=f("p",null,"尚未新增任何酒譜",-1)),f("button",{class:"add-recipe-btn",onClick:P[3]||(P[3]=N=>r.value=!0)}," 立即新增第一個酒譜 ")])):(D(),H(pe,{key:1},[p.value.length>0?(D(),H("div",x_,[(D(!0),H(pe,null,Ee(p.value,N=>(D(),H("div",{key:N.id,class:"recipe-card",onClick:V=>y(N)},[f("div",R_,[f("div",k_,[f("span",M_,L(N.name),1),f("span",T_,L(N.bartenderName),1)]),f("div",j_,[P[13]||(P[13]=f("span",{class:"cost-label"},"成本",-1)),f("span",D_,"$"+L(N.totalCost.toFixed(2)),1)])])],8,A_))),128))])):(D(),H("div",U_,[P[14]||(P[14]=f("p",null,"此分類中尚無酒譜",-1)),f("button",{class:"add-recipe-btn",onClick:P[4]||(P[4]=N=>r.value=!0)}," 新增酒譜 ")]))],64)),o.value&&a.value?(D(),It(Tm,{key:2,recipe:a.value,onClose:I,onEdit:M,onDelete:O},null,8,["recipe"])):ye("",!0),r.value?(D(),H("div",{key:3,class:"dialog-overlay",onClick:_},[f("div",{class:"dialog",onClick:P[5]||(P[5]=kn(()=>{},["stop"]))},[f("div",{class:"dialog-header"},[P[15]||(P[15]=f("h2",null,"新增酒譜",-1)),f("button",{class:"close-btn",onClick:_},"✕")]),Ce($l,{ingredients:oe(i),mode:"create",onSave:E,onCancel:_},null,8,["ingredients"])])])):ye("",!0),l.value&&a.value?(D(),H("div",{key:4,class:"dialog-overlay",onClick:C},[f("div",{class:"dialog",onClick:P[6]||(P[6]=kn(()=>{},["stop"]))},[f("div",{class:"dialog-header"},[P[16]||(P[16]=f("h2",null,"修改酒譜",-1)),f("button",{class:"close-btn",onClick:C},"✕")]),Ce($l,{ingredients:oe(i),"initial-recipe":a.value,mode:"edit",onSave:E,onCancel:C},null,8,["ingredients","initial-recipe"])])])):ye("",!0),u.value?(D(),H("div",{key:5,class:"notification",onClick:P[7]||(P[7]=N=>u.value=!1)},L(c.value),1)):ye("",!0)]))}}),N_=ze(L_,[["__scopeId","data-v-168557c3"]]),F_={class:"recipe-creator"},q_={class:"basic-info"},V_={class:"form-group"},B_={class:"form-group"},H_={class:"ingredients-section"},W_={class:"ingredient-selector"},K_={class:"form-group ingredient-search"},z_={class:"dropdown-container"},Q_={key:0,class:"dropdown-list"},J_=["onClick"],G_={class:"form-group amount-input"},Y_={class:"form-group unit-select"},X_=["value"],Z_=["disabled"],ey={class:"selected-ingredients"},ty={key:0},ny=["onClick"],sy={key:1},iy={class:"style-section"},ry={class:"form-group"},oy={class:"form-group"},ly=["value"],ay={class:"form-group"},cy={class:"sticky-footer"},uy={class:"total-cost"},dy=["disabled"],fy=Le({__name:"RecipeCreator",setup(e){const t=yn(),n=bs(),{ingredients:s}=Mn(t),i=["ml","g","dash","份"],r=Object.keys(Qs),o=Y({name:"",bartenderName:"",glass:"",ice:"",method:"shake",garnishes:[],ingredients:[]}),l=Y(""),a=Y(!1),u=Y(null),c=Y(""),d=Y(i[0]),p=se(()=>s.value.filter(E=>E.name.toLowerCase().includes(l.value.toLowerCase()))),h=se(()=>{const E=o.value.ingredients.reduce((C,w)=>C+w.unitPrice*w.amount,0),O=o.value.ice?Qs[o.value.ice]:0;return E+O}),_=E=>E.type==="單一材料"?E.unit:E.mainUnit,y=()=>{if(!u.value||!c.value)return;const E=s.value.find(C=>C.id===u.value);if(!E)return;const O=_(E);o.value.ingredients.push({id:Date.now(),ingredientId:E.id,amount:parseFloat(c.value),name:E.name,unit:O,unitPrice:E.unitPrice}),u.value=null,c.value="",l.value="",a.value=!1},I=E=>{o.value.ingredients=o.value.ingredients.filter(O=>O.id!==E)},M=()=>{!o.value.name||o.value.ingredients.length===0||(n.addRecipe({name:o.value.name,bartenderName:o.value.bartenderName,glass:o.value.glass,ice:o.value.ice,method:o.value.method,ingredients:[...o.value.ingredients],garnishes:[...o.value.garnishes],totalCost:h.value}),o.value={name:"",bartenderName:"",glass:"",ice:"",method:"shake",garnishes:[],ingredients:[]})};return(E,O)=>(D(),H("div",F_,[O[21]||(O[21]=f("h2",null,"新增酒譜",-1)),f("form",{onSubmit:kn(M,["prevent"]),class:"recipe-form"},[f("div",q_,[O[11]||(O[11]=f("h3",null,"基本資訊",-1)),f("div",V_,[O[9]||(O[9]=f("label",{for:"recipeName"},"酒名：",-1)),Oe(f("input",{id:"recipeName","onUpdate:modelValue":O[0]||(O[0]=C=>o.value.name=C),type:"text",required:"",placeholder:"請輸入姓名"},null,512),[[De,o.value.name]])]),f("div",B_,[O[10]||(O[10]=f("label",{for:"bartenderName"},"調酒師名：",-1)),Oe(f("input",{id:"bartenderName","onUpdate:modelValue":O[1]||(O[1]=C=>o.value.bartenderName=C),type:"text",required:"",placeholder:"請輸入姓名"},null,512),[[De,o.value.bartenderName]])])]),f("div",H_,[O[14]||(O[14]=f("h3",null,"酒體材料",-1)),f("div",W_,[f("div",K_,[O[12]||(O[12]=f("label",null,"材料：",-1)),f("div",z_,[Oe(f("input",{"onUpdate:modelValue":O[2]||(O[2]=C=>l.value=C),onFocus:O[3]||(O[3]=C=>a.value=!0),type:"text",placeholder:"請選擇材料"},null,544),[[De,l.value]]),a.value?(D(),H("div",Q_,[(D(!0),H(pe,null,Ee(p.value,C=>(D(),H("div",{key:C.id,class:Lt(["dropdown-item",{selected:u.value===C.id}]),onClick:w=>{u.value=C.id,a.value=!1,l.value=C.name}},L(C.name),11,J_))),128))])):ye("",!0)])]),f("div",G_,[Oe(f("input",{"onUpdate:modelValue":O[4]||(O[4]=C=>c.value=C),type:"number",step:"0.01",min:"0",placeholder:"輸入數量"},null,512),[[De,c.value]])]),f("div",Y_,[Oe(f("select",{"onUpdate:modelValue":O[5]||(O[5]=C=>d.value=C)},[(D(),H(pe,null,Ee(i,C=>f("option",{key:C,value:C},L(C),9,X_)),64))],512),[[gn,d.value]])]),f("button",{type:"button",onClick:y,disabled:!u.value||!c.value,class:"add-ingredient-btn"}," 新增材料 ",8,Z_)]),f("div",ey,[o.value.ingredients.length?(D(),H("table",ty,[O[13]||(O[13]=f("thead",null,[f("tr",null,[f("th",null,"材料"),f("th",null,"數量"),f("th",null,"成本"),f("th",null,"操作")])],-1)),f("tbody",null,[(D(!0),H(pe,null,Ee(o.value.ingredients,C=>(D(),H("tr",{key:C.id},[f("td",null,L(C.name),1),f("td",null,L(C.amount)+" "+L(C.unit),1),f("td",null,"$"+L((C.amount*C.unitPrice).toFixed(2)),1),f("td",null,[f("button",{onClick:w=>I(C.id),class:"delete-btn",type:"button"}," 刪除 ",8,ny)])]))),128))])])):(D(),H("p",sy,"No ingredients added to recipe yet."))])]),f("div",iy,[O[19]||(O[19]=f("h3",null,"造型",-1)),f("div",ry,[O[15]||(O[15]=f("label",{for:"glass"},"杯子：",-1)),Oe(f("input",{id:"glass","onUpdate:modelValue":O[6]||(O[6]=C=>o.value.glass=C),type:"text",required:""},null,512),[[De,o.value.glass]])]),f("div",oy,[O[17]||(O[17]=f("label",{for:"ice"},"冰塊：",-1)),Oe(f("select",{id:"ice","onUpdate:modelValue":O[7]||(O[7]=C=>o.value.ice=C),required:""},[O[16]||(O[16]=f("option",{value:""},"請選擇冰塊大小",-1)),(D(!0),H(pe,null,Ee(oe(r),C=>(D(),H("option",{key:C,value:C},L(C),9,ly))),128))],512),[[gn,o.value.ice]])]),f("div",ay,[O[18]||(O[18]=f("label",{for:"garnish"},"裝飾物：",-1)),Oe(f("input",{id:"garnish","onUpdate:modelValue":O[8]||(O[8]=C=>o.value.garnishes[0].name=C),type:"text"},null,512),[[De,o.value.garnishes[0].name]])])]),f("div",cy,[f("div",uy,[O[20]||(O[20]=Ue(" 成本：")),f("strong",null,"$"+L(h.value.toFixed(2)),1)]),f("button",{type:"submit",class:"save-recipe-btn",disabled:!o.value.name||o.value.ingredients.length===0}," 新增酒譜 ",8,dy)])],32)]))}}),py=ze(fy,[["__scopeId","data-v-4848227e"]]),hy={class:"dialog-overlay"},gy={class:"dialog"},vy={class:"dialog-header"},my={class:"dialog-content"},_y={class:"form-group"},yy={class:"form-group"},by=["value"],wy={class:"form-group"},Sy={class:"amount-unit-group"},Oy=["value"],Iy={class:"form-group"},Cy={class:"price-input"},Py={class:"dialog-footer"},$y={class:"cost-info"},Ey={class:"info-item"},xy={class:"highlight-value"},Ay={class:"button-group"},Ry=["disabled"],ky=Le({__name:"SingleIngredientForm",props:{initialIngredient:{},mode:{}},emits:["save","cancel"],setup(e,{emit:t}){var u,c,d,p,h;const n=e,s=t,i=Y({name:((u=n.initialIngredient)==null?void 0:u.name)||"",unit:((c=n.initialIngredient)==null?void 0:c.unit)||"ml",amount:((d=n.initialIngredient)==null?void 0:d.amount)||0,totalPrice:((p=n.initialIngredient)==null?void 0:p.totalPrice)||0,category:((h=n.initialIngredient)==null?void 0:h.category)||"其他"}),r=["ml","g","dash","份"],o=no,l=se(()=>!i.value.amount||!i.value.totalPrice?0:Math.round(i.value.totalPrice/i.value.amount*100)/100),a=()=>{var _;!i.value.name||!i.value.amount||!i.value.totalPrice||s("save",{...i.value,type:"單一材料",id:((_=n.initialIngredient)==null?void 0:_.id)||Date.now(),unitPrice:l.value})};return(_,y)=>(D(),H("div",hy,[f("div",gy,[f("div",vy,[f("h2",null,L(_.mode==="create"?"新增單一材料":"編輯單一材料"),1),f("button",{class:"close-btn",onClick:y[0]||(y[0]=I=>s("cancel"))},"✕")]),f("div",my,[f("div",_y,[y[7]||(y[7]=f("label",null,"名稱",-1)),Oe(f("input",{"onUpdate:modelValue":y[1]||(y[1]=I=>i.value.name=I),type:"text",required:""},null,512),[[De,i.value.name]])]),f("div",yy,[y[8]||(y[8]=f("label",null,"分類",-1)),Oe(f("select",{"onUpdate:modelValue":y[2]||(y[2]=I=>i.value.category=I)},[(D(!0),H(pe,null,Ee(oe(o),I=>(D(),H("option",{key:I,value:I},L(I),9,by))),128))],512),[[gn,i.value.category]])]),f("div",wy,[y[9]||(y[9]=f("label",null,"數量與單位",-1)),f("div",Sy,[Oe(f("input",{"onUpdate:modelValue":y[3]||(y[3]=I=>i.value.amount=I),type:"number",min:"0",step:"1",required:""},null,512),[[De,i.value.amount,void 0,{number:!0}]]),Oe(f("select",{"onUpdate:modelValue":y[4]||(y[4]=I=>i.value.unit=I)},[(D(),H(pe,null,Ee(r,I=>f("option",{key:I,value:I},L(I),9,Oy)),64))],512),[[gn,i.value.unit]])])]),f("div",Iy,[y[11]||(y[11]=f("label",null,"總價",-1)),f("div",Cy,[y[10]||(y[10]=f("span",{class:"currency"},"$",-1)),Oe(f("input",{"onUpdate:modelValue":y[5]||(y[5]=I=>i.value.totalPrice=I),type:"number",min:"0",step:"0.1",required:""},null,512),[[De,i.value.totalPrice,void 0,{number:!0}]])])])]),f("div",Py,[f("div",$y,[f("div",Ey,[y[12]||(y[12]=f("span",{class:"label"},"成本",-1)),f("span",xy,"$"+L(l.value.toFixed(2))+"/"+L(i.value.unit),1)])]),f("div",Ay,[f("button",{class:"cancel-btn",onClick:y[6]||(y[6]=I=>s("cancel"))},"取消"),f("button",{class:"save-btn",onClick:a,disabled:!i.value.name||!i.value.amount||!i.value.totalPrice},L(_.mode==="create"?"新增材料":"儲存變更"),9,Ry)])])])]))}}),El=ze(ky,[["__scopeId","data-v-72427b63"]]),My={class:"dialog-overlay"},Ty={class:"dialog"},jy={class:"dialog-header"},Dy={class:"dialog-content"},Uy={class:"section"},Ly={class:"form-section"},Ny={class:"form-group"},Fy={class:"form-group"},qy=["value"],Vy={class:"form-group"},By=["value"],Hy={class:"form-group"},Wy={class:"amount-input"},Ky=["placeholder"],zy={class:"unit"},Qy={key:0,class:"help-text"},Jy={class:"section"},Gy={class:"form-section"},Yy={class:"ingredients-list"},Xy={class:"section"},Zy={class:"form-section"},eb={class:"form-group"},tb={class:"dialog-footer"},nb={class:"cost-info"},sb={class:"info-item"},ib={class:"highlight-value"},rb={class:"info-item"},ob={class:"value"},lb={class:"button-group"},ab=["disabled"],cb=Le({__name:"CompoundIngredientForm",props:{initialIngredient:{},mode:{}},emits:["save","cancel"],setup(e,{emit:t}){var C,w,P,N,V,j;const n=e,s=t,i=yn(),{ingredients:r}=Mn(i),o=se(()=>r.value),l=Y({name:((C=n.initialIngredient)==null?void 0:C.name)||"",mainUnit:((w=n.initialIngredient)==null?void 0:w.mainUnit)||"ml",category:((P=n.initialIngredient)==null?void 0:P.category)||"其他",ingredients:((N=n.initialIngredient)==null?void 0:N.ingredients)||[],instructions:((V=n.initialIngredient)==null?void 0:V.instructions)||""}),a=["ml","g","dash","份"],u=no,c=Y([{id:Date.now(),ingredient:null,amount:0}]),d=Y(((j=n.initialIngredient)==null?void 0:j.totalAmount)||0);n.initialIngredient&&n.mode==="edit"&&(c.value=n.initialIngredient.ingredients.map(m=>{const S=o.value.find(k=>k.id===m.ingredientId);return{id:m.ingredientId,ingredient:S||null,amount:m.amount}}),c.value.length===0&&c.value.push({id:Date.now(),ingredient:null,amount:0}));const p=se(()=>c.value.reduce((m,S)=>!S.ingredient||!S.amount||(S.ingredient.type==="單一材料"?S.ingredient.unit:S.ingredient.mainUnit)!==l.value.mainUnit?m:m+S.amount,0)),h=se(()=>d.value||p.value),_=se(()=>c.value.reduce((m,S)=>!S.ingredient||!S.amount?m:m+S.amount*S.ingredient.unitPrice,0)),y=se(()=>!h.value||!_.value?0:_.value/h.value),I=()=>{c.value.push({id:Date.now(),ingredient:null,amount:0})},M=m=>{c.value=c.value.filter(S=>S.id!==m)},E=(m,S)=>{const k=c.value.find(F=>F.id===m);k&&(k.ingredient=S.ingredient,k.amount=S.amount)},O=()=>{var S;if(!l.value.name)return;const m=c.value.filter(k=>k.ingredient&&k.amount).map(k=>({ingredientId:k.ingredient.id,amount:k.amount}));m.length!==0&&s("save",{...l.value,type:"複合材料",id:((S=n.initialIngredient)==null?void 0:S.id)||Date.now(),ingredients:m,totalAmount:h.value,totalPrice:_.value,unitPrice:y.value})};return(m,S)=>(D(),H("div",My,[f("div",Ty,[f("div",jy,[f("h2",null,L(m.mode==="create"?"新增複合材料":"編輯複合材料"),1),f("button",{class:"close-btn",onClick:S[0]||(S[0]=k=>s("cancel"))},"✕")]),f("div",Dy,[f("div",Uy,[S[11]||(S[11]=f("h3",{class:"section-title"},"基本資料",-1)),f("div",Ly,[f("div",Ny,[S[7]||(S[7]=f("label",null,"名稱",-1)),Oe(f("input",{"onUpdate:modelValue":S[1]||(S[1]=k=>l.value.name=k),type:"text",required:""},null,512),[[De,l.value.name]])]),f("div",Fy,[S[8]||(S[8]=f("label",null,"分類",-1)),Oe(f("select",{"onUpdate:modelValue":S[2]||(S[2]=k=>l.value.category=k)},[(D(!0),H(pe,null,Ee(oe(u),k=>(D(),H("option",{key:k,value:k},L(k),9,qy))),128))],512),[[gn,l.value.category]])]),f("div",Vy,[S[9]||(S[9]=f("label",null,"主要單位",-1)),Oe(f("select",{"onUpdate:modelValue":S[3]||(S[3]=k=>l.value.mainUnit=k)},[(D(),H(pe,null,Ee(a,k=>f("option",{key:k,value:k},L(k),9,By)),64))],512),[[gn,l.value.mainUnit]])]),f("div",Hy,[S[10]||(S[10]=f("label",null,"總量（若與材料總和不同）",-1)),f("div",Wy,[Oe(f("input",{"onUpdate:modelValue":S[4]||(S[4]=k=>d.value=k),type:"number",min:"0",step:"0.1",placeholder:"輸入總"+l.value.mainUnit+"數"},null,8,Ky),[[De,d.value,void 0,{number:!0}]]),f("span",zy,L(l.value.mainUnit),1)]),p.value?(D(),H("div",Qy," 材料總和: "+L(p.value.toFixed(2))+L(l.value.mainUnit),1)):ye("",!0)])])]),f("div",Jy,[S[12]||(S[12]=f("h3",{class:"section-title"},"材料清單",-1)),f("div",Gy,[f("div",Yy,[(D(!0),H(pe,null,Ee(c.value,k=>(D(),H("div",{key:k.id,class:"ingredient-input"},[Ce(_r,{ingredients:o.value,"show-delete":c.value.length>1,"initial-ingredient":k.ingredient,"initial-amount":k.amount,onUpdate:F=>E(k.id,F),onRemove:()=>M(k.id)},null,8,["ingredients","show-delete","initial-ingredient","initial-amount","onUpdate","onRemove"])]))),128)),f("button",{type:"button",class:"add-ingredient-btn",onClick:I}," + 新增其他材料 ")])])]),f("div",Xy,[S[13]||(S[13]=f("h3",{class:"section-title"},"作法",-1)),f("div",Zy,[f("div",eb,[Oe(f("textarea",{"onUpdate:modelValue":S[5]||(S[5]=k=>l.value.instructions=k),rows:"4",placeholder:"請輸入製作步驟..."},null,512),[[De,l.value.instructions]])])])])]),f("div",tb,[f("div",nb,[f("div",sb,[S[14]||(S[14]=f("span",{class:"label"},"總量",-1)),f("span",ib,L(h.value.toFixed(2))+L(l.value.mainUnit),1)]),f("div",rb,[S[15]||(S[15]=f("span",{class:"label"},"平均成本",-1)),f("span",ob,"$"+L(y.value.toFixed(2))+"/"+L(l.value.mainUnit),1)])]),f("div",lb,[f("button",{class:"cancel-btn",onClick:S[6]||(S[6]=k=>s("cancel"))},"取消"),f("button",{class:"save-btn",onClick:O,disabled:!l.value.name||!c.value.some(k=>k.ingredient&&k.amount)},L(m.mode==="create"?"新增複合材料":"儲存變更"),9,ab)])])])]))}}),xl=ze(cb,[["__scopeId","data-v-65d97950"]]),ub={class:"dialog-overlay"},db={class:"dialog"},fb={class:"dialog-header"},pb={class:"header-content"},hb={class:"dialog-content"},gb={class:"detail-section"},vb={class:"detail-row"},mb={class:"value"},_b={class:"detail-row"},yb={class:"value"},bb={class:"detail-row"},wb={class:"value"},Sb={class:"detail-row"},Ob={class:"value"},Ib={class:"dialog-actions"},Cb=Le({__name:"SingleIngredientDetailDialog",props:{ingredient:{}},emits:["close","delete","edit"],setup(e,{emit:t}){const n=t;return(s,i)=>(D(),H("div",ub,[f("div",db,[f("div",fb,[f("div",pb,[f("h2",null,L(s.ingredient.name),1),i[3]||(i[3]=f("span",{class:"type-pill"},"單一材料",-1))]),f("button",{class:"close-btn",onClick:i[0]||(i[0]=r=>n("close"))},"✕")]),f("div",hb,[f("div",gb,[f("div",vb,[i[4]||(i[4]=f("span",{class:"label"},"分類",-1)),f("span",mb,L(s.ingredient.category),1)]),f("div",_b,[i[5]||(i[5]=f("span",{class:"label"},"數量",-1)),f("span",yb,L(s.ingredient.amount)+" "+L(s.ingredient.unit),1)]),f("div",bb,[i[6]||(i[6]=f("span",{class:"label"},"單價",-1)),f("span",wb,"$"+L(s.ingredient.totalPrice),1)]),f("div",Sb,[i[7]||(i[7]=f("span",{class:"label"},"成本",-1)),f("span",Ob,"$"+L(s.ingredient.unitPrice)+"/"+L(s.ingredient.unit),1)])]),f("div",Ib,[f("button",{class:"edit-btn",onClick:i[1]||(i[1]=r=>n("edit",s.ingredient))}," 修改材料 "),f("button",{class:"delete-btn",onClick:i[2]||(i[2]=r=>n("delete",s.ingredient.id))}," 刪除材料 ")])])])]))}}),Pb=ze(Cb,[["__scopeId","data-v-fea27dad"]]),$b={class:"dialog-overlay"},Eb={class:"dialog"},xb={class:"dialog-header"},Ab={class:"header-content"},Rb={class:"dialog-content"},kb={class:"ingredients-list"},Mb={class:"ingredient-name"},Tb={class:"ingredient-amount"},jb={key:0,class:"section"},Db={class:"instructions-content"},Ub={class:"section"},Lb={class:"presentation-details"},Nb={class:"detail-row"},Fb={class:"value"},qb={class:"detail-row"},Vb={class:"value"},Bb={class:"detail-row"},Hb={class:"value"},Wb={class:"dialog-actions"},Kb=Le({__name:"CompoundIngredientDetailDialog",props:{ingredient:{}},emits:["close","delete","edit"],setup(e,{emit:t}){const n=e,s=t,i=yn(),{ingredients:r}=Mn(i),o=se(()=>n.ingredient.ingredients.map(l=>{const a=r.value.find(u=>u.id===l.ingredientId);return(a==null?void 0:a.type)==="單一材料"?{name:a.name,amount:l.amount,unit:a.unit,totalPrice:l.amount/a.amount*a.totalPrice}:null}).filter(l=>l!==null));return(l,a)=>(D(),H("div",$b,[f("div",Eb,[f("div",xb,[f("div",Ab,[f("h2",null,L(l.ingredient.name),1),a[3]||(a[3]=f("span",{class:"type-pill"},"複合材料",-1))]),f("button",{class:"close-btn",onClick:a[0]||(a[0]=u=>s("close"))},"✕")]),f("div",Rb,[a[9]||(a[9]=f("h4",{class:"section-title"},"材料清單",-1)),f("div",kb,[(D(!0),H(pe,null,Ee(o.value,u=>(D(),H("div",{key:u.name,class:"ingredient-row"},[f("span",Mb,L(u.name),1),f("span",Tb,L(u.amount)+" "+L(u.unit),1)]))),128))]),l.ingredient.instructions?(D(),H("div",jb,[a[4]||(a[4]=f("h4",{class:"section-title"},"作法",-1)),f("div",Db,L(l.ingredient.instructions),1)])):ye("",!0),f("div",Ub,[a[8]||(a[8]=f("h4",{class:"section-title"},"其他資訊",-1)),f("div",Lb,[f("div",Nb,[a[5]||(a[5]=f("span",{class:"label"},"分類",-1)),f("span",Fb,L(l.ingredient.category),1)]),f("div",qb,[a[6]||(a[6]=f("span",{class:"label"},"主要單位",-1)),f("span",Vb,L(l.ingredient.mainUnit),1)]),f("div",Bb,[a[7]||(a[7]=f("span",{class:"label"},"成本",-1)),f("span",Hb,"$"+L(l.ingredient.unitPrice.toFixed(2))+"/"+L(l.ingredient.mainUnit),1)])])]),f("div",Wb,[f("button",{class:"edit-btn",onClick:a[1]||(a[1]=u=>s("edit",l.ingredient))}," 修改材料 "),f("button",{class:"delete-btn",onClick:a[2]||(a[2]=u=>s("delete",l.ingredient.id))}," 刪除材料 ")])])])]))}}),zb=ze(Kb,[["__scopeId","data-v-ef174b94"]]),Qb={class:"ingredients-manager"},Jb={class:"header"},Gb={class:"button-group"},Yb={class:"search-bar"},Xb={class:"category-tabs"},Zb=["onClick"],e0={class:"ingredients-grid"},t0=["onClick"],n0={class:"ingredient-name"},s0={class:"ingredient-details"},i0={class:"type-tag"},r0={class:"unit-price"},o0={key:0,class:"pagination"},l0=["disabled"],a0=["onClick","disabled"],c0=["disabled"],ji=20,u0=Le({__name:"IngredientsManager",setup(e){const t=yn(),{ingredients:n}=Mn(t);ii(()=>{t.loadSavedIngredients()});const s=Y(null),i=Y(!1),r=Y(!1),o=Y(!1),l=Y(!1),a=Y(!1),u=Y(""),c=Y({name:"",category:"基酒",amount:0,unit:"ml",totalPrice:0}),d=Y({id:0,name:"",category:"基酒",type:"單一材料",amount:0,unit:"ml",totalPrice:0,unitPrice:0}),p=Y(""),h=Y("全部"),_=Y(1),y=se(()=>{let $=n.value;if(h.value!=="全部"&&($=$.filter(q=>q.category===h.value)),p.value){const q=p.value.toLowerCase();$=$.filter(ie=>ie.name.toLowerCase().includes(q))}return $}),I=se(()=>{const $=(_.value-1)*ji,q=$+ji;return y.value.slice($,q)}),M=se(()=>Math.ceil(y.value.length/ji)),E=se(()=>{const $=M.value,q=_.value,ie=[];if(ie.push(1),$<=5)for(let B=2;B<=$;B++)ie.push(B);else{q>3&&ie.push("...");for(let B=Math.max(2,q-1);B<=Math.min(q+1,$-1);B++)ie.push(B);q<$-2&&ie.push("..."),$>1&&ie.push($)}return ie}),O=$=>{_.value=$,window.scrollTo({top:0,behavior:"smooth"})},C=$=>$.type==="單一材料"?$.unit:$.mainUnit,w=$=>{if($.type==="單一材料"){const{id:q,type:ie,unitPrice:B,...ne}=$;t.addSingleIngredient(ne)}else{const{id:q,type:ie,totalAmount:B,totalPrice:ne,unitPrice:Re,...le}=$;t.addCompoundIngredient(le)}u.value=`${$.name}已成功加入材料資料庫`,a.value=!0,setTimeout(()=>{a.value=!1},3e3),r.value=!1,o.value=!1},P=$=>{try{t.removeIngredient($),i.value=!1,u.value="材料已成功刪除",a.value=!0,setTimeout(()=>{a.value=!1},3e3)}catch(q){q instanceof Error&&(u.value=q.message,a.value=!0,setTimeout(()=>{a.value=!1},3e3))}},N=$=>{s.value=$,i.value=!0},V=()=>{s.value=null,i.value=!1},j=()=>{r.value=!1,c.value={name:"",category:"基酒",amount:0,unit:"ml",totalPrice:0}},m=()=>{l.value=!1,d.value={id:0,name:"",category:"基酒",type:"單一材料",amount:0,unit:"ml",totalPrice:0,unitPrice:0}},S=$=>{if($.type==="單一材料"){if(!$.name||!$.amount||!$.totalPrice)return}else if(!$.name)return;t.updateIngredient($),u.value=`${$.name}已成功更新`,a.value=!0,setTimeout(()=>{a.value=!1},3e3),m()},k=()=>{o.value=!1},F=$=>{s.value=$,i.value=!1,l.value=!0};return($,q)=>{var ie,B,ne,Re;return D(),H("div",Qb,[f("div",Jb,[q[9]||(q[9]=f("h2",null,"材料一覽",-1)),f("div",Gb,[f("button",{class:"add-btn",onClick:q[0]||(q[0]=le=>o.value=!0)},q[7]||(q[7]=[f("span",{class:"plus-icon"},"+",-1),Ue(" 新增複合材料 ")])),f("button",{class:"add-btn",onClick:q[1]||(q[1]=le=>r.value=!0)},q[8]||(q[8]=[f("span",{class:"plus-icon"},"+",-1),Ue(" 新增單一材料 ")]))])]),f("div",Yb,[Oe(f("input",{type:"text","onUpdate:modelValue":q[2]||(q[2]=le=>p.value=le),placeholder:"搜尋材料...",class:"search-input"},null,512),[[De,p.value]])]),f("div",Xb,[f("button",{class:Lt(["tab-btn",{active:h.value==="全部"}]),onClick:q[3]||(q[3]=le=>h.value="全部")}," 全部 ",2),(D(!0),H(pe,null,Ee(oe(no),le=>(D(),H("button",{key:le,class:Lt(["tab-btn",{active:h.value===le}]),onClick:xe=>h.value=le},L(le),11,Zb))),128))]),f("div",e0,[(D(!0),H(pe,null,Ee(I.value,le=>(D(),H("div",{key:le.id,class:"ingredient-item",onClick:xe=>N(le)},[f("h3",n0,L(le.name),1),f("div",s0,[f("span",i0,L(le.type),1),f("span",r0," $"+L(le.unitPrice.toFixed(2))+"/"+L(C(le)),1)])],8,t0))),128))]),M.value>1?(D(),H("div",o0,[f("button",{class:"page-btn nav-btn",disabled:_.value===1,onClick:q[4]||(q[4]=le=>O(_.value-1)),"aria-label":"Previous page"}," ← ",8,l0),(D(!0),H(pe,null,Ee(E.value,le=>(D(),H("button",{key:le,class:Lt(["page-btn",{active:_.value===le,ellipsis:le==="..."}]),onClick:xe=>le!=="..."&&O(le),disabled:le==="..."},L(le),11,a0))),128)),f("button",{class:"page-btn nav-btn",disabled:_.value===M.value,onClick:q[5]||(q[5]=le=>O(_.value+1)),"aria-label":"Next page"}," → ",8,c0)])):ye("",!0),r.value?(D(),It(El,{key:1,mode:"create",onSave:w,onCancel:j})):ye("",!0),o.value?(D(),It(xl,{key:2,mode:"create",onSave:w,onCancel:k})):ye("",!0),((ie=s.value)==null?void 0:ie.type)==="單一材料"&&i.value?(D(),It(Pb,{key:3,ingredient:s.value,onClose:V,onDelete:P,onEdit:F},null,8,["ingredient"])):ye("",!0),((B=s.value)==null?void 0:B.type)==="複合材料"&&i.value?(D(),It(zb,{key:4,ingredient:s.value,onClose:V,onDelete:P,onEdit:F},null,8,["ingredient"])):ye("",!0),l.value&&((ne=s.value)==null?void 0:ne.type)==="單一材料"?(D(),It(El,{key:5,"initial-ingredient":s.value,mode:"edit",onSave:S,onCancel:m},null,8,["initial-ingredient"])):ye("",!0),l.value&&((Re=s.value)==null?void 0:Re.type)==="複合材料"?(D(),It(xl,{key:6,"initial-ingredient":s.value,mode:"edit",onSave:S,onCancel:m},null,8,["initial-ingredient"])):ye("",!0),a.value?(D(),H("div",{key:7,class:"notification",onClick:q[6]||(q[6]=le=>a.value=!1)},L(u.value),1)):ye("",!0)])}}}),d0=ze(u0,[["__scopeId","data-v-7b6fc3d1"]]),f0=op({history:Uf("/"),routes:[{path:"/",name:"home",component:N_},{path:"/recipes/new",name:"new-recipe",component:py},{path:"/ingredients",name:"ingredients",component:d0}]}),so=Gd(lm);so.use(Zd());so.use(f0);so.mount("#app");
